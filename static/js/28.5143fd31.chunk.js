(this["webpackJsonpsivanandha-vidyashram-seithur"]=this["webpackJsonpsivanandha-vidyashram-seithur"]||[]).push([[28],{1386:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(16),i=t(195),l=t(993),s=t(812),o=t(174),f=t(173),d=t(758),u=t(832),m=t(804),E=t(36),p=t(11),h=t(919);var g=function(){var e=Object(p.b)(),a=Object(p.c)((function(e){return e.staff.staffReducer.searchText})),t=Object(p.c)((function(e){return e.fuse.settings.mainTheme}));return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},r.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.a,{animation:"transition.expandIn",delay:300},r.a.createElement(s.a,{className:"text-32 mr-12"},"supervised_user_circle")),r.a.createElement(c.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(o.a,{variant:"h6",className:"hidden sm:flex"},"Staff")))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center pr-8 sm:px-12"},r.a.createElement(m.a,{theme:t},r.a.createElement(c.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(f.a,{className:"flex p-4 items-center w-full max-w-512 px-8 py-4",elevation:1},r.a.createElement(s.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(d.a,{placeholder:"Search Staff",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:function(a){return e(h.a.setSearchText(a))}}))))),r.a.createElement(c.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(u.a,{component:E.a,to:"/staff/new",className:"whitespace-no-wrap normal-case",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"New Staff"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},S=t(8),b=t(10),v=t(826),j=t(757),x=t(32),T=t.n(x),O=t(192),y=t(70),w=t(21),N=t(334),C={open:!1,data:""},A={currentPage:1,total:0,pageSize:20,sorted:"staff.firstname",isAsc:"ASC"};var F=function(e){var a=Object(p.b)(),t=Object(n.useState)(A),i=Object(b.a)(t,2),l=i[0],o=i[1],f=Object(n.useState)(C),d=Object(b.a)(f,2),u=d[0],m=d[1],E=Object(p.c)((function(e){return e.staff.staffReducer.searchText})),g=Object(O.b)(N.e),x=Object(b.a)(g,2),F=x[0],H=x[1],P=H.loading,_=H.error,D=H.data,R=(D=void 0===D?{}:D).getAllStaff,Y=void 0===R?{}:R,z=Object(O.c)(N.c,{onCompleted:function(e){e.e;a(w.j({message:"Staff details deleted successfully",variant:"info"})),I(!1,null),k()}}),L=Object(b.a)(z,1)[0],k=function(){F({variables:{pageNo:l.currentPage,pageSize:l.pageSize,sortCol:l.sorted,isAsc:l.isAsc,isactive:!0}})},M=r.a.useCallback((function(e){var a={currentPage:e.newPage,pageSize:e.pageSize};o((function(e){return Object.assign(Object(S.a)(Object(S.a)({},e),a))}))}));Object(n.useEffect)((function(){k()}),[l]),Object(n.useEffect)((function(){e.history.location&&e.history.location.data&&k()}),[e.history.location]);var I=function(e,a){e?m({open:e,data:a}):m({open:!1})};if(_)return r.a.createElement("h1",null,"Error...");if(P||!Y)return r.a.createElement(y.s,null);var J=function(e,a){return 0===a.length?e:c.u.filterArrayByString(e,a)}(Y.rows,E.trim()),X=Y.count;return r.a.createElement(n.Fragment,null,r.a.createElement(y.q,{data:J,loading:P,totalCount:X,fetchData:M,currentPage:l.currentPage,pageSize:l.pageSize,hasExport:!0,columns:[{id:"aadhaarno",Header:"Aadhaar No.",accessor:"aadhaarno"},{id:"name",Header:"Name",accessor:function(e){return e.firstname+" "+e.lastname},style:{whiteSpace:"unset"},getProps:function(){return{style:{paddingLeft:"8px"}}}},{id:"staffno",Header:"Staff No.",accessor:"staffno"},{id:"gender",Header:"Gender",accessor:"gender",style:{whiteSpace:"unset"}},{id:"designation",Header:"Designation",accessor:"designation"},{id:"dob",Header:"DOB",accessor:"dob",Cell:function(e){return r.a.createElement("div",{className:"pl-8"},e.row.original.dob?T()(e.row.original.dob).format("Do MMM YYYY"):"")}},{id:"doj",Header:"Joined On",accessor:"doj",Cell:function(e){return r.a.createElement("div",{className:"pl-8"},e.row.original.doj?T()(e.row.original.doj).format("Do MMM YYYY"):"")}},{id:"rel",Header:"Religion",accessor:"religion"},{id:"controls",Header:"",sortable:!1,Cell:function(t){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(v.a,{title:"Edit Staff"},r.a.createElement(j.a,{onClick:function(n){var r;n.stopPropagation(),a(h.a.setSelectedStaff(t.row.original)),r=t.row.original.id,e.history.push({pathname:"/staff/".concat(r)})}},r.a.createElement(s.a,null,"edit"))),r.a.createElement(v.a,{title:"Delete / Inactivate"},r.a.createElement(n.Fragment,null,r.a.createElement(j.a,{onClick:function(e){e.stopPropagation(),I(!0,t.row.original)}},r.a.createElement(s.a,null,"delete")))))}}]}),r.a.createElement(y.e,{open:u.open,title:"Are you sure you want to delete this Staff?",onConfirm:function(){u.data&&u.data.id&&L({variables:{id:u.data.id}})},onCancel:function(){return I(!1)}},r.a.createElement("div",null,u.data?u.data.firstname+" "+u.data.lastname:"")))};a.default=Object(i.a)("staff",l.a)((function(e){var a=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:r.a.createElement(g,{pageLayout:a}),content:r.a.createElement(F,e),ref:a,innerScroll:!0}))}))},919:function(e,a,t){"use strict";var n={};t.r(n),t.d(n,"SET_SEARCH_TEXT",(function(){return r})),t.d(n,"SET_STAFF_SELECTED",(function(){return c})),t.d(n,"setSearchText",(function(){return i})),t.d(n,"setSelectedStaff",(function(){return l}));var r="[STAFF] SET SEARCH TEXT",c="[STAFF] SET STAFF SELECTED";function i(e){return{type:r,searchText:e.target.value}}function l(e){return{type:c,data:e}}t.d(a,"a",(function(){return n}))},993:function(e,a,t){"use strict";var n=t(47),r=t(8),c=t(919),i={selectedStaff:{},searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.a.SET_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.a.SET_STAFF_SELECTED:return Object(r.a)(Object(r.a)({},e),{},{selectedStaff:a.data});default:return e}},s=Object(n.d)({staffReducer:l});a.a=s}}]);