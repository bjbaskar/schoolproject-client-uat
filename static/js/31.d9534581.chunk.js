(this["webpackJsonpsivanandha-vidyashram-seithur"]=this["webpackJsonpsivanandha-vidyashram-seithur"]||[]).push([[31],{1379:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(16),l=t(195),o=t(877),i=t(812),d=t(174),s=t(832),m=t(11),u=t(60);var p=function(e){var a=Object(m.b)();return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(c.a,{animation:"transition.expandIn",delay:300},r.a.createElement(i.a,{className:"text-32 mr-12"},"calendar_today")),r.a.createElement(c.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(d.a,{variant:"h6",className:"hidden sm:flex"},"Academic Year"))),r.a.createElement(c.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(s.a,{onClick:function(){a(u.n.openNewDialog())},variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex normal-case"},"Add New Academic Year"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},E=t(826),f=t(757),b=t(32),O=t.n(b),y=t(846),j=t(70);var g=function(){var e=Object(m.b)();return r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(c.n,{className:"flex-grow overflow-x-auto"},r.a.createElement(y.b,{query:u.o.getAcadYears},(function(a){var t=a.loading,n=a.error,c=a.data;if(n)return r.a.createElement("h1",null,"Error...");if(t||!c)return r.a.createElement(j.s,null);var l=c.getAcadYears;return r.a.createElement(j.o,{data:l,hasExport:!1,columns:[{id:"fromDate",Header:"From Date",accessor:function(e){return O()(e.fromdate).format("MMMM Do YYYY")},getProps:function(){return{style:{paddingLeft:"32px"}}}},{id:"todate",Header:"To Date",accessor:function(e){return O()(e.todate).format("MMMM Do YYYY")}},{id:"displayname",Header:"Display Name",accessor:"displayname"},{id:"is_current",Header:"is Current Year",accessor:"is_current",getProps:function(){return{style:{justifyContent:"center"}}},Cell:function(e){return e.row.original.is_current?r.a.createElement(i.a,{className:"text-green text-20"},"check_circle"):r.a.createElement(i.a,{className:"text-red text-20"},"remove_circle")}},{id:"is_next",Header:"is Next Year",accessor:function(e){return e.is_next?"Yes":"No"}},{id:"edit",Header:"",sortable:!1,Cell:function(a){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(E.a,{title:"Edit Config"},r.a.createElement(f.a,{onClick:function(t){t.stopPropagation(),e(u.n.openEditDialog(a.row.original,"edit"))}},r.a.createElement(i.a,null,"edit"))),r.a.createElement(E.a,{title:"Delete / Inactivate"},r.a.createElement(f.a,{onClick:function(t){t.stopPropagation(),e(u.n.openEditDialog(a.row.original,"delete"))}},r.a.createElement(i.a,null,"delete"))))}}]})}))))},_=t(8),h=t(10),x=t(829),v=t(823),D=t(833),N=t(834),A=t(836),w=t(820),T=t(852),Y=t(835),C=t(874),I=t(771),S=t(1369),L=t(79),G=t.n(L),P=t(101),k={id:"",fromdate:new Date,todate:O()(new Date).add(11,"months").toString(),displayname:"",is_current:!1,is_next:!1,prefixyear:O()(new Date).format("YYYY")};var R=function(e){var a=Object(m.b)(),t=Object(m.c)((function(e){return e.master.ayearReducer.ayearDialog})),l=Object(n.useState)(u.o.editAcadYear),o=Object(h.a)(l,2),p=o[0],E=o[1],f=Object(n.useState)(!1),b=Object(h.a)(f,2),g=b[0],L=b[1],R=Object(P.b)(Object(_.a)({},k)),M=R.form,W=R.setForm,H=R.setInForm,F=Object(n.useRef)(null),J=Object(n.useState)(""),q=Object(h.a)(J,2),U=q[0],X=q[1],z=Object(n.useCallback)((function(){"edit"!==t.type&&"delete"!==t.type||!t.data||W(Object(_.a)({},t.data))}),[t.type,t.data,W]);Object(n.useEffect)((function(){return t.props.open&&(X(""),z()),function(){W(k)}}),[t.props.open,z,W]),Object(n.useEffect)((function(){var e=function(e){var a=O()(e).format("YYYY");a=Number(a),H("prefixyear",a)};!function(){var a,n;if("new"===t.type){n=u.o.addAcadYear;var r=new Date,c=O()(new Date).add(11,"months").toString();a=O()(r).format("YYYY")+"-"+O()(c).format("YYYY"),H("displayname",a),e(new Date)}else"edit"===t.type?(n=u.o.editAcadYear,e(M.fromdate)):(n=u.o.delAcadYear,e(M.fromdate));E(n)}()}),[M.fromdate,M.todate,H,t.type]);var B=function(){L(!1)},Q=function(){L(!0)},V=function(){"edit"===t.type?a(u.n.closeEditDialog()):a(u.n.closeNewDialog())},K=function(e){H("fromdate",e)},Z=function(e){H("todate",e)},$=function(e,a){H(a,e.target.checked)},ee=function(){return!M.is_current||!M.is_next||(X("Is Current Academic Year and Next Academic year cannot be same."),!1)};return r.a.createElement(x.a,Object.assign({},t.props,{onClose:V,fullWidth:!0,maxWidth:"sm"}),r.a.createElement(v.a,{position:"static",elevation:1},r.a.createElement(D.a,{className:"flex w-full"},r.a.createElement(d.a,{variant:"subtitle1",color:"inherit"},"new"===t.type?"New Academic Year":"edit"===t.type?"Edit Academic Year":"Delete Academic Year"))),r.a.createElement(N.a,{classes:{root:"p-0"}},r.a.createElement("div",{className:"px-16 sm:px-24"},r.a.createElement(y.a,{mutation:p,onCompleted:function(e){V()}},(function(e,a){var l=a.loading,o=a.error;a.data;return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{onValid:Q,onInvalid:B,ref:F,onValidSubmit:function(a){"new"===t.type?ee()&&e({variables:{fromdate:M.fromdate,todate:M.todate,displayname:M.displayname,is_current:M.is_current,is_next:M.is_next,prefixyear:M.prefixyear},refetchQueries:[{query:u.o.getAcadYears}]}):"edit"===t.type?ee()&&e({variables:{id:M.id,fromdate:M.fromdate,todate:M.todate,displayname:a.displayname,is_current:M.is_current,is_next:M.is_next,prefixyear:M.prefixYear},refetchQueries:[{query:u.o.getAcadYears}]}):"delete"===t.type&&e({variables:{id:M.id},refetchQueries:[{query:u.o.getAcadYears}]})}},r.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-col "},r.a.createElement(I.a,{utils:C.a},r.a.createElement("div",{className:"flex flex-row w-full"},r.a.createElement(S.a,{variant:"outlined",format:"dd-MM-yyyy",margin:"normal",id:"fromdate",label:"From Date",value:M.fromdate,onChange:K,animateYearScrolling:!0,className:"w-1/2 mr-8"}),r.a.createElement(S.a,{variant:"outlined",format:"dd-MM-yyyy",margin:"normal",id:"todate",label:"To Date",value:M.todate,onChange:Z,animateYearScrolling:!0,className:"w-1/2"}))),r.a.createElement(c.x,{className:"mb-8 mt-16",type:"text",name:"displayname",label:"Display Name",value:M.displayname,validations:{maxLength:20},validationErrors:{maxLength:"You can not type in more than 20 characters"},InputProps:{endAdornment:r.a.createElement(A.a,{position:"end"},r.a.createElement(i.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",required:!0}),r.a.createElement("div",{className:"flex flex-row mt-16"},r.a.createElement("div",{className:"flex flex-col mb-16 w-1/2 justify-start"},r.a.createElement(w.a,{control:r.a.createElement(T.a,{checked:M.is_current,onChange:function(e){return $(e,"is_current")},value:M.is_current,color:"primary"}),label:"Is Current Academic Year?",className:"w-full"}),r.a.createElement("p",{className:"text-14 text-gray-600"},"Please select if this is Current academic year.")),r.a.createElement("div",{className:"flex flex-col mb-16 w-1/2 justify-end"},r.a.createElement(w.a,{control:r.a.createElement(T.a,{checked:M.is_next,onChange:function(e){return $(e,"is_next")},value:M.is_next,color:"primary"}),label:"Is Next Academic Year?",className:"w-full justify-end"}),r.a.createElement("div",{className:"text-14 text-red"},"Please make sure, If this is selected then it is considered for promoting students to next academic year."," ",r.a.createElement("p",null,"When doing class student promotion, this should be considered as next academic year.")))))),l&&r.a.createElement(j.s,{message:"Saving data..."}),o&&r.a.createElement(d.a,{className:"pt-32"},"Error : Please try again! ",r.a.createElement("br",null),o.message," ",r.a.createElement("br",null)),U&&r.a.createElement(d.a,{className:"pt-32 text-red font-bold text-center"},"There was an error! ",r.a.createElement("br",null),U," ",r.a.createElement("br",null)))})),r.a.createElement(j.t,{createdby:M.createdby,createdon:M.createdon,updatedby:M.updatedby,updatedon:M.updatedon}))),"new"===t.type&&r.a.createElement(Y.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){V()}},"Close"),r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){F.current.submit()},disabled:!g},"Add Academic Year")),"edit"===t.type&&r.a.createElement(Y.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){V()}},"Close"),r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){F.current.submit()},disabled:!g},"Save")),"delete"===t.type&&r.a.createElement(Y.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){V()}},"Close"),r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){F.current.submit()}},"Delete")))};a.default=Object(l.a)("master",o.a)((function(){var e=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:r.a.createElement(p,{pageLayout:e}),content:r.a.createElement(g,null),ref:e,innerScroll:!0}),r.a.createElement(R,null))}))},877:function(e,a,t){"use strict";var n=t(47),r=t(8),c=t(60),l={data:[],dialog:{type:"edit",props:{open:!1},data:null,mode:null}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.h.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.h.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},i={data:[],searchText:"",ayearDialog:{type:"edit",props:{open:!1},data:null,mode:null}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.n.SET_AYEAR_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.n.OPEN_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{ayearDialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case c.n.CLOSE_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{ayearDialog:{type:"new",props:{open:!1},data:null}});case c.n.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{ayearDialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.n.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{ayearDialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},s={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.g.SET_EDU_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.g.OPEN_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case c.g.CLOSE_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"new",props:{open:!1},data:null}});case c.g.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.g.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},u={data:[],searchText:"",subjDialog:{type:"edit",props:{open:!1},data:null,mode:null}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.j.GET_SUBJECTS:return Object(r.a)(Object(r.a)({},e),{},{data:a.payload});case c.j.SET_SUBJECTS_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.j.OPEN_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{subjDialog:{type:"new",props:{open:!0},data:null}});case c.j.CLOSE_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{subjDialog:{type:"new",props:{open:!1},data:null}});case c.j.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{subjDialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.j.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{subjDialog:{type:a.mode,props:{open:!1},data:null}});case c.j.SET_SUBJECTS_PAGINATION:return Object(r.a)(Object(r.a)({},e),{},{current:a.current,pageSize:a.pageSize});default:return e}},E={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.b.SET_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.b.OPEN_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{props:{open:!0},data:a.data,mode:a.mode}});case c.b.CLOSE_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{props:{open:!1},data:null,mode:a.mode}});case c.b.SET_CLASS_SEC_PAGINATION:return Object(r.a)(Object(r.a)({},e),{},{current:a.current,pageSize:a.pageSize});case c.b.SET_SUBJECT_IDS:return Object(r.a)(Object(r.a)({},e),{},{subjectIds:a.subjectIds});default:return e}},b={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.d.SET_DCONFIG_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.d.OPEN_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case c.d.CLOSE_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"new",props:{open:!1},data:null}});case c.d.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.d.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!1},data:null}});case c.d.CLOSE_ONLY_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"close",props:{open:!1},data:null}});default:return e}},y=Object(n.d)({schoolProfileReducer:o,ayearReducer:d,edusysReducer:m,subjectReducer:p,classReducer:f,dconfigReducer:O});a.a=y}}]);