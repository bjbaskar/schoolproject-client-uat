(this["webpackJsonpsivanandha-webapp"]=this["webpackJsonpsivanandha-webapp"]||[]).push([[19],{1054:function(e,a,t){"use strict";var n=t(11),r=t(77),c={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}};a.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case r.l.SET_SEARCH_TEXT:return Object(n.a)({},e,{searchText:a.searchText});case r.l.OPEN_NEW_DIALOG:return Object(n.a)({},e,{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case r.l.CLOSE_NEW_DIALOG:return Object(n.a)({},e,{dialog:{type:"new",props:{open:!1},data:null}});case r.l.OPEN_EDIT_DIALOG:return Object(n.a)({},e,{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case r.l.CLOSE_EDIT_DIALOG:return Object(n.a)({},e,{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}}},1056:function(e,a,t){"use strict";var n=t(44),r=t(11),c=t(77),l={data:[],dialog:{type:"edit",props:{open:!1},data:null,mode:null}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.h.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.h.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},d={data:[],searchText:"",ayearDialog:{type:"edit",props:{open:!1},data:null,mode:null}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.n.SET_AYEAR_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case c.n.OPEN_NEW_DIALOG:return Object(r.a)({},e,{ayearDialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case c.n.CLOSE_NEW_DIALOG:return Object(r.a)({},e,{ayearDialog:{type:"new",props:{open:!1},data:null}});case c.n.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{ayearDialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.n.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{ayearDialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},s={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.g.SET_EDU_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case c.g.OPEN_NEW_DIALOG:return Object(r.a)({},e,{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case c.g.CLOSE_NEW_DIALOG:return Object(r.a)({},e,{dialog:{type:"new",props:{open:!1},data:null}});case c.g.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.g.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},p={data:[],searchText:"",subjDialog:{type:"edit",props:{open:!1},data:null,mode:null}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.j.GET_SUBJECTS:return Object(r.a)({},e,{data:a.payload});case c.j.SET_SUBJECTS_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case c.j.OPEN_NEW_DIALOG:return Object(r.a)({},e,{subjDialog:{type:"new",props:{open:!0},data:null}});case c.j.CLOSE_NEW_DIALOG:return Object(r.a)({},e,{subjDialog:{type:"new",props:{open:!1},data:null}});case c.j.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{subjDialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.j.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{subjDialog:{type:a.mode,props:{open:!1},data:null}});case c.j.SET_SUBJECTS_PAGINATION:return Object(r.a)({},e,{current:a.current,pageSize:a.pageSize});default:return e}},E={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.b.SET_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case c.b.OPEN_DIALOG:return Object(r.a)({},e,{dialog:{props:{open:!0},data:a.data,mode:a.mode}});case c.b.CLOSE_DIALOG:return Object(r.a)({},e,{dialog:{props:{open:!1},data:null,mode:a.mode}});case c.b.SET_CLASS_SEC_PAGINATION:return Object(r.a)({},e,{current:a.current,pageSize:a.pageSize});case c.b.SET_SUBJECT_IDS:return Object(r.a)({},e,{subjectIds:a.subjectIds});default:return e}},O=t(1054),j={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.d.SET_DCONFIG_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case c.d.OPEN_NEW_DIALOG:return Object(r.a)({},e,{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case c.d.CLOSE_NEW_DIALOG:return Object(r.a)({},e,{dialog:{type:"new",props:{open:!1},data:null}});case c.d.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.d.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!1},data:null}});case c.d.CLOSE_ONLY_DIALOG:return Object(r.a)({},e,{dialog:{type:"close",props:{open:!1},data:null}});default:return e}},g={data:[],searchText:"",usertypeValue:"student",todoDialog:{type:"edit",props:{open:!1},data:null,mode:null}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.a.SET_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case c.a.SET_USERLIST_USER_TYPE:return Object(r.a)({},e,{usertypeValue:a.usertypeValue});case c.a.OPEN_EDIT_RESET_DIALOG:return Object(r.a)({},e,{todoDialog:{type:"edit",props:{open:!0},data:a.data,mode:a.mode}});case c.a.CLOSE_EDIT_RESET_DIALOG:return Object(r.a)({},e,{todoDialog:{type:"edit",props:{open:!1},data:null}});case c.a.SET_USERLIST_PAGINATION:return Object(r.a)({},e,{current:a.current,pageSize:a.pageSize});default:return e}},y=Object(n.d)({schoolProfileReducer:o,ayearReducer:i,edusysReducer:u,subjectReducer:m,classReducer:b,txtReducer:O.a,dconfigReducer:f,users:h});a.a=y},1398:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(1056),l=t(16),o=t(158),d=t(1030),i=t(963),s=t(1011),u=t(8),p=t(19),m=t.n(p),E=t(221),b=t(64),O=t.n(b),j=t(218),f=t(75),g=t(77);var h=function(){var e=Object(u.b)(),a=Object(u.c)((function(e){return e.subject.subjectReducer.searchText})),t=Object(j.d)(g.k.querySubjects),n=t.loading,c=t.error,o=t.data;if(c)return r.a.createElement("h1",null,"Error...");if(n||!o)return r.a.createElement(f.j,null);var p=function(e,a){return 0===a.length?e:l.v.filterArrayByString(e,a)}(o.getSubjects,a.trim());return r.a.createElement(E.b,{className:"-striped -highlight border-0 min-w-xl ",data:p,showPagination:!0,defaultSorted:[{id:"name",asc:!0}],columns:[{Header:"Subject Name",accessor:"name",style:{whiteSpace:"unset"},getProps:function(){return{style:{paddingLeft:"32px"}}}},{id:"subcode",Header:"Subject Code",accessor:"subcode",Cell:function(e){return r.a.createElement("div",{className:m()("inline p-4 rounded truncate"),style:{backgroundColor:e.original.color,minWidth:"42px"}},e.original.subcode)}},{id:"updatedby",Header:"Last Updated by",accessor:function(e){return e.updatedby?e.updatedby:e.createdby},Cell:function(e){return r.a.createElement("div",null,e.original.updatedby?e.original.updatedby:e.original.createdby)}},{id:"updatedon",Header:"Last Updated on",accessor:function(e){return e.updatedon?e.updatedon:e.createdon},Cell:function(e){return r.a.createElement("div",{className:"pl-8"},e.original.updatedon?O()(e.original.updatedon).format("MMM Do YYYY, h:mm a"):O()(e.original.createdon).format("MMM Do YYYY, h:mm a"))}},{Header:"",sortable:!1,Cell:function(a){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(d.a,{title:"Edit Subject"},r.a.createElement(i.a,{onClick:function(t){t.stopPropagation(),e(g.j.openEditDialog(a.original,"edit"))}},r.a.createElement(s.a,null,"edit"))),r.a.createElement(d.a,{title:"Delete / Inactivate"},r.a.createElement(i.a,{onClick:function(t){t.stopPropagation(),e(g.j.openEditDialog(a.original,"delete"))}},r.a.createElement(s.a,null,"delete"))))}}]})},y=t(157),S=t(194),_=t(962),v=t(1036),x=t(1015);var T=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.subject.subjectReducer.searchText})),n=Object(u.c)((function(e){return e.fuse.settings.mainTheme}));return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},r.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(l.a,{animation:"transition.expandIn",delay:300},r.a.createElement(s.a,{className:"text-32 mr-12"},"library_books")),r.a.createElement(l.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(y.a,{variant:"h6",className:"hidden sm:flex"},"Subject")))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center pr-8 sm:px-12"},r.a.createElement(x.a,{theme:n},r.a.createElement(l.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(S.a,{className:"flex p-4 items-center w-full max-w-512 px-8 py-4",elevation:1},r.a.createElement(s.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(_.a,{placeholder:"Search subject name",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:t,inputProps:{"aria-label":"Search"},onChange:function(e){return a(g.j.setSubjectSearchText(e))}}))))),r.a.createElement(l.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(v.a,{onClick:function(){return a(g.j.openNewDialog())},variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex normal-case"},"Add New Subject"),r.a.createElement("span",{className:"flex sm:hidden normal-case"},"New"))))},D=t(11),N=t(10),I=t(1033),C=t(1027),L=t(1037),w=t(1038),A=t(1010),G=t(1039),R=t(1017),P=t(1121),k=t(82),W=t.n(k),Y=t(1041),H=t(109),U=Object(R.a)((function(e){return{color:{width:"36px",height:"36px",borderRadius:"4px"},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{}}})),z={id:"",name:"",subcode:"",color:""};var X=function(e){var a,t=Object(u.b)(),c=U(e),o=Object(n.useRef)(null),d=Object(u.c)((function(e){return e.subject.subjectReducer.subjDialog})),i=Object(H.b)(z),p=i.form,E=i.setForm,b=Object(n.useState)(!1),O=Object(N.a)(b,2),j=O[0],h=O[1],S=Object(n.useState)(!1),_=Object(N.a)(S,2),x=_[0],T=_[1],R=Object(n.useState)("#e5e5e5"),k=Object(N.a)(R,2),X=k[0],J=k[1],M=Object(n.useState)(null),B=Object(N.a)(M,2),V=B[0],F=B[1];a="new"===d.type?g.k.addSubject:"edit"===d.type?g.k.editSubject:g.k.delSubject;var q=Object(n.useCallback)((function(){"edit"!==d.type&&"delete"!==d.type||!d.data||E(Object(D.a)({},d.data)),"new"===d.type&&E(Object(D.a)({},z))}),[d.data,d.type,E]);Object(n.useEffect)((function(){d.props.open&&q()}),[d.props.open,q]);var K=function(){h(!1)},Q=function(){h(!0)},Z=function(){"edit"===d.type?t(g.j.closeEditDialog()):t(g.j.closeNewDialog()),ee()},$=function(){T(!x)},ee=function(){T(!1)},ae=function(e,a){J(e.hex),F(e.hex)};return r.a.createElement(I.a,Object.assign({},d.props,{onClose:Z,fullWidth:!0,maxWidth:"sm"}),r.a.createElement(C.a,{position:"static",elevation:1},r.a.createElement(L.a,{className:"flex w-full"},r.a.createElement(y.a,{variant:"subtitle1",color:"inherit"},"new"===d.type?"New Subject":"edit"===d.type?"Edit Subject":"Delete Subject"))),r.a.createElement(w.a,{classes:{root:"p-0"}},r.a.createElement("div",{className:"px-16 sm:px-24"},r.a.createElement(Y.a,{mutation:a,onCompleted:function(e){Z()}},(function(e,a){var t=a.loading,i=a.error;a.data;return r.a.createElement(n.Fragment,null,r.a.createElement(W.a,{onValid:Q,onInvalid:K,ref:o,onValidSubmit:function(a){"new"===d.type?e({variables:{name:a.name,subcode:a.subjcode,color:X}}):"edit"===d.type?e({variables:{id:p.id,name:a.name,subcode:a.subjcode,color:X}}):"delete"===d.type&&e({variables:{id:p.id}})}},r.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-col"},r.a.createElement(l.y,{className:"mb-8",type:"text",name:"name",label:"Subject Name",value:p.name,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},InputProps:{endAdornment:r.a.createElement(A.a,{position:"end"},r.a.createElement(s.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",required:!0}),r.a.createElement(l.y,{className:"mb-8",type:"text",name:"subjcode",label:"Subject Code",value:p.subcode,validations:{maxLength:8},validationErrors:{maxLength:"You can not type in more than 8 characters"},InputProps:{endAdornment:r.a.createElement(A.a,{position:"end"},r.a.createElement(s.a,{className:"text-20",color:"action"},"wc"))},variant:"outlined",required:!0}),r.a.createElement("div",{className:m()(c.swatch,"flex flex-row items-center mb-8"),onClick:$},r.a.createElement("div",{className:m()(c.color,"flex flex-row items-center inline p-4 rounded truncate"),style:{background:V?X:p.color}}),r.a.createElement("div",{className:"items-center pl-16"},"Selected Color:"," ",V?X:p.color)),x?r.a.createElement("div",{className:c.cover,onClick:ee},r.a.createElement(P.SwatchesPicker,{color:X,onChange:ae,width:"100%",height:"150px"})):null)),t&&r.a.createElement(f.j,{message:"Saving data..."}),i&&r.a.createElement(y.a,{className:"pt-32"},"Error : Please try again! ",r.a.createElement("br",null),i.message," ",r.a.createElement("br",null)))})))),"new"===d.type&&r.a.createElement(G.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){Z()}},"Close"),r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){o.current.submit()},disabled:!j},"Add")),"edit"===d.type&&r.a.createElement(G.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){Z()}},"Close"),r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){o.current.submit()},disabled:!j},"Save")),"delete"===d.type&&r.a.createElement(G.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){Z()}},"Close"),r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){o.current.submit()}},"Delete")))};a.default=Object(o.a)("subject",c.a)((function(e){var a=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:r.a.createElement(T,{pageLayout:a}),content:r.a.createElement(h,null),ref:a,innerScroll:!0}),r.a.createElement(X,null))}))}}]);