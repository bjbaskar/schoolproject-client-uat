(this["webpackJsonpsivanandha-webapp"]=this["webpackJsonpsivanandha-webapp"]||[]).push([[12],{1054:function(e,a,t){"use strict";var n=t(11),r=t(81),o={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}};a.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case r.l.SET_SEARCH_TEXT:return Object(n.a)({},e,{searchText:a.searchText});case r.l.OPEN_NEW_DIALOG:return Object(n.a)({},e,{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case r.l.CLOSE_NEW_DIALOG:return Object(n.a)({},e,{dialog:{type:"new",props:{open:!1},data:null}});case r.l.OPEN_EDIT_DIALOG:return Object(n.a)({},e,{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case r.l.CLOSE_EDIT_DIALOG:return Object(n.a)({},e,{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}}},1056:function(e,a,t){"use strict";var n=t(44),r=t(11),o=t(81),l={data:[],dialog:{type:"edit",props:{open:!1},data:null,mode:null}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case o.h.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case o.h.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},i={data:[],searchText:"",ayearDialog:{type:"edit",props:{open:!1},data:null,mode:null}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case o.n.SET_AYEAR_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case o.n.OPEN_NEW_DIALOG:return Object(r.a)({},e,{ayearDialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case o.n.CLOSE_NEW_DIALOG:return Object(r.a)({},e,{ayearDialog:{type:"new",props:{open:!1},data:null}});case o.n.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{ayearDialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case o.n.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{ayearDialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},s={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case o.g.SET_EDU_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case o.g.OPEN_NEW_DIALOG:return Object(r.a)({},e,{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case o.g.CLOSE_NEW_DIALOG:return Object(r.a)({},e,{dialog:{type:"new",props:{open:!1},data:null}});case o.g.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case o.g.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},u={data:[],searchText:"",subjDialog:{type:"edit",props:{open:!1},data:null,mode:null}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case o.j.GET_SUBJECTS:return Object(r.a)({},e,{data:a.payload});case o.j.SET_SUBJECTS_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case o.j.OPEN_NEW_DIALOG:return Object(r.a)({},e,{subjDialog:{type:"new",props:{open:!0},data:null}});case o.j.CLOSE_NEW_DIALOG:return Object(r.a)({},e,{subjDialog:{type:"new",props:{open:!1},data:null}});case o.j.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{subjDialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case o.j.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{subjDialog:{type:a.mode,props:{open:!1},data:null}});case o.j.SET_SUBJECTS_PAGINATION:return Object(r.a)({},e,{current:a.current,pageSize:a.pageSize});default:return e}},E={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case o.b.SET_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case o.b.OPEN_DIALOG:return Object(r.a)({},e,{dialog:{props:{open:!0},data:a.data,mode:a.mode}});case o.b.CLOSE_DIALOG:return Object(r.a)({},e,{dialog:{props:{open:!1},data:null,mode:a.mode}});case o.b.SET_CLASS_SEC_PAGINATION:return Object(r.a)({},e,{current:a.current,pageSize:a.pageSize});case o.b.SET_SUBJECT_IDS:return Object(r.a)({},e,{subjectIds:a.subjectIds});default:return e}},y=t(1054),O={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case o.d.SET_DCONFIG_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case o.d.OPEN_NEW_DIALOG:return Object(r.a)({},e,{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case o.d.CLOSE_NEW_DIALOG:return Object(r.a)({},e,{dialog:{type:"new",props:{open:!1},data:null}});case o.d.OPEN_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case o.d.CLOSE_EDIT_DIALOG:return Object(r.a)({},e,{dialog:{type:a.mode,props:{open:!1},data:null}});case o.d.CLOSE_ONLY_DIALOG:return Object(r.a)({},e,{dialog:{type:"close",props:{open:!1},data:null}});default:return e}},b={data:[],searchText:"",usertypeValue:"student",todoDialog:{type:"edit",props:{open:!1},data:null,mode:null}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case o.a.SET_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case o.a.SET_USERLIST_USER_TYPE:return Object(r.a)({},e,{usertypeValue:a.usertypeValue});case o.a.OPEN_EDIT_RESET_DIALOG:return Object(r.a)({},e,{todoDialog:{type:"edit",props:{open:!0},data:a.data,mode:a.mode}});case o.a.CLOSE_EDIT_RESET_DIALOG:return Object(r.a)({},e,{todoDialog:{type:"edit",props:{open:!1},data:null}});case o.a.SET_USERLIST_PAGINATION:return Object(r.a)({},e,{current:a.current,pageSize:a.pageSize});default:return e}},_=Object(n.d)({schoolProfileReducer:c,ayearReducer:d,edusysReducer:p,subjectReducer:m,classReducer:f,txtReducer:y.a,dconfigReducer:g,users:v});a.a=_},1391:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(18),l=t(158),c=t(1056),i=t(1011),d=t(157),s=t(1036),p=t(8),u=t(81);var m=function(e){var a=Object(p.b)();return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(o.a,{animation:"transition.expandIn",delay:300},r.a.createElement(i.a,{className:"text-32 mr-12"},"calendar_today")),r.a.createElement(o.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(d.a,{variant:"h6",className:"hidden sm:flex"},"Academic Year"))),r.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(s.a,{onClick:function(){a(u.n.openNewDialog())},variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex normal-case"},"Add New Academic Year"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},E=t(1030),f=t(963),y=t(221),O=t(64),g=t.n(O),b=t(1041),v=t(75);var _=function(){var e=Object(p.b)();return r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(o.n,{className:"flex-grow overflow-x-auto"},r.a.createElement(b.b,{query:u.o.getAcadYears},(function(a){var t=a.loading,n=a.error,o=a.data;if(n)return r.a.createElement("h1",null,"Error...");if(t||!o)return r.a.createElement(v.i,null);var l=o.getAcadYears;return r.a.createElement(y.b,{className:"-striped -highlight border-0 min-w-xl ",data:l,showPagination:!0,defaultSorted:[{id:"isactive",desc:!0}],columns:[{Header:"From Date",accessor:"fromdate",getProps:function(){return{style:{paddingLeft:"32px"}}},Cell:function(e){return g()(e.original.fromdate).format("MMMM Do YYYY")}},{id:"value",Header:"To Date",accessor:"todate",Cell:function(e){return g()(e.original.todate).format("MMMM Do YYYY")}},{id:"displayname",Header:"Display Name",accessor:"displayname"},{id:"isactive",Header:"Active",accessor:"isactive",getProps:function(){return{style:{justifyContent:"center"}}},Cell:function(e){return e.original.isactive?r.a.createElement(i.a,{className:"text-green text-20"},"check_circle"):r.a.createElement(i.a,{className:"text-red text-20"},"remove_circle")}},{Header:"",sortable:!1,Cell:function(a){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(E.a,{title:"Edit Config"},r.a.createElement(f.a,{onClick:function(t){t.stopPropagation(),e(u.n.openEditDialog(a.original,"edit"))}},r.a.createElement(i.a,null,"edit"))),r.a.createElement(E.a,{title:"Delete / Inactivate"},r.a.createElement(f.a,{onClick:function(t){t.stopPropagation(),e(u.n.openEditDialog(a.original,"delete"))}},r.a.createElement(i.a,null,"delete"))))}}]})}))))},h=t(11),j=t(10),D=t(1033),T=t(1027),S=t(1037),A=t(1038),x=t(1010),N=t(1024),I=t(1046),C=t(1039),L=t(1067),w=t(979),Y=t(1384),G=t(82),P=t.n(G),R=t(109),k={id:"",fromdate:new Date,todate:g()(new Date).add(11,"months").toString(),displayname:"",isactive:!1,prefixyear:g()(new Date).format("YYYY")};var W=function(e){var a=Object(p.b)(),t=Object(p.c)((function(e){return e.ayear.ayearReducer.ayearDialog})),l=Object(n.useState)(u.o.editAcadYear),c=Object(j.a)(l,2),m=c[0],E=c[1],f=Object(n.useState)(!1),y=Object(j.a)(f,2),O=y[0],_=y[1],G=Object(R.b)(Object(h.a)({},k)),W=G.form,H=G.setForm,M=G.setInForm,U=Object(n.useRef)(null),F=Object(n.useCallback)((function(){"edit"!==t.type&&"delete"!==t.type||!t.data||H(Object(h.a)({},t.data))}),[t.type,t.data,H]);Object(n.useEffect)((function(){t.props.open&&F()}),[t.props.open,F]),Object(n.useEffect)((function(){var e=function(e){var a=g()(e).format("YYYY");a=Number(a),M("prefixyear",a)};!function(){var a,n;"new"===t.type?(n=u.o.addAcadYear,a=g()(W.fromdate).format("YYYY")+"-"+g()(W.todate).format("YYYY"),M("displayname",a),e(new Date)):"edit"===t.type?(n=u.o.editAcadYear,e(W.fromdate)):(n=u.o.delAcadYear,e(W.fromdate)),E(n)}()}),[W.fromdate,W.todate,M,t.type]);var X=function(){_(!1)},z=function(){_(!0)},J=function(){"edit"===t.type?a(u.n.closeEditDialog()):a(u.n.closeNewDialog())},q=function(e){M("fromdate",e)},V=function(e){M("todate",e)};return r.a.createElement(D.a,Object.assign({},t.props,{onClose:J,fullWidth:!0,maxWidth:"sm"}),r.a.createElement(T.a,{position:"static",elevation:1},r.a.createElement(S.a,{className:"flex w-full"},r.a.createElement(d.a,{variant:"subtitle1",color:"inherit"},"new"===t.type?"New Academic Year":"edit"===t.type?"Edit Academic Year":"Delete Academic Year"))),r.a.createElement(A.a,{classes:{root:"p-0"}},r.a.createElement("div",{className:"px-16 sm:px-24"},r.a.createElement(b.a,{mutation:m,onCompleted:function(e){J()}},(function(e,a){var l=a.loading,c=a.error;a.data;return r.a.createElement(n.Fragment,null,r.a.createElement(P.a,{onValid:z,onInvalid:X,ref:U,onValidSubmit:function(a){"new"===t.type?e({variables:{fromdate:W.fromdate,todate:W.todate,displayname:W.displayname,isactive:W.isactive,prefixyear:W.prefixyear},refetchQueries:[{query:u.o.getAcadYears}]}):"edit"===t.type?e({variables:{id:W.id,fromdate:W.fromdate,todate:W.todate,displayname:a.displayname,isactive:W.isactive,prefixyear:W.prefixYear},refetchQueries:[{query:u.o.getAcadYears}]}):"delete"===t.type&&e({variables:{id:W.id},refetchQueries:[{query:u.o.getAcadYears}]})}},r.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-col "},r.a.createElement(w.a,{utils:L.a},r.a.createElement(Y.a,{variant:"outlined",format:"dd-MM-yyyy",margin:"normal",id:"fromdate",label:"From Date",value:W.fromdate,onChange:q,animateYearScrolling:!0}),r.a.createElement(Y.a,{variant:"outlined",format:"dd-MM-yyyy",margin:"normal",id:"fromdate",label:"To Date",value:W.todate,onChange:V,animateYearScrolling:!0})),r.a.createElement(o.y,{className:"pr-8 mb-8 mt-16",type:"text",name:"displayname",label:"Display Name",value:W.displayname,validations:{maxLength:20},validationErrors:{maxLength:"You can not type in more than 20 characters"},InputProps:{endAdornment:r.a.createElement(x.a,{position:"end"},r.a.createElement(i.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",required:!0}),r.a.createElement(N.a,{control:r.a.createElement(I.a,{checked:W.isactive,onChange:function(e){M("isactive",e.target.checked)},value:W.isactive,color:"primary"}),label:"isActive",className:"mb-16"}))),l&&r.a.createElement(v.i,{message:"Saving data..."}),c&&r.a.createElement(d.a,{className:"pt-32"},"Error : Please try again! ",r.a.createElement("br",null),c.message," ",r.a.createElement("br",null)))})))),"new"===t.type&&r.a.createElement(C.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){J()}},"Close"),r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){U.current.submit()},disabled:!O},"Add Academic Year")),"edit"===t.type&&r.a.createElement(C.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){J()}},"Close"),r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){U.current.submit()},disabled:!O},"Save")),"delete"===t.type&&r.a.createElement(C.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){J()}},"Close"),r.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){U.current.submit()}},"Delete")))};a.default=Object(l.a)("ayear",c.a)((function(){var e=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:r.a.createElement(m,{pageLayout:e}),content:r.a.createElement(_,null),ref:e,innerScroll:!0}),r.a.createElement(W,null))}))}}]);