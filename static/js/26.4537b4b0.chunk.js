(this["webpackJsonpsivanandha-vidyashram-seithur"]=this["webpackJsonpsivanandha-vidyashram-seithur"]||[]).push([[26],{1370:function(e,a,t){"use strict";t.r(a);var n=t(10),r=t(0),l=t.n(r),o=t(812),c=t(174),i=t(849),s=t(824),m=t(16),d=t(195),u=t(890),f=t(134),p=t.n(f),b=t(809),g=t(8),_=t(31),x=t(173),v=t(832),y=t(192),E=t(11),w=t(32),h=t.n(w),N=t(2),j=t(874),O=t(771),C=t(1369),D=t(70),M=t(147);var S=l.a.memo((function(e){var a=e.title,t=e.amount,n=e.color,r=e.label,o=e.studentsCount;return l.a.createElement(x.a,{className:"w-full rounded-8 shadow-none border-1"},l.a.createElement("div",{className:"flex items-center justify-between pr-4 pl-16 pt-4"},l.a.createElement(c.a,{className:"text-16 py-8"},a)),l.a.createElement("div",{className:"text-center pt-12 pb-28"},l.a.createElement(c.a,{className:Object(N.default)("text-40 leading-none",n)},m.u.formatNumber(t)),l.a.createElement(c.a,{className:"text-12 items-end",color:"textSecondary"},r||l.a.createElement("span",null,"\xa0"))),o&&l.a.createElement("div",{className:"flex items-center px-16 h-52 border-t-1"},l.a.createElement(c.a,{className:"text-15 leading-none truncate",color:"textSecondary"},"No. of Students:"),l.a.createElement(c.a,{className:"text-20 ml-8 "},o)))})),A={amount:0,no_of_student:0},F={daily_trans:A,overdue:A,partially_paid:A,fully_paid:A},Y=t(902),L=Object(b.a)((function(e){return{inline:{display:"inline"},popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}})),I={class_id:"ALL",from_date:new Date,to_date:new Date,rpt_type:"ALL"},P={total_amount_paid:0,total_amount_balance:0};var H=function(){L();var e=Object(r.useState)(),a=Object(n.a)(e,2),t=a[0],o=a[1],i=Object(r.useState)(P),s=Object(n.a)(i,2),d=s[0],u=s[1],f=Object(r.useState)(I),b=Object(n.a)(f,2),x=b[0],E=b[1],w=Object(y.b)(M.g.getTransactionReport,{onCompleted:function(e){var a=e.getTransactionReport;p.a.isEmpty(a)?(o([]),u([])):(o(a.rows),u(a.total))}}),N=Object(n.a)(w,2),S=N[0],A=N[1],F=A.loading,H=A.error,R=function(e,a){var t=Object(_.a)({},a,e);E((function(e){return Object.assign(Object(g.a)(Object(g.a)({},e),t))})),o([])};return l.a.createElement("div",{className:"w-full flex flex-col"},l.a.createElement(Y.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",className:"w-full m-16"},l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full"},l.a.createElement(D.c,{formName:x.class_id,fieldName:"class_id",onDDChange:function(e,a){var t=Object(_.a)({},a,e.value);E((function(e){return Object.assign(Object(g.a)(Object(g.a)({},e),t))})),o([])},label:"Search by Class & Section",showAll:!0,cssClass:"w-3/4 z-999"})),l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full"}),l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full flex flex-row"},l.a.createElement(O.a,{utils:j.a},l.a.createElement(C.a,{className:"ml-8",variant:"outlined",format:"dd-MMM-yyyy",margin:"normal",id:"from_date",label:"From Date",value:x.from_date,onChange:function(e){return R(e,"from_date")},animateYearScrolling:!0}),l.a.createElement(C.a,{className:"ml-8",variant:"outlined",format:"dd-MMM-yyyy",margin:"normal",id:"to_date",label:"To Date",value:x.to_date,onChange:function(e){return R(e,"to_date")},animateYearScrolling:!0}))),l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full flex"},l.a.createElement(v.a,{color:"primary",variant:"outlined",size:"small",className:"normal-case self-end","aria-label":"trans_widget",onClick:function(){S({variables:{class_id:x.class_id,from_date:x.from_date,to_date:x.to_date}})}},"Get Report"))),H?l.a.createElement(D.v,{message:"There was an error !"}):null,F&&l.a.createElement(D.s,null),l.a.createElement(D.o,{cssClass:"border-0",data:t,hasExport:!0,orientation:"l",exportMode:"HTML",showFooter:!0,columns:[{id:"paydate",Header:"Paid on",accessor:function(e){return e.paydate?h()(e.paydate).format("DD MMM YYYY, h:mm a"):""}},{id:"student_id",Header:"Name",accessor:"student_name"},{id:"class_id",Header:"Class",accessor:"class_name"},{id:"amount_paid",Header:"Amount Paid",headerClassName:"text-right",className:"text-right",accessor:function(e){return m.u.formatNumber(e.amount_paid)},Footer:function(e){return l.a.createElement(c.a,{variant:"body1",className:"text-right tracking-widest"},m.u.formatNumber(d.total_amount_paid))}},{id:"amount_balance",Header:"Balance",headerClassName:"text-right",className:"text-right",accessor:"amount_balance",Cell:function(e){var a=e.row.original.amount_balance;return l.a.createElement(c.a,{className:a>0?"text-red":"text-black"},m.u.formatNumber(a))},Footer:function(e){return l.a.createElement(c.a,{variant:"body1",className:"text-right text-red tracking-widest"},m.u.formatNumber(d.total_amount_balance))}},{id:"due_date",Header:"Due Date",headerClassName:"text-center",accessor:function(e){return h()(e.due_date).format("DD MMM YYYY")}}]}),l.a.createElement("div",{className:"mb-32"}))},R=t(939),T=Object(b.a)((function(e){return{root:{background:"linear-gradient(to right, #F7F7F7 0%, #e5e5e5 100%)"},tooltipBg:{background:"linear-gradient(to right, #F7F7F7 0%, #f5f6f7 100%)",margin:16}}}));var k=function(e){var a=e.chartData,t=e.chartColor,o=(T(),Object(r.useState)(1)),c=Object(n.a)(o,2),i=c[0],s=c[1],d=t,u=Math.PI/180;return l.a.createElement(R.l,{width:"90%",height:300},l.a.createElement(R.k,null,l.a.createElement(R.j,{data:a,labelLine:!1,label:function(e){var a=e.cx,t=e.cy,n=e.midAngle,r=e.innerRadius,o=e.outerRadius,c=e.percent,i=(e.index,r+.5*(o-r)),s=a+i*Math.cos(-n*u),m=t+i*Math.sin(-n*u);return l.a.createElement("text",{x:s,y:m,fill:"white",textAnchor:s>a?"start":"end",dominantBaseline:"central"},"".concat((100*c).toFixed(0),"%"))},fill:"#8884d8",dataKey:"value",nameKey:"name",startAngle:90,endAngle:450,outerRadius:"100",activeIndex:i,activeShape:function(e){var a=Math.PI/180,t=e.cx,n=e.cy,r=e.midAngle,o=e.innerRadius,c=e.outerRadius,i=e.startAngle,s=e.endAngle,d=e.fill,u=e.payload,f=e.percent,p=e.value,b=Math.sin(-a*r),g=Math.cos(-a*r),_=t+(c+10)*g,x=n+(c+10)*b,v=t+(c+30)*g,y=n+(c+30)*b,E=v+22*(g>=0?1:-1),w=y,h=g>=0?"start":"end";return l.a.createElement("g",null,l.a.createElement(R.m,{cx:t,cy:n,innerRadius:o,outerRadius:c,startAngle:i,endAngle:s,fill:d}),l.a.createElement(R.m,{cx:t,cy:n,startAngle:i,endAngle:s,innerRadius:c+6,outerRadius:c+10,fill:d}),l.a.createElement("path",{d:"M".concat(_,",").concat(x,"L").concat(v,",").concat(y,"L").concat(E,",").concat(w),stroke:d,fill:"none"}),l.a.createElement("circle",{cx:E,cy:w,r:2,fill:d,stroke:"none"}),l.a.createElement("text",{x:E+12*(g>=0?1:-1),y:w,textAnchor:h,fill:"#333"},"".concat(u.name,": ").concat(m.u.formatNumber(p))),l.a.createElement("text",{x:E+12*(g>=0?1:-1),y:w,dy:18,textAnchor:h,fill:"#999"},"(In Percetage ".concat((100*f).toFixed(2),"%)")))},onMouseEnter:function(e,a){s(a)}},a.map((function(e,a){return l.a.createElement(R.f,{key:"cell-".concat(a),fill:d[a%d.length]})}))),l.a.createElement(R.h,{verticalAlign:"top"})))},B=Object(b.a)((function(e){return{root:{background:"linear-gradient(to right, #F7F7F7 0%, #e5e5e5 100%)"},tooltipBg:{background:"linear-gradient(to right, #F7F7F7 0%, #f5f6f7 100%)",margin:16}}}));var W=function(e){var a=e.chartData,t=B(),n=function(e){var a=e.active,n=e.payload;e.label;return a&&n?l.a.createElement(x.a,{className:t.tooltipBg},n.map((function(e,a){return l.a.createElement("div",{key:e.name},0===a&&e.payload?l.a.createElement("p",{className:"label m-8 pb-8 pt-8 font-bold"},e.payload.class_name):"",l.a.createElement("p",{className:"label p-8 ",style:{color:e.fill}},"payable_amount"===e.dataKey?"Amount to pay: ".concat(m.u.formatNumber(e.value)):"","total_amount_paid"===e.dataKey?"Amount paid: ".concat(m.u.formatNumber(e.value)):"","overdue_amount"===e.dataKey?"Overdue: ".concat(m.u.formatNumber(e.value)):""))}))):null};return l.a.createElement(R.l,{width:"90%",height:300},l.a.createElement(R.d,{data:a,margin:{top:5,right:30,left:50,bottom:5}},l.a.createElement(R.e,{strokeDasharray:"3 3"}),l.a.createElement(R.o,{dataKey:"class_name",angle:-45,textAnchor:"end",height:50}),l.a.createElement(R.p,{tickFormatter:function(e){return m.u.formatNumber(e)}}),l.a.createElement(R.n,{content:l.a.createElement(n,null)}),l.a.createElement(R.h,{verticalAlign:"top",height:50}),l.a.createElement(R.c,{dataKey:"payable_amount",fill:"#3096F3",name:"Amount to pay"}),l.a.createElement(R.c,{dataKey:"total_amount_paid",fill:"#4CAF51",name:"Amount paid"}),l.a.createElement(R.c,{dataKey:"overdue_amount",fill:"#F04237",name:"Overdue"})))},z=Object(b.a)((function(e){return{inline:{display:"inline"},popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)},button:{margin:e.spacing(.5,0),height:32}}})),G={from_date:new Date,to_date:new Date},K={total_amt_to_pay:"",total_amt_paid:"",total_amt_overdue:""};var U=function(){Object(E.b)();var e=z(),a=Object(r.useState)(F),t=Object(n.a)(a,2),o=t[0],i=t[1],s=Object(r.useState)([]),d=Object(n.a)(s,2),u=d[0],f=d[1],b=Object(r.useState)(K),w=Object(n.a)(b,2),A=w[0],Y=w[1],L=Object(r.useState)(G),I=Object(n.a)(L,2),P=I[0],R=I[1],T=[{name:"Amount paid",value:A.total_amt_paid},{name:"Overdue",value:A.total_amt_overdue}],B=Object(y.b)(M.g.getTransWidgetRpt,{onCompleted:function(e){p.a.isEmpty(e.getTransWidgetRpt)?i([]):i(e.getTransWidgetRpt)}}),U=Object(n.a)(B,2),J=U[0],X=U[1],$=(X.loading,X.error,Object(y.b)(M.g.getFeeSummaryReport,{onCompleted:function(e){if(p.a.isEmpty(e.getFeeSummaryReport))f([]);else{f(e.getFeeSummaryReport);var a={total_amt_to_pay:p.a.sumBy(e.getFeeSummaryReport,"payable_amount"),total_amt_paid:p.a.sumBy(e.getFeeSummaryReport,"total_amount_paid"),total_amt_overdue:p.a.sumBy(e.getFeeSummaryReport,"overdue_amount")};Y(a)}}})),q=Object(n.a)($,2),Q=q[0],V=q[1];V.loading,V.error,Object(r.useEffect)((function(){Z(),Q()}),[]);var Z=function(){J({variables:{from_date:P.from_date,to_date:P.to_date}})},ee=function(e,a){var t=Object(_.a)({},a,e);R((function(e){return Object.assign(Object(g.a)(Object(g.a)({},e),t))}))};return l.a.createElement("div",{className:"w-full flex flex-col"},l.a.createElement(x.a,{className:"w-full shadow-none mt-32 mr-32"},l.a.createElement(c.a,{variant:"h6",className:"mt-16",style:{color:"#757575",marginLeft:16}},"Fee Summary Report"),l.a.createElement(c.a,{variant:"caption",gutterBottom:!0,style:{color:"#757575",marginLeft:16}},"As of today ".concat(h()().format("DD MMM YYYY"))),l.a.createElement("div",{className:"flex flex-col w-full justify-center"},l.a.createElement(k,{chartData:T,chartColor:["#4CAF51","#F04237"]})),l.a.createElement("div",{className:"flex flex-wrap md:flex-row sm:flex-col xs:flex-col"},l.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/2 p-12"},l.a.createElement(S,{title:"Amount to pay",amount:A.total_amt_to_pay,color:"text-blue"})),l.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/2 p-12"},l.a.createElement(S,{title:"Amount paid",amount:A.total_amt_paid,color:"text-green"})),l.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/2 p-12"},l.a.createElement(S,{title:"Overdue amount",amount:A.total_amt_overdue,color:"text-red"}))),l.a.createElement("div",{className:"flex flex-col w-full"},l.a.createElement(c.a,{variant:"h6",className:"mt-16",style:{color:"#757575",marginLeft:16}},"Class Summary"),l.a.createElement("div",{className:"widget flex flex-col w-full h-600 items-center"},l.a.createElement(W,{chartData:u})),l.a.createElement(D.o,{cssClass:"border-0 mb-16",data:u,hasExport:!0,orientation:"l",exportMode:"HTML",showFooter:!0,columns:[{id:"class_name",Header:"Class - Section",accessor:"class_name",style:{whiteSpace:"unset"},headerClassName:"text-center",className:"ml-8 text-left border-r-1"},{id:"no_of_st",Header:"No. of students",className:"text-center border-r-1",accessor:"no_of_st"},{id:"per_st_amount",Header:"Amount per student",className:"text-right border-r-1",accessor:function(e){return e.per_st_amount?m.u.formatNumber(e.per_st_amount):""},Footer:function(){return l.a.createElement(c.a,{variant:"body1",className:"text-right tracking-widest"},"Total")}},{id:"payable_amount",Header:"Amount to pay",className:"text-right border-r-1",accessor:function(e){return e.payable_amount?m.u.formatNumber(e.payable_amount):""},Footer:function(e){return l.a.createElement(c.a,{variant:"body1",className:"text-right text-blue tracking-widest"},m.u.formatNumber(A.total_amt_to_pay))}},{id:"total_amount_paid",Header:"Amount paid",headerClassName:"text-center",className:"text-right border-r-1",accessor:function(e){return e.total_amount_paid?m.u.formatNumber(e.total_amount_paid):""},Footer:function(){return l.a.createElement(c.a,{variant:"body1",className:"text-right text-green tracking-widest"},m.u.formatNumber(A.total_amt_paid))}},{id:"overdue_amount",Header:"Overdue amount",className:"text-right border-r-1",accessor:function(e){return e.overdue_amount?m.u.formatNumber(e.overdue_amount):""},Footer:function(){return l.a.createElement(c.a,{variant:"body1",className:"text-right text-red tracking-widest"},m.u.formatNumber(A.total_amt_overdue))}}]}))),l.a.createElement(x.a,{className:"w-full rounded-8 shadow-none mt-32"},l.a.createElement(c.a,{variant:"h6",className:"mt-16",style:{color:"#757575",marginLeft:16}},"Daily Transaction Report"),l.a.createElement("div",{className:"w-full flex flex-row ml-16"},l.a.createElement(O.a,{utils:j.a},l.a.createElement(C.a,{className:"ml-8",variant:"outlined",format:"dd-MMM-yyyy",margin:"normal",id:"from_date",label:"From Date",value:P.from_date,onChange:function(e){return ee(e,"from_date")},animateYearScrolling:!0}),l.a.createElement(C.a,{className:"ml-8",variant:"outlined",format:"dd-MMM-yyyy",margin:"normal",id:"to_date",label:"To Date",value:P.to_date,onChange:function(e){return ee(e,"to_date")},animateYearScrolling:!0})),l.a.createElement(v.a,{color:"primary",variant:"outlined",size:"small",className:Object(N.default)(e.button,"normal-case self-end ml-16 mb-8"),"aria-label":"trans_widget",onClick:function(){return Z()}},"Go")),l.a.createElement("div",{className:"flex flex-wrap md:flex-row sm:flex-col xs:flex-col"},l.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/4 p-12"},l.a.createElement(S,{title:"Transactions",amount:o.daily_trans.amount,color:"text-blue",label:"".concat(h()(P.from_date).format("DD MMM YYYY")," to ").concat(h()(P.to_date).format("DD MMM YYYY")),studentsCount:o.daily_trans.no_of_student})),l.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/4 p-12"},l.a.createElement(S,{title:"Partially Paid",amount:o.partially_paid.amount,color:"text-orange",studentsCount:o.partially_paid.no_of_student})),l.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/4 p-12"},l.a.createElement(S,{title:"Paid",amount:o.fully_paid.amount,color:"text-green",studentsCount:o.fully_paid.no_of_student}))),l.a.createElement(H,null)))},J=t(760),X=t(763),$=t(768),q=t(36),Q=Object(b.a)((function(e){return{inline:{display:"inline"},popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}})),V={class_id:"",from_date:new Date,to_date:new Date,rpt_type:"ALL",particulars_id:""};var Z=function(){Q();var e=Object(r.useState)(),a=Object(n.a)(e,2),t=a[0],o=a[1],i=Object(r.useState)(V),s=Object(n.a)(i,2),m=s[0],d=s[1],u=Object(y.b)(M.g.getClasswiseFeeRpt,{onCompleted:function(e){p.a.isEmpty(e.getClasswiseFeeRpt)?o([]):o(e.getClasswiseFeeRpt)}}),f=Object(n.a)(u,2),b=f[0],x=f[1],E=x.loading,w=x.error,S=function(e,a){var t=Object(_.a)({},a,e.value);d((function(e){return Object.assign(Object(g.a)(Object(g.a)({},e),t))})),o([])},A=function(e,a){var t=Object(_.a)({},a,e);d((function(e){return Object.assign(Object(g.a)(Object(g.a)({},e),t))})),o([])};return l.a.createElement("div",{className:"w-full flex flex-col"},l.a.createElement(Y.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",className:"w-full m-16"},l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full"},l.a.createElement(D.c,{formName:m.class_id,fieldName:"class_id",onDDChange:S,label:"Search by Class & Section",showAll:!0,cssClass:"w-3/4 z-999"})),l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full"},l.a.createElement(D.k,{formName:m.particulars_id,fieldName:"particulars_id",onDDChange:S,showAll:!0,cssClass:"w-3/4 z-999"})),l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full"},l.a.createElement(O.a,{utils:j.a},l.a.createElement(C.a,{className:"ml-8",variant:"outlined",format:"dd-MMM-yyyy",margin:"normal",id:"from_date",label:"From Date",value:m.from_date,onChange:function(e){return A(e,"from_date")},animateYearScrolling:!0}),l.a.createElement(C.a,{className:"ml-8",variant:"outlined",format:"dd-MMM-yyyy",margin:"normal",id:"to_date",label:"To Date",value:m.to_date,onChange:function(e){return A(e,"to_date")},animateYearScrolling:!0}))),l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full flex flex-row"},l.a.createElement(J.a,null,l.a.createElement(X.a,{htmlFor:"rpt_Type"},"Reports filter by"),l.a.createElement($.a,{native:!0,value:m.rpt_type,onChange:function(e){var a=e.target.name,t=Object(_.a)({},a,e.target.value);d((function(e){return Object.assign(Object(g.a)(Object(g.a)({},e),t))})),o([])},label:"Reports",inputProps:{name:"rpt_type",id:"rpt_Type"}},l.a.createElement("option",{"aria-label":"all",value:"ALL"},"ALL"),l.a.createElement("option",{value:"NOT_PAID"},"Not Paid"),l.a.createElement("option",{value:"PARTIALLY_PAID"},"Partially Paid"),l.a.createElement("option",{value:"FULLY_PAID"},"Fully Paid"))),l.a.createElement(v.a,{color:"primary",variant:"outlined",size:"small",className:"normal-case self-end ml-16","aria-label":"trans_widget",onClick:function(){b({variables:{class_id:m.class_id,from_date:m.from_date,to_date:m.to_date,rpt_type:m.rpt_type,particulars_id:m.particulars_id}})}},"Go"))),w?l.a.createElement(D.v,{message:"There was an error !"}):null,E&&l.a.createElement(D.s,null),l.a.createElement("div",{className:"flex w-full"}),l.a.createElement(D.o,{cssClass:"border-0",data:t,hasExport:!0,orientation:"l",exportMode:"HTML",columns:[{id:"class_name",Header:"Class - Section",accessor:"class_name",style:{whiteSpace:"unset"},className:"ml-8"},{id:"student_name",Header:"Name",accessor:"student_name",Cell:function(e){return l.a.createElement(q.a,{className:"whitespace-no-wrap",to:{pathname:"/fee/studentfeereports",state:{classId:e.row.original.class_id,studentId:e.row.original.student_id}}},l.a.createElement(c.a,{variant:"body1",color:"primary"},e.row.original.student_name))}},{id:"paid_status",Header:"Status",accessor:"paid_status",Cell:function(e){var a=e.row.original.paid_status,t="",n="bg-white text-black";return"NOT_PAID"===a?(n="bg-red text-white",t="Unpaid"):"PARTIALLY_PAID"===a?(n="bg-orange text-white",t="Partial"):"FULLY_PAID"===a&&(n="bg-green text-white",t="Paid"),l.a.createElement(c.a,{className:Object(N.default)("inline text-11 font-500 px-8 py-4 rounded-4",n)},t)}},{id:"particulars_name",Header:"Particulars",accessor:"particulars_name"},{id:"fee_period",Header:"Period",accessor:function(e){return e.fee_period+" ("+e.term_name+")"}},{id:"payable_amount",Header:"Amount to pay",accessor:"payable_amount"},{id:"amount_paid",Header:"Amount Paid",accessor:"amount_paid"},{id:"amount_discount",Header:"Discount",accessor:"amount_discount"},{id:"amount_balance",Header:"Balance",accessor:"amount_balance"},{id:"paydate",Header:"Paid on",accessor:function(e){return e.paydate?h()(e.paydate).format("Do MMM YYYY"):""}},{id:"due_date",Header:"Due Date",accessor:function(e){return h()(e.due_date).format("Do MMM YYYY")}}]}),l.a.createElement("div",{className:"flex pb-32"}))},ee=Object(b.a)((function(e){return{inline:{display:"inline"},popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}})),ae={class_id:"",student_id:"",from_date:new Date,to_date:new Date,rpt_type:"ALL"},te={total_amount_paid:0,total_amount_discount:0,total_amount_balance:0};var ne=function(){ee();var e=Object(r.useState)(),a=Object(n.a)(e,2),t=a[0],o=a[1],i=Object(r.useState)(te),s=Object(n.a)(i,2),d=s[0],u=s[1],f=Object(r.useState)(ae),b=Object(n.a)(f,2),x=b[0],E=b[1],w=Object(y.b)(M.g.getStudentInvoice,{onCompleted:function(e){var a=e.getStudentInvoice;p.a.isEmpty(a)?(o([]),u([])):(o(a.rows),u(a.total))}}),S=Object(n.a)(w,2),A=S[0],F=S[1],L=F.loading,I=F.error,P=function(e,a){var t=Object(_.a)({},a,e.value);E((function(e){return Object.assign(Object(g.a)(Object(g.a)({},e),t))})),o([])},H=function(e,a){var t=Object(_.a)({},a,e);E((function(e){return Object.assign(Object(g.a)(Object(g.a)({},e),t))})),o([])};return l.a.createElement("div",{className:"w-full flex flex-col"},l.a.createElement(Y.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center",className:"w-full m-16"},l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full"},l.a.createElement(D.c,{formName:x.class_id,fieldName:"class_id",onDDChange:P,label:"Search by Class & Section",showAll:!0,cssClass:"w-3/4 z-999"})),l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full"},l.a.createElement(D.x,{classId:x.class_id,formName:x.student_id,optionName:"student_id",label:"Select Student",cssClass:"w-3/4 z-999",onDDChange:P})),l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full flex flex-row"},l.a.createElement(O.a,{utils:j.a},l.a.createElement(C.a,{className:"ml-8",variant:"outlined",format:"dd-MMM-yyyy",margin:"normal",id:"from_date",label:"From Date",value:x.from_date,onChange:function(e){return H(e,"from_date")},animateYearScrolling:!0}),l.a.createElement(C.a,{className:"ml-8",variant:"outlined",format:"dd-MMM-yyyy",margin:"normal",id:"to_date",label:"To Date",value:x.to_date,onChange:function(e){return H(e,"to_date")},animateYearScrolling:!0}))),l.a.createElement(Y.a,{item:!0,xs:6,className:"w-full flex"},l.a.createElement(v.a,{color:"primary",variant:"outlined",size:"small",className:"normal-case self-end","aria-label":"trans_widget",onClick:function(){A({variables:{class_id:x.class_id,student_id:x.student_id,from_date:x.from_date,to_date:x.to_date}})}},"Get Invoice"))),I?l.a.createElement(D.v,{message:"There was an error !"}):null,L&&l.a.createElement(D.s,null),l.a.createElement(D.o,{cssClass:"border-0",data:t,hasExport:!0,orientation:"l",exportMode:"HTML",showFooter:!0,columns:[{id:"paydate",Header:"Paid on",accessor:function(e){return e.paydate?h()(e.paydate).format("DD MMM YYYY, h:mm a"):""}},{id:"paid_status",Header:"Status",accessor:"paid_status",Cell:function(e){var a=e.row.original.paid_status,t="",n="bg-white text-black";return"NOT_PAID"===a?(n="bg-red text-white",t="Unpaid"):"PARTIALLY_PAID"===a?(n="bg-orange text-white",t="Partial"):"FULLY_PAID"===a&&(n="bg-green text-white",t="Paid"),l.a.createElement(c.a,{className:Object(N.default)("inline text-11 font-500 px-8 py-4 rounded-4",n)},t)}},{id:"particulars_name",Header:"Particulars",accessor:"particulars_name"},{id:"fee_period",Header:"Period",accessor:function(e){return e.fee_period+" ("+e.term_name+")"},Footer:function(){return l.a.createElement(c.a,{variant:"body1",className:"text-right tracking-widest"},"Total")}},{id:"amount_paid",Header:"Amount Paid",className:"text-right",accessor:function(e){return m.u.formatNumber(e.amount_paid)},Footer:function(e){return l.a.createElement(c.a,{variant:"body1",className:"text-right tracking-widest"},m.u.formatNumber(d.total_amount_paid))}},{id:"amount_discount",Header:"Discount",className:"text-right",accessor:"amount_discount",Footer:function(e){return l.a.createElement(c.a,{variant:"body1",className:"text-right tracking-widest"},m.u.formatNumber(d.total_amount_discount))}},{id:"amount_balance",Header:"Balance",className:"text-right",accessor:"amount_balance",Cell:function(e){var a=e.row.original.amount_balance;return l.a.createElement(c.a,{className:a>0?"text-red":"text-black"},m.u.formatNumber(a))},Footer:function(e){return l.a.createElement(c.a,{variant:"body1",className:"text-right text-red tracking-widest"},m.u.formatNumber(d.total_amount_balance))}},{id:"due_date",Header:"Due Date",accessor:function(e){return h()(e.due_date).format("DD MMM YYYY")}}]}),l.a.createElement("div",{className:"mb-32"}))},re=Object(b.a)((function(e){return{content:{"& canvas":{maxHeight:"100%"}}}}));a.default=Object(d.a)("feeRptReducer",u.a)((function(e){re(e);var a=Object(r.useRef)(null),t=Object(r.useState)(0),d=Object(n.a)(t,2),u=d[0],f=d[1];return l.a.createElement(m.l,{classes:{toolbar:"min-h-48 h-48",header:"min-h-72 h-72 sm:h-72 sm:min-h-72",content:"flex"},header:l.a.createElement("div",{className:"flex flex-row items-center flex-1 px-24"},l.a.createElement(m.a,{animation:"transition.expandIn",delay:300},l.a.createElement(o.a,{className:"text-32 mr-12"},"book")),l.a.createElement(m.a,{animation:"transition.expandIn",delay:300},l.a.createElement(c.a,{className:"hidden sm:flex",variant:"h6"},"Reports"))),contentToolbar:l.a.createElement(i.a,{value:u,onChange:function(e,a){f(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"off",className:"w-full border-b-1 px-24"},l.a.createElement(s.a,{className:"text-14 font-600 normal-case",label:"Home"}),l.a.createElement(s.a,{className:"text-14 font-600 normal-case",label:"Reports"}),l.a.createElement(s.a,{className:"text-14 font-600 normal-case",label:"Invoice"})),content:l.a.createElement(r.Fragment,null,0===u&&l.a.createElement(m.b,{className:"flex flex-wrap w-full",enter:{animation:"transition.slideUpBigIn"}},l.a.createElement(U,null)),1===u&&l.a.createElement(Z,null),2===u&&l.a.createElement(m.b,{className:"flex flex-wrap w-full",enter:{animation:"transition.slideUpBigIn"}},l.a.createElement(ne,null))),ref:a,innerScroll:!0})}))},890:function(e,a,t){"use strict";var n=t(8),r=t(147),l={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}};a.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case r.b.SET_SEARCH_TEXT:return Object(n.a)(Object(n.a)({},e),{},{searchText:a.searchText});case r.b.OPEN_NEW_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case r.b.CLOSE_NEW_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:"new",props:{open:!1},data:null}});case r.b.OPEN_EDIT_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case r.b.CLOSE_EDIT_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:a.mode,props:{open:!1},data:null}});case r.b.CLOSE_ONLY_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:"close",props:{open:!1},data:null}});default:return e}}},902:function(e,a,t){"use strict";var n=t(5),r=t(1),l=t(0),o=(t(3),t(2)),c=t(9),i=[0,1,2,3,4,5,6,7,8,9,10],s=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function m(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=parseFloat(e);return"".concat(t/a).concat(String(e).replace(String(t),"")||"px")}var d=l.forwardRef((function(e,a){var t=e.alignContent,c=void 0===t?"stretch":t,i=e.alignItems,s=void 0===i?"stretch":i,m=e.classes,d=e.className,u=e.component,f=void 0===u?"div":u,p=e.container,b=void 0!==p&&p,g=e.direction,_=void 0===g?"row":g,x=e.item,v=void 0!==x&&x,y=e.justify,E=void 0===y?"flex-start":y,w=e.lg,h=void 0!==w&&w,N=e.md,j=void 0!==N&&N,O=e.sm,C=void 0!==O&&O,D=e.spacing,M=void 0===D?0:D,S=e.wrap,A=void 0===S?"wrap":S,F=e.xl,Y=void 0!==F&&F,L=e.xs,I=void 0!==L&&L,P=e.zeroMinWidth,H=void 0!==P&&P,R=Object(n.a)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),T=Object(o.default)(m.root,d,b&&[m.container,0!==M&&m["spacing-xs-".concat(String(M))]],v&&m.item,H&&m.zeroMinWidth,"row"!==_&&m["direction-xs-".concat(String(_))],"wrap"!==A&&m["wrap-xs-".concat(String(A))],"stretch"!==s&&m["align-items-xs-".concat(String(s))],"stretch"!==c&&m["align-content-xs-".concat(String(c))],"flex-start"!==E&&m["justify-xs-".concat(String(E))],!1!==I&&m["grid-xs-".concat(String(I))],!1!==C&&m["grid-sm-".concat(String(C))],!1!==j&&m["grid-md-".concat(String(j))],!1!==h&&m["grid-lg-".concat(String(h))],!1!==Y&&m["grid-xl-".concat(String(Y))]);return l.createElement(f,Object(r.a)({className:T,ref:a},R))})),u=Object(c.a)((function(e){return Object(r.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,a){var t={};return i.forEach((function(n){var r=e.spacing(n);0!==r&&(t["spacing-".concat(a,"-").concat(n)]={margin:"-".concat(m(r,2)),width:"calc(100% + ".concat(m(r),")"),"& > $item":{padding:m(r,2)}})})),t}(e,"xs"),e.breakpoints.keys.reduce((function(a,t){return function(e,a,t){var n={};s.forEach((function(e){var a="grid-".concat(t,"-").concat(e);if(!0!==e)if("auto"!==e){var r="".concat(Math.round(e/12*1e8)/1e6,"%");n[a]={flexBasis:r,flexGrow:0,maxWidth:r}}else n[a]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else n[a]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===t?Object(r.a)(e,n):e[a.breakpoints.up(t)]=n}(a,e,t),a}),{}))}),{name:"MuiGrid"})(d);a.a=u}}]);