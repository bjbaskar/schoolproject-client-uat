(this["webpackJsonpsivanandha-vidyashram-seithur"]=this["webpackJsonpsivanandha-vidyashram-seithur"]||[]).push([[40],{1384:function(e,t,a){"use strict";a.r(t);var n=a(10),l=a(0),r=a.n(l),c=a(174),o=a(849),s=a(824),m=a(809),i=a(16),u=a(11),E=a(173),f=a(820),p=a(821),d=a(768),b=a(837),g=a(838),h=a(839),v=a(840),w=a(841),y=a(40),N=a(804),x=a(192),j=a(18),O=a(939),S=a(32),C=a.n(S),L=a(13),k=a(12),A=a.n(k);function D(){var e=Object(L.a)(["\n\tquery getStudentCount($classId: String) {\n\t\tgetStudentCount(classId: $classId) {\n\t\t\tclassId\n\t\t\tname\n\t\t\tboys\n\t\t\tgirls\n\t\t\ttotal\n\t\t}\n\t}\n"]);return D=function(){return e},e}function P(){var e=Object(L.a)(["\n\tquery($filter: String) {\n\t\tgetLoginCount(filter: $filter) {\n\t\t\tusername\n\t\t\tos\n\t\t\tbrowser\n\t\t\tcpu\n\t\t\tdevice\n\t\t\tengine\n\t\t\tlastlogin\n\t\t\tcount\n\t\t}\n\t\tgetLoginCountChart(filter: $filter) {\n\t\t\tlastlogin\n\t\t\tcount\n\t\t}\n\t}\n"]);return P=function(){return e},e}function T(){var e=Object(L.a)(["\n\tquery($filter: String) {\n\t\tgetLoginCountChart(filter: $filter) {\n\t\t\tlastlogin\n\t\t\tcount\n\t\t}\n\t}\n"]);return T=function(){return e},e}function I(){var e=Object(L.a)(["\n\tquery($filter: String) {\n\t\tgetLoginCount(filter: $filter) {\n\t\t\tusername\n\t\t\tos\n\t\t\tbrowser\n\t\t\tcpu\n\t\t\tdevice\n\t\t\tengine\n\t\t\tlastlogin\n\t\t\tcount\n\t\t}\n\t}\n"]);return I=function(){return e},e}A()(I()),A()(T());var R=A()(P()),Y=A()(D()),F=(a(26),a(70)),U=Object(m.a)((function(e){return{root:{background:"linear-gradient(to right, #F7F7F7 0%, #e5e5e5 100%)"},tooltipBg:{background:"linear-gradient(to right, #F7F7F7 0%, #f5f6f7 100%)",margin:16}}}));var B=r.a.memo((function(e){var t=Object(u.c)((function(e){return e.fuse.settings.mainThemeLight})),a=U(e),o=(Object(y.a)(),Object(l.useState)("LAST7DAYS")),s=Object(n.a)(o,2),m=s[0],S=s[1],L=Object(l.useState)("Last 7 days"),k=Object(n.a)(L,2),A=k[0],D=k[1],P=Object(l.useState)(!0),T=Object(n.a)(P,2),I=T[0],Y=T[1],B=Object(x.b)(R,{variables:{filter:m}}),M=Object(n.a)(B,2),$=M[0],K=M[1],q=K.loading,H=K.error,z=K.data,G=(z=void 0===z?{}:z).getLoginCount,J=void 0===G?[]:G,W=z.getLoginCountChart,Q=void 0===W?[]:W;Object(l.useEffect)((function(){$()}),[]);var V=function(e){return"LAST7DAYS"===m?C()(e).format("DD-MMM"):C()(e).format("hh a")},X=function(e){var t,n=e.active,l=e.payload,c=e.label;return n&&l?(t="LAST7DAYS"===m?C()(c).format("DD-MMM"):C()(c).format("hh a"),r.a.createElement(E.a,{className:a.tooltipBg},r.a.createElement("p",{className:"label m-8 pb-8 pt-8"},"Total Users : ".concat(l[0].value)),r.a.createElement("p",{className:"intro m-8 pb-8"},"Logged on  : ".concat(t)))):null};if(H)return null;if(q&&!J&&!Q)return r.a.createElement(F.s,null);var Z=j.a.orderBy(Q,["lastlogin"],["asc"]);return r.a.createElement(N.a,{theme:t},r.a.createElement(E.a,{className:"w-full rounded-8 shadow-none border-1"},r.a.createElement("div",{className:"flex items-center justify-between px-16 h-64 border-b-1"},r.a.createElement(i.a,{delay:100},r.a.createElement("div",{className:"flex-col"},r.a.createElement(c.a,{className:"h2",color:"textPrimary"},"User Login History"),r.a.createElement(c.a,{className:"h5",color:"textSecondary"},"Unique Users by ",A))),r.a.createElement("div",null,r.a.createElement(f.a,{className:"mt-8 mb-8 mr-32",label:"Alternate Chart",control:r.a.createElement(p.a,{checked:I,id:"barChart",name:"barChart",onChange:function(e){Y(e.target.checked)}})}),r.a.createElement(d.a,{native:!0,value:m,onChange:function(e){S(e.target.value),D(e.target.options[e.target.selectedIndex].label)},inputProps:{name:"currentRange"},disableUnderline:!0},r.a.createElement("option",{value:"TODAY"},"Today"),r.a.createElement("option",{value:"YESTERDAY"},"Yesterday"),r.a.createElement("option",{value:"LAST7DAYS"},"Last 7 days")))),r.a.createElement("div",{className:"container relative h-200 sm:h-256 w-11/12"},r.a.createElement(O.l,null,I?r.a.createElement(O.b,{className:"mt-32",data:Z,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),r.a.createElement(O.o,{dataKey:"lastlogin",tickFormatter:V}),r.a.createElement(O.p,null),r.a.createElement(O.e,{strokeDasharray:"3 3"}),r.a.createElement(O.n,{content:r.a.createElement(X,null)}),r.a.createElement(O.a,{type:"monotone",dataKey:"count",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorPv)"})):r.a.createElement(O.g,{className:"mt-32",data:Z,margin:{top:10,right:30,left:0,bottom:0}},r.a.createElement(O.e,{stroke:"#f5f5f5"}),r.a.createElement(O.o,{dataKey:"lastlogin",tickFormatter:V}),r.a.createElement(O.p,null),r.a.createElement(O.n,{content:r.a.createElement(X,null)}),r.a.createElement(O.c,{dataKey:"count",barSize:20,fill:"#413ea0"}),r.a.createElement(O.i,{type:"monotone",dataKey:"count",stroke:"#ff7300"})))),r.a.createElement("div",{className:"flex items-center justify-between px-16 h-64 border-t-1 border-b-1 mt-32\t"},r.a.createElement(c.a,{className:"h2",color:"textPrimary"},"Login History Details")),r.a.createElement("div",{className:"table-responsive"},r.a.createElement(b.a,{className:"w-full min-w-full",size:"small","aria-label":"login details"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,r.a.createElement(v.a,{className:"whitespace-no-wrap"},"User Name"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"Last Login"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"No. Of Logins"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"Platform"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"Browser"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"Device"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"Engine"))),r.a.createElement(w.a,null,J.map((function(e,t){return r.a.createElement(h.a,{key:t},r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.username)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.lastlogin)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.count)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.os)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.browser)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.device+" - "+e.cpu)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.engine)))})))))))}));Object(m.a)((function(e){return{root:{background:"linear-gradient(to right, #F7F7F7 0%, #e5e5e5 100%)"}}}));var M=r.a.memo((function(e){Object(u.c)((function(e){return e.fuse.settings.mainThemeLight}));var t=Object(l.useState)("LAST7DAYS"),a=Object(n.a)(t,2),o=a[0],s=a[1],m=Object(l.useState)("All Class and Sections"),f=Object(n.a)(m,2),p=f[0],y=f[1],N=Object(x.b)(Y),j=Object(n.a)(N,2),S=j[0],C=j[1],L=C.loading,k=C.error,A=C.data,D=(A=void 0===A?{}:A).getStudentCount,P=void 0===D?[]:D;if(Object(l.useEffect)((function(){S({variables:{classId:null}})}),[]),k)return null;if(L&&!P.length)return r.a.createElement(F.s,null);var T=P;return r.a.createElement(E.a,{className:"w-full rounded-8 shadow-none border-1"},r.a.createElement("div",{className:"flex items-center justify-between px-16 h-64 border-b-1"},r.a.createElement(i.a,{delay:100},r.a.createElement("div",{className:"flex-col"},r.a.createElement(c.a,{className:"h2",color:"textPrimary"},"Classwise Summary"),r.a.createElement(c.a,{className:"h5",color:"textSecondary"},"Showing ",p))),r.a.createElement("div",null,r.a.createElement(d.a,{native:!0,value:o,onChange:function(e){s(e.target.value),y(e.target.options[e.target.selectedIndex].label)},inputProps:{name:"currentRange"},disableUnderline:!0},r.a.createElement("option",{value:"PREPRIMARY"},"Pre-Primary"),r.a.createElement("option",{value:"PRIMARY"},"Primary"),r.a.createElement("option",{value:"SECONDARY"},"Secondary")))),r.a.createElement("div",{className:"container relative h-200 sm:h-256 w-full"},r.a.createElement(O.l,null,r.a.createElement(O.d,{className:"mt-32",data:T,margin:{top:20,right:30,left:20,bottom:5}},r.a.createElement(O.e,{strokeDasharray:"3 3"}),r.a.createElement(O.o,{dataKey:"name"}),r.a.createElement(O.p,null),r.a.createElement(O.n,null),r.a.createElement(O.h,null),r.a.createElement(O.c,{dataKey:"boys",stackId:"a",fill:"#8884d8"}),r.a.createElement(O.c,{dataKey:"girls",stackId:"a",fill:"#82ca9d"})))),r.a.createElement("div",{className:"flex items-center justify-between px-16 h-64 border-t-1 border-b-1 mt-32\t"},r.a.createElement(c.a,{className:"h2",color:"textPrimary"},"Classwise Summary Details")),r.a.createElement("div",{className:"table-responsive h-200 w-full"},r.a.createElement(b.a,{className:"w-full min-w-full",size:"small","aria-label":"stud total"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,r.a.createElement(v.a,{className:"whitespace-no-wrap"},"#"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"Class / Section"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"Boys"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"Girls"),r.a.createElement(v.a,{className:"whitespace-no-wrap"},"Total"))),r.a.createElement(w.a,null,T.map((function(e,t){return r.a.createElement(h.a,{key:t},r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,t+1)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.name)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.boys)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.girls)),r.a.createElement(v.a,{component:"th",scope:"row"},r.a.createElement(c.a,null,e.boys+e.girls)))}))))))})),$=Object(m.a)((function(e){return{content:{"& canvas":{maxHeight:"100%"}},selectedProject:{background:e.palette.primary.main,color:e.palette.primary.contrastText,borderRadius:"8px 0 0 0"},projectMenuButton:{background:e.palette.primary.main,color:e.palette.primary.contrastText,borderRadius:"0 8px 0 0",marginLeft:1},iconColor:{color:"#848584"}}}));t.default=function(e){var t=Object(u.c)((function(e){return e.auth.user})),a=Object(l.useState)(""),m=Object(n.a)(a,2),E=m[0],f=m[1],p=Object(l.useState)(0),d=Object(n.a)(p,2),b=d[0],g=d[1],h=$(e),v=Object(l.useRef)(null);return Object(l.useEffect)((function(){var e="";t&&"staff"===t.usertype?e=t.staff.firstname:t&&"student"===t.usertype&&(e=t.students.firstname),f(e)}),[]),r.a.createElement(i.m,{classes:{header:"min-h-160 h-160",toolbar:"min-h-48 h-48",rightSidebar:"w-288",content:h.content},header:r.a.createElement("div",{className:"flex flex-col justify-between flex-1 px-24 pt-24"},r.a.createElement("div",{className:"flex justify-between items-start"},r.a.createElement("div",{className:"flex-col"},r.a.createElement(c.a,{className:"py-0 sm:py-24",variant:"h4"},"Welcome back, ",E,"!")))),contentToolbar:r.a.createElement(o.a,{value:b,onChange:function(e,t){g(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"off",className:"w-full border-b-1 px-24"},r.a.createElement(s.a,{className:"text-14 font-600 normal-case",label:"Home"}),r.a.createElement(s.a,{className:"text-14 font-600 normal-case",label:"Summary"}),r.a.createElement(s.a,{className:"text-14 font-600 normal-case",label:"Staff Members"})),content:r.a.createElement("div",{className:"p-12"},0===b&&r.a.createElement(i.b,{className:"flex flex-wrap",enter:{animation:"transition.slideUpBigIn"}},r.a.createElement("div",{className:"widget flex w-full p-12"},r.a.createElement(M,null)),r.a.createElement("div",{className:"widget flex w-full p-12"},r.a.createElement(B,e))),1===b&&r.a.createElement(i.b,{className:"flex flex-wrap",enter:{animation:"transition.slideUpBigIn"}}),2===b&&r.a.createElement(i.b,{className:"flex flex-wrap",enter:{animation:"transition.slideUpBigIn"}},r.a.createElement("div",{className:"widget flex w-full p-12"}))),ref:v})}}}]);