(this["webpackJsonpsivanandha-vidyashram-seithur"]=this["webpackJsonpsivanandha-vidyashram-seithur"]||[]).push([[42],{1371:function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"SET_SEARCH_TEXT",(function(){return s})),a.d(n,"OPEN_NEW_DIALOG",(function(){return m})),a.d(n,"CLOSE_NEW_DIALOG",(function(){return u})),a.d(n,"OPEN_EDIT_DIALOG",(function(){return f})),a.d(n,"CLOSE_EDIT_DIALOG",(function(){return y})),a.d(n,"CLOSE_ONLY_DIALOG",(function(){return p})),a.d(n,"setSearchText",(function(){return E})),a.d(n,"openNewDialog",(function(){return g})),a.d(n,"closeNewDialog",(function(){return h})),a.d(n,"openEditDialog",(function(){return b})),a.d(n,"closeEditDialog",(function(){return w})),a.d(n,"closeOnlyDialog",(function(){return O}));var o={};a.r(o),a.d(o,"getHolidays",(function(){return L})),a.d(o,"getHolidaysByRange",(function(){return C})),a.d(o,"getHoliday",(function(){return I})),a.d(o,"addHoliday",(function(){return T})),a.d(o,"editHoliday",(function(){return A})),a.d(o,"delHoliday",(function(){return _}));var r=a(0),i=a.n(r),c=a(16),d=a(195),l=a(8),s="[HOLIDAY] SET SEARCH TEXT",m="[HOLIDAY] OPEN NEW DIALOG",u="[HOLIDAY] CLOSE NEW DIALOG",f="[HOLIDAY] OPEN EDIT DIALOG",y="[HOLIDAY] CLOSE EDIT DIALOG",p="[HOLIDAY] CLOSE ONLY DIALOG";function E(t){return{type:s,searchText:t.target.value}}function g(){return{type:m}}function h(){return{type:u}}function b(t,e){return{type:f,data:t,mode:e}}function w(){return{type:y}}function O(){return{type:p}}var v=a(13),D=a(12),x=a.n(D);function N(){var t=Object(v.a)(["\n\tmutation delHoliday($id: String!) {\n\t\tdelHoliday(id: $id) {\n\t\t\tMessages\n\t\t}\n\t}\n"]);return N=function(){return t},t}function H(){var t=Object(v.a)(["\n\tmutation editHoliday(\n\t\t$id: String!\n\t\t$occasion: String\n\t\t$description: String\n\t\t$holidaytype: String\n\t\t$fromdate: DateTimeType\n\t\t$fdayofweek: String\n\t\t$todate: DateTimeType\n\t\t$tdayofweek: String\n\t\t$comments: String\n\t\t$status: Boolean\n\t) {\n\t\teditHoliday(\n\t\t\tid: $id\n\t\t\tinput: {\n\t\t\t\toccasion: $occasion\n\t\t\t\tdescription: $description\n\t\t\t\tholidaytype: $holidaytype\n\t\t\t\tfromdate: $fromdate\n\t\t\t\tfdayofweek: $fdayofweek\n\t\t\t\ttodate: $todate\n\t\t\t\ttdayofweek: $tdayofweek\n\t\t\t\tcomments: $comments\n\t\t\t\tstatus: $status\n\t\t\t}\n\t\t) {\n\t\t\tMessages\n\t\t}\n\t}\n"]);return H=function(){return t},t}function k(){var t=Object(v.a)(["\n\tmutation addHoliday(\n\t\t$occasion: String\n\t\t$description: String\n\t\t$holidaytype: String\n\t\t$fromdate: DateTimeType\n\t\t$fdayofweek: String\n\t\t$todate: DateTimeType\n\t\t$tdayofweek: String\n\t\t$comments: String\n\t\t$status: Boolean\n\t) {\n\t\taddHoliday(\n\t\t\tinput: {\n\t\t\t\toccasion: $occasion\n\t\t\t\tdescription: $description\n\t\t\t\tholidaytype: $holidaytype\n\t\t\t\tfromdate: $fromdate\n\t\t\t\tfdayofweek: $fdayofweek\n\t\t\t\ttodate: $todate\n\t\t\t\ttdayofweek: $tdayofweek\n\t\t\t\tcomments: $comments\n\t\t\t\tstatus: $status\n\t\t\t}\n\t\t) {\n\t\t\tid\n\t\t}\n\t}\n"]);return k=function(){return t},t}function $(){var t=Object(v.a)(["\n\tquery getHoliday($name: String) {\n\t\tgetHoliday(name: $name) {\n\t\t\tid\n\t\t\toccasion\n\t\t\tdescription\n\t\t\tholidaytype\n\t\t\tfromdate\n\t\t\tfdayofweek\n\t\t\ttodate\n\t\t\ttdayofweek\n\t\t\tcomments\n\t\t\tstatus\n\t\t\tcreatedby\n\t\t\tcreatedon\n\t\t\tupdatedby\n\t\t\tupdatedon\n\t\t}\n\t}\n"]);return $=function(){return t},t}function j(){var t=Object(v.a)(["\n\tquery getHolidaysByRange($fromdate: DateTimeType, $todate: DateTimeType) {\n\t\tgetHolidaysByRange(fromdate: $fromdate, todate: $todate) {\n\t\t\tid\n\t\t\toccasion\n\t\t\tdescription\n\t\t\tholidaytype\n\t\t\tfromdate\n\t\t\tfdayofweek\n\t\t\ttodate\n\t\t\ttdayofweek\n\t\t\tcomments\n\t\t\tstatus\n\t\t\tcreatedby\n\t\t\tcreatedon\n\t\t\tupdatedby\n\t\t\tupdatedon\n\t\t}\n\t}\n"]);return j=function(){return t},t}function S(){var t=Object(v.a)(["\n\tquery {\n\t\tgetHolidays {\n\t\t\tid\n\t\t\toccasion\n\t\t\tdescription\n\t\t\tholidaytype\n\t\t\tfromdate\n\t\t\tfdayofweek\n\t\t\ttodate\n\t\t\ttdayofweek\n\t\t\tcomments\n\t\t\tstatus\n\t\t\tcreatedby\n\t\t\tcreatedon\n\t\t\tupdatedby\n\t\t\tupdatedon\n\t\t}\n\t}\n"]);return S=function(){return t},t}var L=x()(S()),C=x()(j()),I=x()($()),T=x()(k()),A=x()(H()),_=x()(N()),Y={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.SET_SEARCH_TEXT:return Object(l.a)(Object(l.a)({},t),{},{searchText:e.searchText});case n.OPEN_NEW_DIALOG:return Object(l.a)(Object(l.a)({},t),{},{dialog:{type:"new",props:{open:!0},data:e.data,mode:e.mode}});case n.CLOSE_NEW_DIALOG:return Object(l.a)(Object(l.a)({},t),{},{dialog:{type:"new",props:{open:!1},data:null}});case n.OPEN_EDIT_DIALOG:return Object(l.a)(Object(l.a)({},t),{},{dialog:{type:e.mode,props:{open:!0},data:e.data,mode:e.mode}});case n.CLOSE_EDIT_DIALOG:return Object(l.a)(Object(l.a)({},t),{},{dialog:{type:e.mode,props:{open:!1},data:null}});case n.CLOSE_ONLY_DIALOG:return Object(l.a)(Object(l.a)({},t),{},{dialog:{type:"close",props:{open:!1},data:null}});default:return t}},P=a(812),M=a(174),W=a(832),B=a(11);var R=function(t){var e=Object(B.b)();return i.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},i.a.createElement("div",{className:"flex items-center"},i.a.createElement(c.a,{animation:"transition.expandIn",delay:300},i.a.createElement(P.a,{className:"text-32 mr-12"},"child_care")),i.a.createElement(c.a,{animation:"transition.slideLeftIn",delay:300},i.a.createElement(M.a,{variant:"h6",className:"hidden sm:flex"},"Holidays"))),i.a.createElement(c.a,{animation:"transition.slideRightIn",delay:300},i.a.createElement(W.a,{onClick:function(){e(n.openNewDialog())},variant:"contained"},i.a.createElement("span",{className:"hidden sm:flex normal-case"},"Add New Holiday"),i.a.createElement("span",{className:"flex sm:hidden normal-case"},"New"))))},q=a(826),F=a(757),X=a(32),J=a.n(X),V=a(192),z=a(70);var K=function(){var t=Object(B.b)(),e=Object(B.c)((function(t){return t.holiday.searchText})),a=Object(B.c)((function(t){return t.holiday.dialog})),d=Object(V.d)(o.getHolidays),l=d.loading,s=d.error,m=d.data,u=d.refetch;if(Object(r.useEffect)((function(){a.props.open||"close"===a.type||u()}),[a.props.open,a.type,u]),s)return i.a.createElement("h1",null,"Error...");if(l||!m)return i.a.createElement(z.s,null);var f=function(t,e){return 0===e.length?t:c.u.filterArrayByString(t,e)}(m.getHolidays,e.trim());return i.a.createElement("div",{className:"w-full flex flex-col"},i.a.createElement(z.o,{cssClass:"-striped -highlight border-0 min-w-xl ",data:f,defaultSorted:[{id:"fromdate",asc:!0}],columns:[{id:"occasion",Header:function(){return i.a.createElement("span",{style:{whiteSpace:"pre-line !important",wordWrap:"break-word"}},"Occasion")},accessor:"occasion",style:{whiteSpace:"unset"},getProps:function(){return{style:{paddingLeft:"8px"}}}},{id:"desc",Header:"Description",accessor:"description",style:{whiteSpace:"unset"}},{id:"holidaytype",Header:"Holiday Type",accessor:"holidaytype"},{id:"begindate",Header:"Begin Date",accessor:function(t){return t.fromdate?J()(t.fromdate).format("Do MMM YYYY"):""}},{id:"enddate",Header:"End Date",accessor:function(t){return t.todate?J()(t.todate).format("Do MMM YYYY"):""}},{id:"beginday",Header:"Begin Day",accessor:"fdayofweek"},{id:"endday",Header:"End Day",accessor:"tdayofweek"},{id:"comments",Header:"Comments",accessor:"comments"},{id:"status",Header:"Status",accessor:"status",Cell:function(t){return t.row.original.status?i.a.createElement(P.a,{className:"text-green text-20"},"check_circle"):i.a.createElement(P.a,{className:"text-red text-20"},"remove_circle")}},{id:"controls",Header:"",sortable:!1,Cell:function(e){return i.a.createElement("div",{className:"flex items-center"},i.a.createElement(q.a,{title:"Edit Holiday"},i.a.createElement(F.a,{onClick:function(a){a.stopPropagation(),t(n.openEditDialog(e.row.original,"edit"))}},i.a.createElement(P.a,null,"edit"))),i.a.createElement(q.a,{title:"Delete / Inactivate"},i.a.createElement(F.a,{onClick:function(a){a.stopPropagation(),t(n.openEditDialog(e.row.original,"delete"))}},i.a.createElement(P.a,null,"delete"))))}}]}))},Q=a(10),U=a(829),Z=a(823),tt=a(833),et=a(834),at=a(836),nt=a(820),ot=a(852),rt=a(835),it=a(874),ct=a(771),dt=a(1369),lt=a(101),st=a(79),mt=a.n(st),ut={id:"",occasion:"",description:"",holidaytype:"",fromdate:new Date,fdayofweek:J()(new Date).format("dddd"),todate:new Date,tdayofweek:J()(new Date).format("dddd"),comments:"",status:!0};var ft=function(t){var e=Object(B.b)(),a=Object(B.c)((function(t){return t.holiday.dialog})),d=Object(r.useState)(!1),s=Object(Q.a)(d,2),m=s[0],u=s[1],f=Object(lt.b)(ut),y=f.form,p=f.setForm,E=f.setInForm,g=Object(r.useRef)(null),h=o.editHoliday;"new"===a.type?h=o.addHoliday:"edit"===a.type?h=o.editHoliday:"delete"===a.type&&(h=o.delHoliday);var b=Object(V.c)(h,{onCompleted:function(t){t.data;H()}}),w=Object(Q.a)(b,2),O=w[0],v=w[1],D=v.loading,x=v.error,N=Object(r.useCallback)((function(){"edit"!==a.type&&"delete"!==a.type||!a.data||p(Object(l.a)({},a.data)),"new"===a.type&&p(Object(l.a)({},ut))}),[a.data,a.type,p]);Object(r.useEffect)((function(){return a.props.open&&N(),function(){p(ut)}}),[a.props.open,N,p]);var H=function(){"edit"===a.type?e(n.closeEditDialog()):e(n.closeNewDialog())},k=function(){e(n.closeOnlyDialog())};return i.a.createElement(U.a,Object.assign({},a.props,{onClose:H,fullWidth:!0,maxWidth:"md"}),i.a.createElement(Z.a,{position:"static",elevation:1},i.a.createElement(tt.a,{className:"flex w-full"},i.a.createElement(M.a,{variant:"subtitle1",color:"inherit"},"new"===a.type?"New Holiday":"edit"===a.type?"Edit Holiday":"Delete Holiday"))),i.a.createElement(et.a,{classes:{root:"p-0"}},i.a.createElement("div",{className:"px-16 sm:px-24"},i.a.createElement(r.Fragment,null,i.a.createElement(mt.a,{onValid:function(){u(!0)},onInvalid:function(){u(!1)},ref:g,onValidSubmit:function(t){"new"===a.type?O({variables:{occasion:t.occasion,description:t.description,holidaytype:y.holidaytype,fromdate:y.fromdate,fdayofweek:y.fdayofweek,todate:y.todate,tdayofweek:y.tdayofweek,comments:t.comments,status:y.status}}):"edit"===a.type?O({variables:{id:y.id,occasion:t.occasion,description:t.description,holidaytype:y.holidaytype,fromdate:y.fromdate,fdayofweek:y.fdayofweek,todate:y.todate,tdayofweek:y.tdayofweek,comments:t.comments,status:y.status}}):"delete"===a.type&&O({variables:{id:y.id}})}},i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row justify-between"},i.a.createElement(c.x,{className:"pr-8 mb-8 mt-8",type:"text",name:"occasion",label:"Holiday Name",value:y.occasion,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},InputProps:{endAdornment:i.a.createElement(at.a,{position:"end"},i.a.createElement(P.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",required:!0}),i.a.createElement(ct.a,{utils:it.a},i.a.createElement(dt.a,{className:"ml-8",variant:"outlined",format:"dd/MM/yyyy",margin:"normal",id:"fromdate",label:"Begin Date",value:y.fromdate,onChange:function(t){E("fromdate",t);var e=J()(t).format("dddd");E("fdayofweek",e)},animateYearScrolling:!0}),i.a.createElement(dt.a,{className:"ml-8",variant:"outlined",format:"dd/MM/yyyy",margin:"normal",id:"fromdate",label:"End Date",value:y.todate,onChange:function(t){E("todate",t);var e=J()(t).format("dddd");E("tdayofweek",e)},animateYearScrolling:!0})),i.a.createElement(nt.a,{control:i.a.createElement(ot.a,{checked:y.status,onChange:function(t){E("isactive",t.target.checked)},value:y.status,color:"primary"}),label:"isActive"})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-8 flex flex-row justify-end w-1/2"},i.a.createElement("span",{className:"w-1/2"},"Begin Day: ",y.fdayofweek),i.a.createElement("span",{className:"w-1/2"},"End Day: ",y.tdayofweek)),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(c.x,{className:"pr-8 mb-8 mt-8",type:"text",name:"description",label:"Holiday Description",value:y.description,multiline:!0,rows:5,validations:{maxLength:250},validationErrors:{maxLength:"You can not type in more than 250 characters"},InputProps:{endAdornment:i.a.createElement(at.a,{position:"end"},i.a.createElement(P.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",fullWidth:!0,required:!0})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(z.f,{formName:y,filterName:"HOLIDAY_TYPE",fieldName:"holidaytype",label:"Holiday Type",cssClass:"w-1/2",onDDChange:function(t,e){E(e,t.label)}})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-8 flex flex-row"},i.a.createElement(c.x,{className:"pr-8 mb-8 mt-8",type:"text",name:"comments",label:"Comments (if any)",value:y.comments,multiline:!0,rows:3,validations:{maxLength:250},validationErrors:{maxLength:"You can not type in more than 250 characters"},InputProps:{endAdornment:i.a.createElement(at.a,{position:"end"},i.a.createElement(P.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",fullWidth:!0,required:!0}))),D&&i.a.createElement(z.s,{message:"Saving data..."}),x&&i.a.createElement(M.a,{className:"pt-32"},"Error : Please try again! ",i.a.createElement("br",null),x.message," ",i.a.createElement("br",null))))),"new"===a.type&&i.a.createElement(rt.a,{className:"justify-between pl-8 sm:pl-16"},i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){k()}},"Close"),i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){g.current.submit()},disabled:!m},"Add Holiday")),"edit"===a.type&&i.a.createElement(rt.a,{className:"justify-between pl-8 sm:pl-16"},i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){k()}},"Close"),i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){g.current.submit()},disabled:!m},"Save")),"delete"===a.type&&i.a.createElement(rt.a,{className:"justify-between pl-8 sm:pl-16"},i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){k()}},"Close"),i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){g.current.submit()}},"Delete")))};e.default=Object(d.a)("holiday",G)((function(){var t=Object(r.useRef)(null);return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:i.a.createElement(R,{pageLayout:t}),content:i.a.createElement(K,null),ref:t,innerScroll:!0}),i.a.createElement(ft,null))}))}}]);