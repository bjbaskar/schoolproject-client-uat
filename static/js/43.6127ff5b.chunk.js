(this["webpackJsonpsivanandha-vidyashram-seithur"]=this["webpackJsonpsivanandha-vidyashram-seithur"]||[]).push([[43],{1375:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(16),c=t(195),l=t(8),i=t(60),s={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case i.l.SET_SEARCH_TEXT:return Object(l.a)(Object(l.a)({},e),{},{searchText:a.searchText});case i.l.OPEN_NEW_DIALOG:return Object(l.a)(Object(l.a)({},e),{},{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case i.l.CLOSE_NEW_DIALOG:return Object(l.a)(Object(l.a)({},e),{},{dialog:{type:"new",props:{open:!1},data:null}});case i.l.OPEN_EDIT_DIALOG:return Object(l.a)(Object(l.a)({},e),{},{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case i.l.CLOSE_EDIT_DIALOG:return Object(l.a)(Object(l.a)({},e),{},{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},d=t(812),u=t(174),p=t(832),b=t(11);var E=function(e){var a=Object(b.b)();return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(o.a,{animation:"transition.expandIn",delay:300},r.a.createElement(d.a,{className:"text-32 mr-12"},"developer_board")),r.a.createElement(o.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(u.a,{variant:"h6",className:"hidden sm:flex"},"Text Books & Notes"))),r.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(p.a,{onClick:function(){a(i.l.openNewDialog())},variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex normal-case"},"Add New TextBook"),r.a.createElement("span",{className:"flex sm:hidden normal-case"},"New"))))},f=t(826),h=t(757),x=t(192),y=t(70);var v=function(){var e=Object(b.b)(),a=Object(b.c)((function(e){return e.textbook.searchText})),t=Object(b.c)((function(e){return e.textbook.dialog})),c=Object(x.d)(i.m.getTextBooks),l=c.loading,s=c.error,m=c.data,u=c.refetch;if(Object(n.useEffect)((function(){t.props.open||u()}),[t.props.open,u]),s)return r.a.createElement("h1",null,"Error...");if(l||!m)return r.a.createElement(y.s,null);var p=function(e,a){return 0===a.length?e:o.u.filterArrayByString(e,a)}(m.getTextBooks,a.trim());return r.a.createElement("div",{className:"w-full flex flex-col"},r.a.createElement(y.o,{data:p,hasExport:!0,exportMode:"DATA",columns:[{id:"edust",Header:function(){return r.a.createElement("span",{style:{whiteSpace:"pre-line !important",wordWrap:"break-word"}},"Education",r.a.createElement("br",null),"Structure")},accessor:"edusystem",style:{whiteSpace:"unset"},getProps:function(){return{style:{paddingLeft:"8px"}}}},{id:"class_sec",Header:"Class",accessor:function(e){return e.class_section.name+" - "+e.class_section.section}},{id:"subj",Header:"Subject",accessor:function(e){return e.subject.name}},{id:"bookname",Header:"Bookname",accessor:"bookname"},{id:"publisher",Header:"Publisher",accessor:"publisher"},{id:"author",Header:"Author",accessor:"author"},{id:"price",Header:"Price",accessor:"price"},{id:"btype",Header:"Type",accessor:"booktype"},{id:"ayr",Header:"Acd-Year",accessor:"academicyear"},{id:"edit",Header:"",sortable:!1,Cell:function(a){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(f.a,{title:"Edit TextBooks"},r.a.createElement(h.a,{onClick:function(t){t.stopPropagation(),e(i.l.openEditDialog(a.row.original,"edit"))}},r.a.createElement(d.a,null,"edit"))),r.a.createElement(f.a,{title:"Delete / Inactivate"},r.a.createElement(h.a,{onClick:function(t){t.stopPropagation(),e(i.l.openEditDialog(a.row.original,"delete"))}},r.a.createElement(d.a,null,"delete"))))}}]}))},g=t(10),k=t(829),N=t(823),j=t(833),D=t(834),O=t(836),w=t(820),C=t(852),T=t(835),_=t(79),A=t.n(_),L=t(101),B={id:"",academicyear:"",edusystem:"",class_section:"",subject:"",bookname:"",publisher:"",author:"",price:"",isactive:!0,booktype:""};var I=function(e){var a=Object(b.b)(),t=Object(b.c)((function(e){return e.textbook.dialog})),c=Object(n.useState)(!1),s=Object(g.a)(c,2),m=s[0],E=s[1],f=Object(L.b)(B),h=f.form,v=f.setForm,_=f.setInForm,I=Object(n.useRef)(null),S=i.m.editTextBook;"new"===t.type?S=i.m.addTextBook:"edit"===t.type?S=i.m.editTextBook:"delete"===t.type&&(S=i.m.delTextBook);var P=Object(x.c)(S,{onCompleted:function(e){e.data;R()}}),H=Object(g.a)(P,2),W=H[0],Y=H[1],q=Y.loading,F=Y.error,G=Object(n.useCallback)((function(){"edit"!==t.type&&"delete"!==t.type||!t.data||v(Object(l.a)({},t.data)),"new"===t.type&&v(Object(l.a)({},B))}),[t.data,t.type,v]);Object(n.useEffect)((function(){return t.props.open&&G(),function(){v(B)}}),[t.props.open,G,v]);var R=function(){"edit"===t.type?a(i.l.closeEditDialog()):a(i.l.closeNewDialog())},J=function(e,a){_(a,e.value)},V=function(e,a){_(a,e.label)};return r.a.createElement(k.a,Object.assign({},t.props,{onClose:R,fullWidth:!0,maxWidth:"md"}),r.a.createElement(N.a,{position:"static",elevation:1},r.a.createElement(j.a,{className:"flex w-full"},r.a.createElement(u.a,{variant:"subtitle1",color:"inherit"},"new"===t.type?"New TextBook":"edit"===t.type?"Edit TextBook":"Delete TextBook"))),r.a.createElement(D.a,{classes:{root:"p-0"}},r.a.createElement("div",{className:"px-16 sm:px-24"},r.a.createElement(n.Fragment,null,r.a.createElement(A.a,{onValid:function(){E(!0)},onInvalid:function(){E(!1)},ref:I,onValidSubmit:function(e){"new"===t.type?W({variables:{academicyear:o.u.getDD(h.academicyear),edusystem:o.u.getDD(h.edusystem),class_section:o.u.getDD(h.class_section),subject:o.u.getDD(h.subject),bookname:e.bookname,publisher:e.publisher,author:e.author,price:Number(e.price),isactive:e.isactive?e.isactive:h.isactive,booktype:h.booktype}}):"edit"===t.type?W({variables:{id:h.id,academicyear:o.u.getDD(h.academicyear),edusystem:o.u.getDD(h.edusystem),class_section:o.u.getDD(h.class_section),subject:o.u.getDD(h.subject),bookname:e.bookname,publisher:e.publisher,author:e.author,price:Number(e.price),isactive:h.isactive,booktype:h.booktype}}):"delete"===t.type&&W({variables:{id:h.id}})}},r.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},r.a.createElement(y.g,{formName:h,isSetLabel:!0,onDDChange:V,cssClass:"mb-16 w-1/2"}),r.a.createElement("span",{className:"ml-8"}),r.a.createElement(y.a,{formName:h,isSetLabel:!0,onDDChange:V,cssClass:"mb-16 w-1/2"})),r.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},r.a.createElement(y.c,{formName:h,onDDChange:J,label:"Class & section",showAll:!1,cssClass:"mb-16 w-1/2"}),r.a.createElement("span",{className:"ml-8"}),r.a.createElement(y.y,{formName:h,onDDChange:J,cssClass:"mb-16 w-1/2"})),r.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},r.a.createElement(y.f,{formName:h,filterName:"BOOK_TYPE",fieldName:"booktype",label:"Book Type",cssClass:"w-1/2",onDDChange:V}),r.a.createElement(o.x,{className:"pr-8 mb-8 ml-8 w-1/2",type:"text",name:"bookname",label:"Book Name",value:h.bookname,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(d.a,{className:"text-20",color:"action"},"developer_board"))},variant:"outlined",required:!0})),r.a.createElement("div",{className:"px-8 sm:px-8 mt-8 flex flex-row"},r.a.createElement(o.x,{className:"pr-8 mb-8 mt-8",type:"text",name:"publisher",label:"Publisher",value:h.publisher,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(d.a,{className:"text-20",color:"action"},"account_box"))},variant:"outlined",required:!0}),r.a.createElement(o.x,{className:"pr-8 mb-8 mt-8",type:"text",name:"author",label:"Author",value:h.author,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(d.a,{className:"text-20",color:"action"},"account_circle"))},variant:"outlined",required:!0})),r.a.createElement("div",{className:"px-8 sm:px-8 mt-8 flex flex-row"},r.a.createElement(o.x,{className:"pr-8 mb-8 mt-8",type:"number",name:"price",label:"Price",value:h.price,InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(d.a,{className:"text-20",color:"action"},"attach_money"))},variant:"outlined",required:!0}),r.a.createElement(o.x,{className:"pr-8 mb-8 mt-8",type:"text",name:"notes",label:"Notes",value:h.notes,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},variant:"outlined"}),r.a.createElement(w.a,{control:r.a.createElement(C.a,{checked:h.isactive,onChange:function(e){_("isactive",e.target.checked)},value:h.isactive,color:"primary"}),label:"isActive"}))),r.a.createElement(y.t,{createdby:h.createdby,createdon:h.createdon,updatedby:h.updatedby,updatedon:h.updatedon}),q&&r.a.createElement(y.s,{message:"Saving data..."}),F&&r.a.createElement(u.a,{className:"pt-32"},"Error : Please try again! ",r.a.createElement("br",null),F.message," ",r.a.createElement("br",null))))),"new"===t.type&&r.a.createElement(T.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){R()}},"Close"),r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){I.current.submit()},disabled:!m},"Add TextBook")),"edit"===t.type&&r.a.createElement(T.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){R()}},"Close"),r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){I.current.submit()},disabled:!m},"Save")),"delete"===t.type&&r.a.createElement(T.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){R()}},"Close"),r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){I.current.submit()}},"Delete")))};a.default=Object(c.a)("textbook",m)((function(){var e=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:r.a.createElement(E,{pageLayout:e}),content:r.a.createElement(v,null),ref:e,innerScroll:!0}),r.a.createElement(I,null))}))}}]);