(this["webpackJsonpsivanandha-vidyashram-seithur"]=this["webpackJsonpsivanandha-vidyashram-seithur"]||[]).push([[24],{1396:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),l=t(16),c=t(195),r=t(890),i=t(891),o=t(10),d=t(826),u=t(757),m=t(812),f=t(192),p=t(11),b=t(134),_=t.n(b),E=t(32),h=t.n(E),y=t(70),v=t(147);var O=function(){var e=Object(p.b)(),a=Object(p.c)((function(e){return e.fee.dialog})),t=Object(n.useState)([]),l=Object(o.a)(t,2),c=l[0],r=l[1],i=Object(f.b)(v.h.getAllFeeStudent,{onCompleted:function(e){_.a.isEmpty(e.getAllFeeStudent)?r([]):r(e.getAllFeeStudent)}}),b=Object(o.a)(i,2),E=b[0],O=b[1],g=O.loading,j=O.error;return Object(n.useEffect)((function(){E()}),[]),Object(n.useEffect)((function(){a.props.open||"close"===a.type||E()}),[a.props.open,a.type]),s.a.createElement("div",{className:"w-full flex flex-col"},g||!c?s.a.createElement(y.s,null):s.a.createElement(y.o,{cssClass:"",data:c,hasExport:!0,columns:[{id:"class_sec",Header:"Class Section",accessor:function(e){if(e.class_sec&&e.class_sec.name)return e.class_sec.name},style:{whiteSpace:"unset"},className:"ml-8"},{id:"student",Header:"Name",accessor:function(e){if(e.student&&e.student.firstname)return e.student.firstname}},{id:"fee_head",Header:"Fee Period",accessor:function(e){if(e.fee_class&&e.fee_class.fee_slab)return e.fee_class.fee_slab.fee_period}},{id:"start_date",Header:"Start Date",accessor:function(e){if(e.fee_class&&e.fee_class.fee_slab)return h()(e.fee_class.fee_slab.start_date).format("MMM Do YYYY")}},{id:"end_date",Header:"End Date",accessor:function(e){if(e.fee_class&&e.fee_class.fee_slab)return h()(e.fee_class.fee_slab.end_date).format("MMM Do YYYY")}},{id:"fee_slab",Header:"Fee Head",accessor:function(e){if(e.fee_head&&e.fee_head.name)return e.fee_head.name}},{id:"updatedon",Header:"Last Updated on",accessor:function(e){return e.updatedon?e.updatedon:e.createdon},Cell:function(e){return s.a.createElement("div",{className:"pl-8"},e.row.original.updatedon?h()(e.row.original.updatedon).format("MMM Do YYYY, h:mm a"):h()(e.row.original.createdon).format("MMM Do YYYY, h:mm a"))}},{id:"controls",Header:"",sortable:!1,Cell:function(a){return s.a.createElement(n.Fragment,null,s.a.createElement(d.a,{title:"Edit"},s.a.createElement(u.a,{onClick:function(t){t.stopPropagation(),e(v.b.openEditDialog(a.row.original,"edit"))}},s.a.createElement(m.a,null,"edit"))),s.a.createElement(d.a,{title:"Delete / Inactivate"},s.a.createElement(u.a,{onClick:function(t){t.stopPropagation(),e(v.b.openEditDialog(a.row.original,"delete"))}},s.a.createElement(m.a,null,"delete"))))}}]}),j?s.a.createElement(y.v,{message:"There was an error !"}):null)},g=t(8),j=t(829),w=t(823),N=t(833),D=t(174),S=t(834),C=t(820),x=t(852),F=t(835),Y=t(832),I=(t(874),t(101)),A=t(79),k=t.n(A),L={id:"",name:"",section:""},M={id:"",class_sec:L,student:{id:"",firstname:"",lastname:""},fee_class:{id:"",class_sec:L,fee_slab:{id:"",fee_period:"",term_name:""},fee_head:{id:"",name:""}},isactive:!0,acad_year:"",school_id:""};var H=function(e){var a=Object(p.b)(),t=Object(p.c)((function(e){return e.fee.dialog})),l=Object(n.useState)(!1),c=Object(o.a)(l,2),r=c[0],i=c[1],d=Object(I.b)(M),u=d.form,m=d.setForm,b=d.setInForm,_=Object(n.useRef)(null),E=v.h.editFeeStudent;"new"===t.type?E=v.h.addFeeStudent:"edit"===t.type?E=v.h.editFeeStudent:"delete"===t.type&&(E=v.h.delFeeStudent);var h=Object(f.c)(E,{onCompleted:function(){W()}}),O=Object(o.a)(h,2),A=O[0],L=O[1],H=L.loading,T=L.error,P=Object(n.useCallback)((function(){"edit"!==t.type&&"delete"!==t.type||!t.data||m(Object(g.a)({},t.data)),"new"===t.type&&m(Object(g.a)({},M))}),[t.data,t.type,m]);Object(n.useEffect)((function(){return t.props.open&&P(),function(){m(M)}}),[t.props.open,P,m]);var G,W=function(){"edit"===t.type?a(v.b.closeEditDialog()):a(v.b.closeNewDialog())},R=function(e,a){"class_section"===a&&(a="class_sec"),"class_sec"===a?b("class_sec.id",e.value):"fee_slab"===a?b("student.id",e.value):"fee_class"===a&&b("fee_class.id",e.value)};return s.a.createElement(j.a,Object.assign({},t.props,{onClose:W,fullWidth:!0,maxWidth:"md"}),s.a.createElement(w.a,{position:"static",elevation:1},s.a.createElement(N.a,{className:"flex w-full"},s.a.createElement(D.a,{variant:"subtitle1",color:"inherit"},"new"===t.type?"New Fee Student":"edit"===t.type?"Edit Fee Student":"Delete Fee Student"))),s.a.createElement(S.a,{classes:{root:"px-16 sm:px-24"}},s.a.createElement(n.Fragment,null,s.a.createElement(k.a,{onValid:function(){i(!0)},onInvalid:function(){i(!1)},ref:_,onValidSubmit:function(e){"new"===t.type?A({variables:{class_sec:u.class_sec.id,student_id:u.student_id.id,fee_class:u.fee_class.id,isactive:u.isactive,acad_year:"acad_year",school_id:"school_id"}}):"edit"===t.type?A({variables:{id:u.id,class_sec:u.class_sec.id,student_id:u.student_id.id,fee_class:u.fee_class.id,isactive:u.isactive,acad_year:"acad_year",school_id:"school_id"}}):"delete"===t.type&&A({variables:{id:u.id}})}},s.a.createElement("div",{className:"flex flex-row w-full justify-center"},s.a.createElement("div",{className:"mt-16 flex flex-col w-3/4 "},s.a.createElement(C.a,{control:s.a.createElement(x.a,{checked:u.isactive,onChange:(G="isactive",function(e){b(G,e.target.checked)}),value:u.isactive,color:"primary",className:"mt-0 z-0"}),label:"Is Active",labelPlacement:"start"}),s.a.createElement(y.c,{formName:u.class_sec?u.class_sec.id:"",onDDChange:R,label:"Search by Class & Section",showAll:!1,cssClass:"my-8 mr-8 w-full z-999",disabled:"new"!==t.type}),s.a.createElement(y.x,{classId:u.class_sec?u.class_sec.id:"",optionName:"student",label:"Select Student",cssClass:"my-8 mr-8 w-full",onDDChange:R}),s.a.createElement(y.j,{formName:u.fee_class?u.fee_class.id:"",optionName:"fee_class",label:"Select Fee Class",cssClass:"my-8 mr-8 w-full",onDDChange:R})))),H&&s.a.createElement(y.s,{message:"Saving data..."}),T&&s.a.createElement(D.a,{className:"pt-32"},"Error : Please try again! ",s.a.createElement("br",null),T.message," ",s.a.createElement("br",null)))),s.a.createElement(F.a,{className:"justify-between pl-8 sm:pl-16 z-0"},s.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){a(v.b.closeOnlyDialog())}},"Close"),"new"===t.type&&s.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){_.current.submit()},disabled:!r},"Add Fee Period"),"edit"===t.type&&s.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){_.current.submit()},disabled:!r},"Save"),"delete"===t.type&&s.a.createElement(Y.a,{variant:"contained",color:"primary",onClick:function(){_.current.submit()}},"Delete")))};a.default=Object(c.a)("fee",r.a)((function(){var e=Object(n.useRef)(null);return s.a.createElement(s.a.Fragment,null,s.a.createElement(l.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:s.a.createElement(i.a,{pageLayout:e,headerName:"Fee Student Setup",buttonDisplay:"Add New",icon:"settings_input_composite"}),content:s.a.createElement(O,null),ref:e,innerScroll:!0}),s.a.createElement(H,null))}))},890:function(e,a,t){"use strict";var n=t(8),s=t(147),l={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}};a.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case s.b.SET_SEARCH_TEXT:return Object(n.a)(Object(n.a)({},e),{},{searchText:a.searchText});case s.b.OPEN_NEW_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case s.b.CLOSE_NEW_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:"new",props:{open:!1},data:null}});case s.b.OPEN_EDIT_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case s.b.CLOSE_EDIT_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:a.mode,props:{open:!1},data:null}});case s.b.CLOSE_ONLY_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:"close",props:{open:!1},data:null}});default:return e}}},891:function(e,a,t){"use strict";var n=t(0),s=t.n(n),l=t(812),c=t(174),r=t(832),i=t(16),o=t(11),d=t(147),u=t(87);a.a=function(e){var a=Object(o.b)(),t=Object(u.g)();return s.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},s.a.createElement("div",{className:"flex items-center"},s.a.createElement(i.a,{animation:"transition.expandIn",delay:300},s.a.createElement(l.a,{className:"text-32 mr-12"},e.icon)),s.a.createElement(i.a,{animation:"transition.slideLeftIn",delay:300},s.a.createElement(c.a,{variant:"h6",className:"hidden sm:flex"},e.headerName))),s.a.createElement(i.a,{animation:"transition.slideRightIn",delay:300},s.a.createElement(r.a,{onClick:function(){"feereports"===e.routeName||e.routeName?t.push("/fee/feereports"):a(d.b.openNewDialog())},variant:"contained"},s.a.createElement("span",{className:"hidden sm:flex normal-case"},e.buttonDisplay?e.buttonDisplay:"Add New"),s.a.createElement("span",{className:"flex sm:hidden normal-case"},"New"))))}}}]);