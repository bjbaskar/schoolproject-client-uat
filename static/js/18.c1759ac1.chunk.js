(this["webpackJsonpsivanandha-webapp"]=this["webpackJsonpsivanandha-webapp"]||[]).push([[18],{1073:function(e,a,t){"use strict";var n={};t.r(n),t.d(n,"SET_SEARCH_TEXT",(function(){return l})),t.d(n,"SET_STAFF_SELECTED",(function(){return r})),t.d(n,"setSearchText",(function(){return o})),t.d(n,"setSelectedStaff",(function(){return i}));var l="[STAFF] SET SEARCH TEXT",r="[STAFF] SET STAFF SELECTED";function o(e){return{type:l,searchText:e.target.value}}function i(e){return{type:r,data:e}}t.d(a,"a",(function(){return n}))},1111:function(e,a,t){"use strict";var n=t(44),l=t(11),r=t(1073),o={selectedStaff:{},searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case r.a.SET_SEARCH_TEXT:return Object(l.a)({},e,{searchText:a.searchText});case r.a.SET_STAFF_SELECTED:return Object(l.a)({},e,{selectedStaff:a.data});default:return e}},c=Object(n.d)({staffReducer:i});a.a=c},1401:function(e,a,t){"use strict";t.r(a);var n=t(33),l=t(11),r=t(10),o=t(0),i=t.n(o),c=t(157),s=t(1011),m=t(1043),d=t(1028),u=t(1048),f=t(1024),b=t(1045),E=t(1036),h=t(412),p=t(1017),g=t(1384),v=t(82),x=t.n(v),N=t(18),S=t(36),O=t(8),j=t(217),w=t(93),y=t(109),C=t(75),T=t(22),D=t(378),F=t(158),I=t(1111),L=t(1030),M=t(963),Y=t(64),H=t.n(Y),_=t(221),A={upName:"",uploadType:"",size:"",type:""};var R=function(e){var a=e.staffId,t=Object(O.b)(),n=Object(o.useState)(!1),l=Object(r.a)(n,2),c=l[0],m=l[1],d=Object(y.b)(A),u=d.form,f=(d.setForm,d.setInForm,d.handleChange),b=Object(j.d)(D.g,{variables:{id:a,searchfor:"STAFF"}}),E=b.loading,h=(b.error,b.data),p=(h=void 0===h?{}:h).getDocuments,g=void 0===p?[]:p,v=b.refetch,S=Object(j.c)(D.b,{onCompleted:function(e){var a=e.data;a&&a.delDocuments&&(t(T.j({message:"Selected Document deleted successfully",variant:"info"})),v())}}),w=Object(r.a)(S,2),F=w[0];if(w[1],!a)return i.a.createElement("h1",null,"Staff Id not found");if(E)return i.a.createElement(N.i,null);var I=g;return i.a.createElement(o.Fragment,null,i.a.createElement(x.a,{onValid:function(){m(!0)},onInvalid:function(){m(!1)}},i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(N.y,{className:"pr-8 mb-8",autoFocus:!0,name:"upName",label:"Name of the Document",validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},variant:"outlined",required:!0,onChange:f}),i.a.createElement(C.m,{moduleName:"STAFF",upName:u.upName,uploadType:"DOCS",staffId:a,canEnable:c}))),i.a.createElement(_.b,{className:"-striped -highlight border-0 min-w-xl ml-16 mt-16 pr-16",data:I,showPagination:!1,defaultSorted:[{id:"createdon",desc:!0}],columns:[{Header:"Name",accessor:"name"},{Header:"Module Name",accessor:"modulename"},{Header:"Doc id",accessor:"docid"},{Header:"Size",accessor:"filesize"},{Header:"Type",accessor:"filetype"},{Header:"Created by",accessor:"createdby"},{Header:"Created on",accessor:"createdon",Cell:function(e){return i.a.createElement("div",{className:"pl-8"},e.original.createdon?H()(e.original.createdon).format("Do MMM YYYY"):"")}},{Header:"",sortable:!1,Cell:function(e){return i.a.createElement("div",{className:"flex items-center"},i.a.createElement(L.a,{title:"Edit Staff"},i.a.createElement(M.a,{onClick:function(e){e.stopPropagation()}},i.a.createElement(s.a,null,"cloud_download"))),i.a.createElement(L.a,{title:"Delete / Inactivate"},i.a.createElement(o.Fragment,null,i.a.createElement(M.a,{onClick:function(a){a.stopPropagation(),function(e){var a=e.id,t=e.modulename,n=e.docid;F({variables:{id:a,modulename:t,doctype:"DOCS",docid:n}})}(e.original)}},i.a.createElement(s.a,null,"delete")))))}}]}))},P=(Object(p.a)((function(e){return{productImageFeaturedStar:{position:"absolute",top:0,right:0,color:h.a[400],opacity:0},productImageUpload:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},productImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{"& $productImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:e.shadows[3],"& $productImageFeaturedStar":{opacity:1},"&:hover $productImageFeaturedStar":{opacity:1}}}}})),{id:"",aadhaarno:"",staffno:"",firstname:"",lastname:"",gender:"Female",designation:"Teacher",dob:new Date,doj:new Date,nationality:"Indian",religion:"Hindu",castecategory:"",community:"",mothertongue:"Tamil",bloodgroup:"",identification:"",isactive:!0,notes:""});a.default=Object(F.a)("staff",I.a)((function(e){var a,t=Object(O.b)(),h=Object(o.useRef)(null),p=Object(w.g)(),v=Object(o.useState)(!0),F=Object(r.a)(v,2),I=F[0],L=F[1],M=Object(o.useState)(!1),Y=Object(r.a)(M,2),H=Y[0],_=Y[1],A=Object(o.useState)(0),k=Object(r.a)(A,2),B=k[0],V=k[1],U=Object(o.useState)(D.a),W=Object(r.a)(U,2),q=W[0],z=W[1],G=Object(y.b)(P),J=G.form,X=G.handleChange,$=G.setForm,K=G.setInForm,Q=Object(O.c)((function(e){return e.staff.staffReducer.selectedStaff})),Z=Object(j.b)(D.h),ee=Object(r.a)(Z,2),ae=ee[0],te=ee[1],ne=te.loading,le=(te.error,te.data),re=Object(j.c)(q,{onCompleted:function(e){(e&&e.addStaffProfile||e&&e.editStaffProfile)&&(t(T.j({message:"Staff details saved successfully",variant:"success"})),de())}}),oe=Object(r.a)(re,2),ie=oe[0],ce=oe[1],se=ce.loading;ce.error,Object(o.useEffect)((function(){return function(){var a,t=e.match.params.staffId;"new"===t?(a=D.a,$(Object(l.a)({},P)),L(!1)):Q&&Q.id?Q&&Q.id&&(a=D.d,$(Q),L(!0)):(ae({variables:{id:t,isactive:!0}}),a=D.d,L(!0)),z(a)}(),function(){z(null),$(null)}}),[e.match.params]),Object(o.useEffect)((function(){le&&le.getStaff&&$(le.getStaff)}),[le]);var me=function(e,a){K(a,e.label)},de=function(){p.push({pathname:"/staff/list",data:!0})};return se?i.a.createElement(C.i,{message:"Saving data..."}):ne&&!le?i.a.createElement(C.i,{message:"Loading Staff details..."}):i.a.createElement(N.l,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:J&&i.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},i.a.createElement("div",{className:"flex flex-col items-start max-w-full"},i.a.createElement(N.a,{animation:"transition.slideRightIn",delay:300},i.a.createElement(c.a,{className:"normal-case flex items-center sm:mb-12",component:S.a,role:"button",to:"/staff/list",color:"inherit"},i.a.createElement(s.a,{className:"mr-4 text-20"},"arrow_back"),"Staff")),i.a.createElement("div",{className:"flex items-center max-w-full"},i.a.createElement(N.a,{animation:"transition.expandIn",delay:300},i.a.createElement("img",{className:"w-32 sm:w-48 mr-8 sm:mr-16 rounded",src:"assets/images/ecommerce/product-image-placeholder.png",alt:J.name})),i.a.createElement("div",{className:"flex flex-col min-w-0"},i.a.createElement(N.a,{animation:"transition.slideLeftIn",delay:300},i.a.createElement(c.a,{className:"text-16 sm:text-20 truncate"},J.firstname?J.firstname+" "+J.lastname:"New Staff")),i.a.createElement(N.a,{animation:"transition.slideLeftIn",delay:300},i.a.createElement(c.a,{variant:"caption"},"Staff Detail")))))),contentToolbar:i.a.createElement(m.a,{value:B,onChange:function(e,a){V(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},i.a.createElement(d.a,{className:"h-64 normal-case",label:"Basic Info"}),I&&i.a.createElement(d.a,{className:"h-64 normal-case",label:"Documents"})),content:J&&i.a.createElement("div",{className:"flex flex-col items-start max-w-full"},i.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},0===B&&i.a.createElement(o.Fragment,null,i.a.createElement(x.a,{className:"flex flex-col w-full",onValid:function(){_(!0)},onInvalid:function(){_(!1)},ref:h,onValidSubmit:function(){ie({variables:Object(l.a)({},P,{},J)})}},i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row justify-between"},i.a.createElement(N.y,(a={autoFocus:!0,label:"Aadhaar No."},Object(n.a)(a,"autoFocus",!0),Object(n.a)(a,"id","aadhaarno"),Object(n.a)(a,"name","aadhaarno"),Object(n.a)(a,"value",J.aadhaarno),Object(n.a)(a,"variant","outlined"),Object(n.a)(a,"fullWidth",!0),Object(n.a)(a,"validations",{maxLength:50}),Object(n.a)(a,"onChange",X),a)),i.a.createElement(N.y,{className:"ml-16",label:"Staff No.",id:"staffno",name:"staffno",value:J.staffno,variant:"outlined",fullWidth:!0,validations:{maxLength:50},onChange:X,disabled:!0})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row justify-between"},i.a.createElement(N.y,{required:!0,label:"First Name",id:"firstname",name:"firstname",value:J.firstname,variant:"outlined",fullWidth:!0,validations:{maxLength:50},onChange:X}),i.a.createElement(N.y,{className:"ml-16",required:!0,label:"Last Name",id:"lastname",name:"lastname",value:J.lastname,variant:"outlined",fullWidth:!0,validations:{maxLength:50},onChange:X})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement("div",{className:"w-1/2 flex justify-between"},i.a.createElement(g.a,{label:"Date of Birth",inputVariant:"outlined",value:J.dob,onChange:function(e){return K("dob",e)},className:"mt-8 mb-16",format:"DD-MMM-YYYY"}),i.a.createElement(g.a,{label:"Date of Join",inputVariant:"outlined",value:J.doj,onChange:function(e){return K("doj",e)},className:"mt-8 mb-16 ml-8 mr-8",format:"DD-MMM-YYYY"})),i.a.createElement("div",{className:"w-1/2 flex justify-between"},i.a.createElement(u.a,{className:"ml-16","aria-label":"gender",name:"gender",value:J.gender,onChange:X},i.a.createElement(f.a,{value:"Female",control:i.a.createElement(b.a,null),label:"Female"}),i.a.createElement(f.a,{value:"Male",control:i.a.createElement(b.a,null),label:"Male"})),i.a.createElement(N.y,{className:"mb-8 mt-8",type:"text",name:"designation",label:"Designation",value:J.designation,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},variant:"outlined",onChange:X}))),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(C.f,{formName:J,filterName:"MOTHER_TONGUE",fieldName:"mothertongue",label:"Mother Tongue",cssClass:"w-1/2",onDDChange:me}),i.a.createElement(C.f,{formName:J,filterName:"RELIGION",fieldName:"religion",label:"Religion",cssClass:"w-1/2 ml-16",onDDChange:me})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(C.f,{formName:J,filterName:"COMMUNITY",fieldName:"community",label:"Community",cssClass:"w-1/2",onDDChange:me}),i.a.createElement(C.b,{formName:J,onDDChange:function(e,a){K(a,e.value)},cssClass:" min-h-56 w-1/2 ml-16"})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(C.f,{formName:J,filterName:"BLOOD_GROUP",fieldName:"bloodgroup",label:"Bloodgroup",cssClass:"w-1/2",onDDChange:me}),i.a.createElement(N.y,{className:"mb-8 ml-16 w-1/2",type:"text",name:"identification",label:"Identification",value:J.identification,multiline:!0,rows:5,validations:{maxLength:250},validationErrors:{maxLength:"You can not type in more than 250 characters"},variant:"outlined",onChange:X})))),1===B&&I&&i.a.createElement(R,{staffId:Q.id})),i.a.createElement(E.a,{className:"whitespace-no-wrap normal-case self-center mb-32",variant:"contained",color:"secondary",disabled:!H,onClick:function(){h.current.submit()}},"Save"))})}))}}]);