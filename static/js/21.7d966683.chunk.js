(this["webpackJsonpsivanandha-webapp"]=this["webpackJsonpsivanandha-webapp"]||[]).push([[21],{1074:function(e,a,t){"use strict";var n={};t.r(n),t.d(n,"SET_SEARCH_TEXT",(function(){return r})),t.d(n,"SET_STAFF_SELECTED",(function(){return l})),t.d(n,"setSearchText",(function(){return c})),t.d(n,"setSelectedStaff",(function(){return i}));var r="[STAFF] SET SEARCH TEXT",l="[STAFF] SET STAFF SELECTED";function c(e){return{type:r,searchText:e.target.value}}function i(e){return{type:l,data:e}}t.d(a,"a",(function(){return n}))},1115:function(e,a,t){"use strict";var n=t(44),r=t(11),l=t(1074),c={selectedStaff:{},searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case l.a.SET_SEARCH_TEXT:return Object(r.a)({},e,{searchText:a.searchText});case l.a.SET_STAFF_SELECTED:return Object(r.a)({},e,{selectedStaff:a.data});default:return e}},s=Object(n.d)({staffReducer:i});a.a=s},1403:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(16),c=t(158),i=t(1115),s=t(1011),o=t(157),f=t(194),d=t(962),u=t(1036),m=t(1015),E=t(36),h=t(8),p=t(1074);var S=function(){var e=Object(h.b)(),a=Object(h.c)((function(e){return e.staff.staffReducer.searchText})),t=Object(h.c)((function(e){return e.fuse.settings.mainTheme}));return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},r.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(l.a,{animation:"transition.expandIn",delay:300},r.a.createElement(s.a,{className:"text-32 mr-12"},"supervised_user_circle")),r.a.createElement(l.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(o.a,{variant:"h6",className:"hidden sm:flex"},"Staff")))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center pr-8 sm:px-12"},r.a.createElement(m.a,{theme:t},r.a.createElement(l.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(f.a,{className:"flex p-4 items-center w-full max-w-512 px-8 py-4",elevation:1},r.a.createElement(s.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(d.a,{placeholder:"Search Staff",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:function(a){return e(p.a.setSearchText(a))}}))))),r.a.createElement(l.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(u.a,{component:E.a,to:"/staff/new",className:"whitespace-no-wrap normal-case",variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex"},"New Staff"),r.a.createElement("span",{className:"flex sm:hidden"},"New"))))},v=t(10),g=t(1030),b=t(963),x=t(221),T=t(64),y=t.n(T),j=t(218),N=t(75),w=t(22),O=t(379),C={open:!1,data:""};var F=function(e){var a=Object(h.b)(),t=Object(n.useState)(C),c=Object(v.a)(t,2),i=c[0],o=c[1],f=Object(h.c)((function(e){return e.staff.staffReducer.searchText})),d=Object(j.d)(O.e,{variables:{isactive:!0}}),u=d.loading,m=d.error,E=d.data,S=(E=void 0===E?{}:E).getAllStaff,T=void 0===S?[]:S,F=d.refetch,A=Object(j.c)(O.c,{onCompleted:function(e){e.e;a(w.j({message:"Staff details deleted successfully",variant:"info"})),R(!1,null),F()}}),H=Object(v.a)(A,2),_=H[0];H[1],Object(n.useEffect)((function(){e.history.location&&e.history.location.data&&F()}),[e.history.location]);var R=function(e,a){e?o({open:e,data:a}):o({open:!1})};if(m)return r.a.createElement("h1",null,"Error...");if(u||!T)return r.a.createElement(l.i,null);var D=function(e,a){return 0===a.length?e:l.v.filterArrayByString(e,a)}(T,f.trim());return r.a.createElement(n.Fragment,null,r.a.createElement(x.b,{className:"-striped -highlight border-0 min-w-xl ml-16 pr-16",data:D,showPagination:!1,defaultSorted:[{id:"firstname",asc:!0}],columns:[{Header:"Aadhaar No.",accessor:"aadhaarno"},{Header:"Name",accessor:"firstname",style:{whiteSpace:"unset"},getProps:function(){return{style:{paddingLeft:"8px"}}},Cell:function(e){return e.original.firstname+" "+e.original.lastname}},{Header:"Staff No.",accessor:"staffno"},{Header:"Gender",accessor:"gender",style:{whiteSpace:"unset"}},{Header:"Designation",accessor:"designation"},{Header:"DOB",accessor:"dob",Cell:function(e){return r.a.createElement("div",{className:"pl-8"},e.original.dob?y()(e.original.dob).format("Do MMM YYYY"):"")}},{Header:"Joined On",accessor:"doj",Cell:function(e){return r.a.createElement("div",{className:"pl-8"},e.original.doj?y()(e.original.doj).format("Do MMM YYYY"):"")}},{Header:"Religion",accessor:"religion"},{Header:"",sortable:!1,Cell:function(t){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(g.a,{title:"Edit Staff"},r.a.createElement(b.a,{onClick:function(n){var r;n.stopPropagation(),a(p.a.setSelectedStaff(t.original)),r=t.original.id,e.history.push({pathname:"/staff/".concat(r)})}},r.a.createElement(s.a,null,"edit"))),r.a.createElement(g.a,{title:"Delete / Inactivate"},r.a.createElement(n.Fragment,null,r.a.createElement(b.a,{onClick:function(e){e.stopPropagation(),R(!0,t.original)}},r.a.createElement(s.a,null,"delete")))))}}]}),r.a.createElement(N.e,{open:i.open,title:"Are you sure you want to delete this Staff?",onConfirm:function(){i.data&&i.data.id&&_({variables:{id:i.data.id}})},onCancel:function(){return R(!1)}},r.a.createElement("div",null,i.data?i.data.firstname+" "+i.data.lastname:"")))};a.default=Object(c.a)("staff",i.a)((function(e){var a=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:r.a.createElement(S,{pageLayout:a}),content:r.a.createElement(F,e),ref:a,innerScroll:!0}))}))}}]);