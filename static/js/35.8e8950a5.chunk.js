(this["webpackJsonpsivanandha-vidyashram-seithur"]=this["webpackJsonpsivanandha-vidyashram-seithur"]||[]).push([[35],{1381:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(877),o=t(16),l=t(195),i=t(826),d=t(757),s=t(812),u=t(11),m=t(26),p=t.n(m),b=t(32),E=t.n(b),j=t(192),O=t(70),f=t(60);var y=function(){var e=Object(u.b)(),a=Object(u.c)((function(e){return e.master.subjectReducer.searchText})),t=Object(j.d)(f.k.querySubjects),n=t.loading,c=t.error,l=t.data;if(c)return r.a.createElement("h1",null,"Error...");if(n||!l)return r.a.createElement(O.s,null);var m=function(e,a){return 0===a.length?e:o.u.filterArrayByString(e,a)}(l.getSubjects,a.trim());return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.o,{columns:[{id:"subname",Header:"Subject Name",accessor:"name",style:{whiteSpace:"unset"},getProps:function(){return{style:{paddingLeft:"32px"}}}},{id:"subcode",Header:"Subject Code",accessor:function(e){return e.subcode},Cell:function(e){return r.a.createElement("div",{className:p()("inline p-4 rounded truncate"),style:{backgroundColor:e.row.original.color,minWidth:"42px"}},e.row.original.subcode)}},{id:"updatedby",Header:"Last Updated by",accessor:function(e){return e.updatedby?e.updatedby:e.createdby}},{id:"updatedon",Header:"Last Updated on",accessor:function(e){return e.updatedon?e.updatedon:e.createdon},Cell:function(e){return r.a.createElement("div",{className:"pl-8"},e.row.original.updatedon?E()(e.row.original.updatedon).format("MMM Do YYYY, h:mm a"):E()(e.row.original.createdon).format("MMM Do YYYY, h:mm a"))}},{id:"editSubject",Header:"",sortable:!1,Cell:function(a){return r.a.createElement("div",{className:"flex items-center"},r.a.createElement(i.a,{title:"Edit Subject"},r.a.createElement(d.a,{onClick:function(t){t.stopPropagation(),e(f.j.openEditDialog(a.row.original,"edit"))}},r.a.createElement(s.a,null,"edit"))),r.a.createElement(i.a,{title:"Delete / Inactivate"},r.a.createElement(d.a,{onClick:function(t){t.stopPropagation(),e(f.j.openEditDialog(a.row.original,"delete"))}},r.a.createElement(s.a,null,"delete"))))}}],data:m,hasExport:!0,exportMode:"DATA"}))},h=t(174),g=t(173),v=t(758),x=t(832),S=t(804);var N=function(e){var a=Object(u.b)(),t=Object(u.c)((function(e){return e.master.subjectReducer.searchText})),n=Object(u.c)((function(e){return e.fuse.settings.mainTheme}));return r.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},r.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement(o.a,{animation:"transition.expandIn",delay:300},r.a.createElement(s.a,{className:"text-32 mr-12"},"library_books")),r.a.createElement(o.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(h.a,{variant:"h6",className:"hidden sm:flex"},"Subject")))),r.a.createElement("div",{className:"flex flex-1 items-center justify-center pr-8 sm:px-12"},r.a.createElement(S.a,{theme:n},r.a.createElement(o.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(g.a,{className:"flex p-4 items-center w-full max-w-512 px-8 py-4",elevation:1},r.a.createElement(s.a,{className:"mr-8",color:"action"},"search"),r.a.createElement(v.a,{placeholder:"Search subject name",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:t,inputProps:{"aria-label":"Search"},onChange:function(e){return a(f.j.setSubjectSearchText(e))}}))))),r.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},r.a.createElement(x.a,{onClick:function(){return a(f.j.openNewDialog())},variant:"contained"},r.a.createElement("span",{className:"hidden sm:flex normal-case"},"Add New Subject"),r.a.createElement("span",{className:"flex sm:hidden normal-case"},"New"))))},_=t(8),D=t(10),T=t(829),w=t(823),C=t(833),I=t(834),L=t(836),A=t(835),k=t(809),G=t(1041),P=t(79),R=t.n(P),W=t(846),Y=t(101),q=Object(k.a)((function(e){return{color:{width:"36px",height:"36px",borderRadius:"4px"},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{}}})),H={id:"",name:"",subcode:"",color:""};var U=function(e){var a,t=Object(u.b)(),c=q(e),l=Object(n.useRef)(null),i=Object(u.c)((function(e){return e.master.subjectReducer.subjDialog})),d=Object(Y.b)(H),m=d.form,b=d.setForm,E=Object(n.useState)(!1),j=Object(D.a)(E,2),y=j[0],g=j[1],v=Object(n.useState)(!1),S=Object(D.a)(v,2),N=S[0],k=S[1],P=Object(n.useState)("#e5e5e5"),U=Object(D.a)(P,2),M=U[0],J=U[1],z=Object(n.useState)(null),B=Object(D.a)(z,2),F=B[0],X=B[1];a="new"===i.type?f.k.addSubject:"edit"===i.type?f.k.editSubject:f.k.delSubject;var Q=Object(n.useCallback)((function(){"edit"!==i.type&&"delete"!==i.type||!i.data||b(Object(_.a)({},i.data)),"new"===i.type&&b(Object(_.a)({},H))}),[i.data,i.type,b]);Object(n.useEffect)((function(){i.props.open&&Q()}),[i.props.open,Q]);var V=function(){g(!1)},K=function(){g(!0)},Z=function(){"edit"===i.type?t(f.j.closeEditDialog()):t(f.j.closeNewDialog()),ee()},$=function(){k(!N)},ee=function(){k(!1)},ae=function(e,a){J(e.hex),X(e.hex)};return r.a.createElement(T.a,Object.assign({},i.props,{onClose:Z,fullWidth:!0,maxWidth:"sm"}),r.a.createElement(w.a,{position:"static",elevation:1},r.a.createElement(C.a,{className:"flex w-full"},r.a.createElement(h.a,{variant:"subtitle1",color:"inherit"},"new"===i.type?"New Subject":"edit"===i.type?"Edit Subject":"Delete Subject"))),r.a.createElement(I.a,{classes:{root:"p-0"}},r.a.createElement("div",{className:"px-16 sm:px-24"},r.a.createElement(W.a,{mutation:a,onCompleted:function(e){Z()}},(function(e,a){var t=a.loading,d=a.error;a.data;return r.a.createElement(n.Fragment,null,r.a.createElement(R.a,{onValid:K,onInvalid:V,ref:l,onValidSubmit:function(a){"new"===i.type?e({variables:{name:a.name,subcode:a.subjcode,color:M,orderby:Number(a.orderby)},refetchQueries:[{query:f.k.querySubjects}]}):"edit"===i.type?e({variables:{id:m.id,name:a.name,subcode:a.subjcode,color:M,orderby:Number(a.orderby)},refetchQueries:[{query:f.k.querySubjects}]}):"delete"===i.type&&e({variables:{id:m.id},refetchQueries:[{query:f.k.querySubjects}]})}},r.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-col"},r.a.createElement(o.x,{className:"mb-8",type:"text",name:"name",label:"Subject Name",value:m.name,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},InputProps:{endAdornment:r.a.createElement(L.a,{position:"end"},r.a.createElement(s.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",required:!0}),r.a.createElement(o.x,{className:"mb-8",type:"text",name:"subjcode",label:"Subject Code",value:m.subcode,validations:{maxLength:8},validationErrors:{maxLength:"You can not type in more than 8 characters"},InputProps:{endAdornment:r.a.createElement(L.a,{position:"end"},r.a.createElement(s.a,{className:"text-20",color:"action"},"wc"))},variant:"outlined",required:!0}),r.a.createElement("div",{className:"flex flex-row"},r.a.createElement(o.x,{className:"mb-8 mr-8 w-1/4",type:"number",name:"orderby",label:"Order by",value:m.orderby,InputProps:{endAdornment:r.a.createElement(L.a,{position:"end"},r.a.createElement(s.a,{className:"text-20",color:"action"},"sort"))},variant:"outlined",required:!0}),r.a.createElement("div",{className:p()(c.swatch,"flex flex-row items-center mb-8"),onClick:$},r.a.createElement("div",{className:p()(c.color,"flex flex-row items-center inline p-4 rounded truncate"),style:{background:F?M:m.color}}),r.a.createElement("div",{className:"items-center pl-16"},"Selected Color:"," ",F?M:m.color)),N?r.a.createElement("div",{className:c.cover,onClick:ee},r.a.createElement(G.SwatchesPicker,{color:M,onChange:ae,width:"100%",height:"150px"})):null))),r.a.createElement(O.t,{createdby:m.createdby,createdon:m.createdon,updatedby:m.updatedby,updatedon:m.updatedon}),t&&r.a.createElement(O.s,{message:"Saving data..."}),d&&r.a.createElement(h.a,{className:"pt-32"},"Error : Please try again! ",r.a.createElement("br",null),d.message," ",r.a.createElement("br",null)))})))),"new"===i.type&&r.a.createElement(A.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){Z()}},"Close"),r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){l.current.submit()},disabled:!y},"Add")),"edit"===i.type&&r.a.createElement(A.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){Z()}},"Close"),r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){l.current.submit()},disabled:!y},"Save")),"delete"===i.type&&r.a.createElement(A.a,{className:"justify-between pl-8 sm:pl-16"},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){Z()}},"Close"),r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){l.current.submit()}},"Delete")))};a.default=Object(l.a)("master",c.a)((function(e){var a=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:r.a.createElement(N,{pageLayout:a}),content:r.a.createElement(y,null),ref:a,innerScroll:!0}),r.a.createElement(U,null))}))},877:function(e,a,t){"use strict";var n=t(47),r=t(8),c=t(60),o={data:[],dialog:{type:"edit",props:{open:!1},data:null,mode:null}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.h.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.h.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},i={data:[],searchText:"",ayearDialog:{type:"edit",props:{open:!1},data:null,mode:null}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.n.SET_AYEAR_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.n.OPEN_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{ayearDialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case c.n.CLOSE_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{ayearDialog:{type:"new",props:{open:!1},data:null}});case c.n.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{ayearDialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.n.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{ayearDialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},s={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.g.SET_EDU_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.g.OPEN_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case c.g.CLOSE_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"new",props:{open:!1},data:null}});case c.g.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.g.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!1},data:null}});default:return e}},m={data:[],searchText:"",subjDialog:{type:"edit",props:{open:!1},data:null,mode:null}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.j.GET_SUBJECTS:return Object(r.a)(Object(r.a)({},e),{},{data:a.payload});case c.j.SET_SUBJECTS_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.j.OPEN_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{subjDialog:{type:"new",props:{open:!0},data:null}});case c.j.CLOSE_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{subjDialog:{type:"new",props:{open:!1},data:null}});case c.j.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{subjDialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.j.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{subjDialog:{type:a.mode,props:{open:!1},data:null}});case c.j.SET_SUBJECTS_PAGINATION:return Object(r.a)(Object(r.a)({},e),{},{current:a.current,pageSize:a.pageSize});default:return e}},b={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.b.SET_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.b.OPEN_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{props:{open:!0},data:a.data,mode:a.mode}});case c.b.CLOSE_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{props:{open:!1},data:null,mode:a.mode}});case c.b.SET_CLASS_SEC_PAGINATION:return Object(r.a)(Object(r.a)({},e),{},{current:a.current,pageSize:a.pageSize});case c.b.SET_SUBJECT_IDS:return Object(r.a)(Object(r.a)({},e),{},{subjectIds:a.subjectIds});default:return e}},j={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case c.d.SET_DCONFIG_SEARCH_TEXT:return Object(r.a)(Object(r.a)({},e),{},{searchText:a.searchText});case c.d.OPEN_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"new",props:{open:!0},data:a.data,mode:a.mode}});case c.d.CLOSE_NEW_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"new",props:{open:!1},data:null}});case c.d.OPEN_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!0},data:a.data,mode:a.mode}});case c.d.CLOSE_EDIT_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:a.mode,props:{open:!1},data:null}});case c.d.CLOSE_ONLY_DIALOG:return Object(r.a)(Object(r.a)({},e),{},{dialog:{type:"close",props:{open:!1},data:null}});default:return e}},f=Object(n.d)({schoolProfileReducer:l,ayearReducer:d,edusysReducer:u,subjectReducer:p,classReducer:E,dconfigReducer:O});a.a=f}}]);