(this["webpackJsonpsivanandha-webapp"]=this["webpackJsonpsivanandha-webapp"]||[]).push([[30],{1391:function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"SET_SEARCH_TEXT",(function(){return s})),a.d(n,"OPEN_NEW_DIALOG",(function(){return m})),a.d(n,"CLOSE_NEW_DIALOG",(function(){return u})),a.d(n,"OPEN_EDIT_DIALOG",(function(){return f})),a.d(n,"CLOSE_EDIT_DIALOG",(function(){return y})),a.d(n,"CLOSE_ONLY_DIALOG",(function(){return p})),a.d(n,"setSearchText",(function(){return E})),a.d(n,"openNewDialog",(function(){return g})),a.d(n,"closeNewDialog",(function(){return w})),a.d(n,"openEditDialog",(function(){return h})),a.d(n,"closeEditDialog",(function(){return v})),a.d(n,"closeOnlyDialog",(function(){return b}));var o={};a.r(o),a.d(o,"getHolidays",(function(){return j})),a.d(o,"getHolidaysByRange",(function(){return C})),a.d(o,"getHoliday",(function(){return I})),a.d(o,"addHoliday",(function(){return T})),a.d(o,"editHoliday",(function(){return A})),a.d(o,"delHoliday",(function(){return _}));var r=a(0),i=a.n(r),l=a(16),c=a(158),d=a(11),s="[HOLIDAY] SET SEARCH TEXT",m="[HOLIDAY] OPEN NEW DIALOG",u="[HOLIDAY] CLOSE NEW DIALOG",f="[HOLIDAY] OPEN EDIT DIALOG",y="[HOLIDAY] CLOSE EDIT DIALOG",p="[HOLIDAY] CLOSE ONLY DIALOG";function E(t){return{type:s,searchText:t.target.value}}function g(){return{type:m}}function w(){return{type:u}}function h(t,e){return{type:f,data:t,mode:e}}function v(){return{type:y}}function b(){return{type:p}}var O=a(14),D=a(13),x=a.n(D);function N(){var t=Object(O.a)(["\n\tmutation delHoliday($id: String!) {\n\t\tdelHoliday(id: $id) {\n\t\t\tMessages\n\t\t}\n\t}\n"]);return N=function(){return t},t}function H(){var t=Object(O.a)(["\n\tmutation editHoliday(\n\t\t$id: String!\n\t\t$occasion: String\n\t\t$description: String\n\t\t$holidaytype: String\n\t\t$fromdate: DateTimeType\n\t\t$fdayofweek: String\n\t\t$todate: DateTimeType\n\t\t$tdayofweek: String\n\t\t$comments: String\n\t\t$status: Boolean\n\t) {\n\t\teditHoliday(\n\t\t\tid: $id\n\t\t\tinput: {\n\t\t\t\toccasion: $occasion\n\t\t\t\tdescription: $description\n\t\t\t\tholidaytype: $holidaytype\n\t\t\t\tfromdate: $fromdate\n\t\t\t\tfdayofweek: $fdayofweek\n\t\t\t\ttodate: $todate\n\t\t\t\ttdayofweek: $tdayofweek\n\t\t\t\tcomments: $comments\n\t\t\t\tstatus: $status\n\t\t\t}\n\t\t) {\n\t\t\tMessages\n\t\t}\n\t}\n"]);return H=function(){return t},t}function k(){var t=Object(O.a)(["\n\tmutation addHoliday(\n\t\t$occasion: String\n\t\t$description: String\n\t\t$holidaytype: String\n\t\t$fromdate: DateTimeType\n\t\t$fdayofweek: String\n\t\t$todate: DateTimeType\n\t\t$tdayofweek: String\n\t\t$comments: String\n\t\t$status: Boolean\n\t) {\n\t\taddHoliday(\n\t\t\tinput: {\n\t\t\t\toccasion: $occasion\n\t\t\t\tdescription: $description\n\t\t\t\tholidaytype: $holidaytype\n\t\t\t\tfromdate: $fromdate\n\t\t\t\tfdayofweek: $fdayofweek\n\t\t\t\ttodate: $todate\n\t\t\t\ttdayofweek: $tdayofweek\n\t\t\t\tcomments: $comments\n\t\t\t\tstatus: $status\n\t\t\t}\n\t\t) {\n\t\t\tid\n\t\t}\n\t}\n"]);return k=function(){return t},t}function $(){var t=Object(O.a)(["\n\tquery getHoliday($name: String) {\n\t\tgetHoliday(name: $name) {\n\t\t\tid\n\t\t\toccasion\n\t\t\tdescription\n\t\t\tholidaytype\n\t\t\tfromdate\n\t\t\tfdayofweek\n\t\t\ttodate\n\t\t\ttdayofweek\n\t\t\tcomments\n\t\t\tstatus\n\t\t\tcreatedby\n\t\t\tcreatedon\n\t\t\tupdatedby\n\t\t\tupdatedon\n\t\t}\n\t}\n"]);return $=function(){return t},t}function S(){var t=Object(O.a)(["\n\tquery getHolidaysByRange($fromdate: DateTimeType, $todate: DateTimeType) {\n\t\tgetHolidaysByRange(fromdate: $fromdate, todate: $todate) {\n\t\t\tid\n\t\t\toccasion\n\t\t\tdescription\n\t\t\tholidaytype\n\t\t\tfromdate\n\t\t\tfdayofweek\n\t\t\ttodate\n\t\t\ttdayofweek\n\t\t\tcomments\n\t\t\tstatus\n\t\t\tcreatedby\n\t\t\tcreatedon\n\t\t\tupdatedby\n\t\t\tupdatedon\n\t\t}\n\t}\n"]);return S=function(){return t},t}function L(){var t=Object(O.a)(["\n\tquery {\n\t\tgetHolidays {\n\t\t\tid\n\t\t\toccasion\n\t\t\tdescription\n\t\t\tholidaytype\n\t\t\tfromdate\n\t\t\tfdayofweek\n\t\t\ttodate\n\t\t\ttdayofweek\n\t\t\tcomments\n\t\t\tstatus\n\t\t\tcreatedby\n\t\t\tcreatedon\n\t\t\tupdatedby\n\t\t\tupdatedon\n\t\t}\n\t}\n"]);return L=function(){return t},t}var j=x()(L()),C=x()(S()),I=x()($()),T=x()(k()),A=x()(H()),_=x()(N()),Y={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case n.SET_SEARCH_TEXT:return Object(d.a)({},t,{searchText:e.searchText});case n.OPEN_NEW_DIALOG:return Object(d.a)({},t,{dialog:{type:"new",props:{open:!0},data:e.data,mode:e.mode}});case n.CLOSE_NEW_DIALOG:return Object(d.a)({},t,{dialog:{type:"new",props:{open:!1},data:null}});case n.OPEN_EDIT_DIALOG:return Object(d.a)({},t,{dialog:{type:e.mode,props:{open:!0},data:e.data,mode:e.mode}});case n.CLOSE_EDIT_DIALOG:return Object(d.a)({},t,{dialog:{type:e.mode,props:{open:!1},data:null}});case n.CLOSE_ONLY_DIALOG:return Object(d.a)({},t,{dialog:{type:"close",props:{open:!1},data:null}});default:return t}},P=a(1011),M=a(157),W=a(1036),B=a(8);var R=function(t){var e=Object(B.b)();return i.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},i.a.createElement("div",{className:"flex items-center"},i.a.createElement(l.a,{animation:"transition.expandIn",delay:300},i.a.createElement(P.a,{className:"text-32 mr-12"},"child_care")),i.a.createElement(l.a,{animation:"transition.slideLeftIn",delay:300},i.a.createElement(M.a,{variant:"h6",className:"hidden sm:flex"},"Holidays"))),i.a.createElement(l.a,{animation:"transition.slideRightIn",delay:300},i.a.createElement(W.a,{onClick:function(){e(n.openNewDialog())},variant:"contained"},i.a.createElement("span",{className:"hidden sm:flex normal-case"},"Add New Holiday"),i.a.createElement("span",{className:"flex sm:hidden normal-case"},"New"))))},q=a(1030),F=a(963),X=a(221),J=a(64),V=a.n(J),z=a(218),K=a(75);var Q=function(){var t=Object(B.b)(),e=Object(B.c)((function(t){return t.holiday.searchText})),a=Object(B.c)((function(t){return t.holiday.dialog})),c=Object(z.d)(o.getHolidays),d=c.loading,s=c.error,m=c.data,u=c.refetch;if(Object(r.useEffect)((function(){a.props.open||"close"===a.type||u()}),[a.props.open,a.type,u]),s)return i.a.createElement("h1",null,"Error...");if(d||!m)return i.a.createElement(K.j,null);var f=function(t,e){return 0===e.length?t:l.v.filterArrayByString(t,e)}(m.getHolidays,e.trim());return i.a.createElement("div",{className:"w-full flex flex-col"},i.a.createElement(X.b,{className:"-striped -highlight border-0 min-w-xl ",data:f,showPagination:!1,defaultSorted:[{id:"fromdate",asc:!0}],columns:[{Header:function(){return i.a.createElement("span",{style:{whiteSpace:"pre-line !important",wordWrap:"break-word"}},"Occasion")},accessor:"occasion",style:{whiteSpace:"unset"},getProps:function(){return{style:{paddingLeft:"8px"}}}},{Header:"Description",accessor:"description",style:{whiteSpace:"unset"}},{Header:"Holiday Type",accessor:"holidaytype"},{Header:"Begin Date",accessor:"fromdate",Cell:function(t){return i.a.createElement("div",{className:"pl-8"},t.original.fromdate?V()(t.original.fromdate).format("Do MMM YYYY"):"")}},{Header:"End Date",accessor:"todate",Cell:function(t){return i.a.createElement("div",{className:"pl-8"},t.original.todate?V()(t.original.todate).format("Do MMM YYYY"):"")}},{Header:"Begin Day",accessor:"fdayofweek"},{Header:"End Day",accessor:"tdayofweek"},{Header:"Comments",accessor:"comments"},{Header:"Status",accessor:"status",Cell:function(t){return t.original.status?i.a.createElement(P.a,{className:"text-green text-20"},"check_circle"):i.a.createElement(P.a,{className:"text-red text-20"},"remove_circle")}},{Header:"",sortable:!1,Cell:function(e){return i.a.createElement("div",{className:"flex items-center"},i.a.createElement(q.a,{title:"Edit Holiday"},i.a.createElement(F.a,{onClick:function(a){a.stopPropagation(),t(n.openEditDialog(e.original,"edit"))}},i.a.createElement(P.a,null,"edit"))),i.a.createElement(q.a,{title:"Delete / Inactivate"},i.a.createElement(F.a,{onClick:function(a){a.stopPropagation(),t(n.openEditDialog(e.original,"delete"))}},i.a.createElement(P.a,null,"delete"))))}}]}))},U=a(10),Z=a(1033),tt=a(1027),et=a(1037),at=a(1038),nt=a(1010),ot=a(1024),rt=a(1046),it=a(1039),lt=a(1065),ct=a(979),dt=a(1389),st=a(109),mt=a(82),ut=a.n(mt),ft={id:"",occasion:"",description:"",holidaytype:"",fromdate:new Date,fdayofweek:V()(new Date).format("dddd"),todate:new Date,tdayofweek:V()(new Date).format("dddd"),comments:"",status:!0};var yt=function(t){var e=Object(B.b)(),a=Object(B.c)((function(t){return t.holiday.dialog})),c=Object(r.useState)(!1),s=Object(U.a)(c,2),m=s[0],u=s[1],f=Object(st.b)(ft),y=f.form,p=f.setForm,E=f.setInForm,g=Object(r.useRef)(null),w=o.editHoliday;"new"===a.type?w=o.addHoliday:"edit"===a.type?w=o.editHoliday:"delete"===a.type&&(w=o.delHoliday);var h=Object(z.c)(w,{onCompleted:function(t){t.data;H()}}),v=Object(U.a)(h,2),b=v[0],O=v[1],D=O.loading,x=O.error,N=Object(r.useCallback)((function(){"edit"!==a.type&&"delete"!==a.type||!a.data||p(Object(d.a)({},a.data)),"new"===a.type&&p(Object(d.a)({},ft))}),[a.data,a.type,p]);Object(r.useEffect)((function(){return a.props.open&&N(),function(){p(ft)}}),[a.props.open,N,p]);var H=function(){"edit"===a.type?e(n.closeEditDialog()):e(n.closeNewDialog())},k=function(){e(n.closeOnlyDialog())};return i.a.createElement(Z.a,Object.assign({},a.props,{onClose:H,fullWidth:!0,maxWidth:"md"}),i.a.createElement(tt.a,{position:"static",elevation:1},i.a.createElement(et.a,{className:"flex w-full"},i.a.createElement(M.a,{variant:"subtitle1",color:"inherit"},"new"===a.type?"New Holiday":"edit"===a.type?"Edit Holiday":"Delete Holiday"))),i.a.createElement(at.a,{classes:{root:"p-0"}},i.a.createElement("div",{className:"px-16 sm:px-24"},i.a.createElement(r.Fragment,null,i.a.createElement(ut.a,{onValid:function(){u(!0)},onInvalid:function(){u(!1)},ref:g,onValidSubmit:function(t){"new"===a.type?b({variables:{occasion:t.occasion,description:t.description,holidaytype:y.holidaytype,fromdate:y.fromdate,fdayofweek:y.fdayofweek,todate:y.todate,tdayofweek:y.tdayofweek,comments:t.comments,status:y.status}}):"edit"===a.type?b({variables:{id:y.id,occasion:t.occasion,description:t.description,holidaytype:y.holidaytype,fromdate:y.fromdate,fdayofweek:y.fdayofweek,todate:y.todate,tdayofweek:y.tdayofweek,comments:t.comments,status:y.status}}):"delete"===a.type&&b({variables:{id:y.id}})}},i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row justify-between"},i.a.createElement(l.y,{className:"pr-8 mb-8 mt-8",type:"text",name:"occasion",label:"Holiday Name",value:y.occasion,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},InputProps:{endAdornment:i.a.createElement(nt.a,{position:"end"},i.a.createElement(P.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",required:!0}),i.a.createElement(ct.a,{utils:lt.a},i.a.createElement(dt.a,{className:"ml-8",variant:"outlined",format:"dd/MM/yyyy",margin:"normal",id:"fromdate",label:"Begin Date",value:y.fromdate,onChange:function(t){E("fromdate",t);var e=V()(t).format("dddd");E("fdayofweek",e)},animateYearScrolling:!0}),i.a.createElement(dt.a,{className:"ml-8",variant:"outlined",format:"dd/MM/yyyy",margin:"normal",id:"fromdate",label:"End Date",value:y.todate,onChange:function(t){E("todate",t);var e=V()(t).format("dddd");E("tdayofweek",e)},animateYearScrolling:!0})),i.a.createElement(ot.a,{control:i.a.createElement(rt.a,{checked:y.status,onChange:function(t){E("isactive",t.target.checked)},value:y.status,color:"primary"}),label:"isActive"})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-8 flex flex-row justify-end w-1/2"},i.a.createElement("span",{className:"w-1/2"},"Begin Day: ",y.fdayofweek),i.a.createElement("span",{className:"w-1/2"},"End Day: ",y.tdayofweek)),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(l.y,{className:"pr-8 mb-8 mt-8",type:"text",name:"description",label:"Holiday Description",value:y.description,multiline:!0,rows:5,validations:{maxLength:250},validationErrors:{maxLength:"You can not type in more than 250 characters"},InputProps:{endAdornment:i.a.createElement(nt.a,{position:"end"},i.a.createElement(P.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",fullWidth:!0,required:!0})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(K.f,{formName:y,filterName:"HOLIDAY_TYPE",fieldName:"holidaytype",label:"Holiday Type",cssClass:"w-1/2",onDDChange:function(t,e){E(e,t.label)}})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-8 flex flex-row"},i.a.createElement(l.y,{className:"pr-8 mb-8 mt-8",type:"text",name:"comments",label:"Comments (if any)",value:y.comments,multiline:!0,rows:3,validations:{maxLength:250},validationErrors:{maxLength:"You can not type in more than 250 characters"},InputProps:{endAdornment:i.a.createElement(nt.a,{position:"end"},i.a.createElement(P.a,{className:"text-20",color:"action"},"event_note"))},variant:"outlined",fullWidth:!0,required:!0}))),D&&i.a.createElement(K.j,{message:"Saving data..."}),x&&i.a.createElement(M.a,{className:"pt-32"},"Error : Please try again! ",i.a.createElement("br",null),x.message," ",i.a.createElement("br",null))))),"new"===a.type&&i.a.createElement(it.a,{className:"justify-between pl-8 sm:pl-16"},i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){k()}},"Close"),i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){g.current.submit()},disabled:!m},"Add Holiday")),"edit"===a.type&&i.a.createElement(it.a,{className:"justify-between pl-8 sm:pl-16"},i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){k()}},"Close"),i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){g.current.submit()},disabled:!m},"Save")),"delete"===a.type&&i.a.createElement(it.a,{className:"justify-between pl-8 sm:pl-16"},i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){k()}},"Close"),i.a.createElement(W.a,{variant:"contained",color:"primary",onClick:function(){g.current.submit()}},"Delete")))};e.default=Object(c.a)("holiday",G)((function(){var t=Object(r.useRef)(null);return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:i.a.createElement(R,{pageLayout:t}),content:i.a.createElement(Q,null),ref:t,innerScroll:!0}),i.a.createElement(yt,null))}))}}]);