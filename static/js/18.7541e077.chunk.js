(this["webpackJsonpsivanandha-webapp"]=this["webpackJsonpsivanandha-webapp"]||[]).push([[18],{1073:function(e,a,t){"use strict";var n={};t.r(n),t.d(n,"SET_SEARCH_TEXT",(function(){return l})),t.d(n,"SET_STAFF_SELECTED",(function(){return r})),t.d(n,"setSearchText",(function(){return o})),t.d(n,"setSelectedStaff",(function(){return i}));var l="[STAFF] SET SEARCH TEXT",r="[STAFF] SET STAFF SELECTED";function o(e){return{type:l,searchText:e.target.value}}function i(e){return{type:r,data:e}}t.d(a,"a",(function(){return n}))},1112:function(e,a,t){"use strict";var n=t(44),l=t(11),r=t(1073),o={selectedStaff:{},searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case r.a.SET_SEARCH_TEXT:return Object(l.a)({},e,{searchText:a.searchText});case r.a.SET_STAFF_SELECTED:return Object(l.a)({},e,{selectedStaff:a.data});default:return e}},c=Object(n.d)({staffReducer:i});a.a=c},1403:function(e,a,t){"use strict";t.r(a);var n=t(33),l=t(11),r=t(10),o=t(0),i=t.n(o),c=t(157),s=t(1011),m=t(1043),d=t(1028),u=t(1048),f=t(1024),b=t(1045),h=t(1036),E=t(412),p=t(1017),v=t(1385),g=t(82),x=t.n(g),N=t(16),O=t(36),S=t(8),j=t(217),y=t(93),w=t(109),C=t(75),F=t(22),T=t(378),D=t(158),I=t(1112),L=t(194),M=t(1030),Y=t(963),_=t(64),H=t.n(_),P=t(221),A={upName:"",uploadType:"",size:"",type:""};var R=function(e){var a,t=Object(S.b)(),n=e.staffId,l=Object(o.useState)(!1),m=Object(r.a)(l,2),d=m[0],u=m[1],f=Object(w.b)(A),b=f.form,h=(f.setForm,f.setInForm,f.handleChange),E=Object(j.b)(T.h),p=Object(r.a)(E,2),v=p[0],g=p[1],O=g.loading,y=(g.error,g.data),D=Object(j.d)(T.g,{variables:{id:n,searchfor:"STAFF"}}),I=D.loading,_=(D.error,D.data),R=(_=void 0===_?{}:_).getDocuments,k=void 0===R?[]:R,B=D.refetch,U=Object(j.c)(T.b,{onCompleted:function(e){var a=e.data;a&&a.delDocuments&&(t(F.j({message:"Selected Document deleted successfully",variant:"info"})),B())}}),V=Object(r.a)(U,2),W=V[0];if(V[1],Object(o.useEffect)((function(){v({variables:{id:e.staffId,isactive:!0}})}),[]),!n)return i.a.createElement("h1",null,"Staff Id not found");if(I||O)return i.a.createElement(N.i,null);var q=k;return i.a.createElement(o.Fragment,null,i.a.createElement(L.a,{elevation:1,style:{background:"#F7F7F7"}},i.a.createElement(x.a,null,i.a.createElement(c.a,{variant:"h6",color:"inherit",className:"p-8"},"Profile Photo"),i.a.createElement("div",{className:"p-16 sm:p-8 my-16 flex flex-row"},i.a.createElement(C.n,{moduleId:"upload_staff_photos",moduleName:"STAFF",upName:"PROFILEPHOTO",uploadType:"PHOTOS",staffId:n,canEnable:!0,displayName:"Change Profile Photo",mediaUrl:null===y||void 0===y||null===(a=y.getStaff)||void 0===a?void 0:a.photo})))),i.a.createElement(L.a,{elevation:1,className:"mt-32",style:{background:"#F7F7F7"}},i.a.createElement(x.a,{onValid:function(){u(!0)},onInvalid:function(){u(!1)}},i.a.createElement(c.a,{variant:"h6",color:"inherit",className:"p-8"},"Attach Documents"),i.a.createElement("div",{className:"p-16 sm:p-8 mt-16 flex flex-col"},i.a.createElement(N.y,{className:"mb-16 w-1/2",autoFocus:!0,name:"upName",label:"Name of the Document",validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},variant:"outlined",required:!0,onChange:h}),i.a.createElement(C.n,{moduleId:"upload_staff_docs",moduleName:"STAFF",upName:b.upName,uploadType:"DOCS",staffId:n,canEnable:d,displayName:"Attach Documents"}))),i.a.createElement(P.b,{className:"-striped -highlight border-0 min-w-xl ml-16 mt-16 pr-16",data:q,showPagination:!1,defaultSorted:[{id:"createdon",desc:!0}],columns:[{Header:"Name",accessor:"name"},{Header:"Module Name",accessor:"modulename"},{Header:"Doc id",accessor:"docid"},{Header:"Size",accessor:"filesize"},{Header:"Type",accessor:"filetype"},{Header:"Created by",accessor:"createdby"},{Header:"Created on",accessor:"createdon",Cell:function(e){return i.a.createElement("div",{className:"pl-8"},e.original.createdon?H()(e.original.createdon).format("Do MMM YYYY"):"")}},{Header:"",sortable:!1,Cell:function(e){return i.a.createElement("div",{className:"flex items-center"},i.a.createElement(M.a,{title:"Edit Staff"},i.a.createElement(Y.a,{onClick:function(e){e.stopPropagation()}},i.a.createElement(s.a,null,"cloud_download"))),i.a.createElement(M.a,{title:"Delete / Inactivate"},i.a.createElement(o.Fragment,null,i.a.createElement(Y.a,{onClick:function(a){a.stopPropagation(),function(e){var a=e.id,t=e.modulename,n=e.docid;W({variables:{id:a,modulename:t,doctype:"DOCS",docid:n}})}(e.original)}},i.a.createElement(s.a,null,"delete")))))}}]})))},k=(Object(p.a)((function(e){return{productImageFeaturedStar:{position:"absolute",top:0,right:0,color:E.a[400],opacity:0},productImageUpload:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},productImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{"& $productImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:e.shadows[3],"& $productImageFeaturedStar":{opacity:1},"&:hover $productImageFeaturedStar":{opacity:1}}}}})),{id:"",aadhaarno:"",staffno:"",firstname:"",lastname:"",gender:"Female",designation:"Teacher",dob:new Date,doj:new Date,nationality:"Indian",religion:"Hindu",castecategory:"",community:"",mothertongue:"Tamil",bloodgroup:"",identification:"",isactive:!0,notes:""});a.default=Object(D.a)("staff",I.a)((function(e){var a,t=Object(S.b)(),E=Object(o.useRef)(null),p=Object(y.g)(),g=Object(o.useState)(!0),D=Object(r.a)(g,2),I=D[0],L=D[1],M=Object(o.useState)(!1),Y=Object(r.a)(M,2),_=Y[0],H=Y[1],P=Object(o.useState)(0),A=Object(r.a)(P,2),B=A[0],U=A[1],V=Object(o.useState)(T.a),W=Object(r.a)(V,2),q=W[0],z=W[1],G=Object(w.b)(k),J=G.form,X=G.handleChange,$=G.setForm,K=G.setInForm,Q=Object(S.c)((function(e){return e.staff.staffReducer.selectedStaff})),Z=e.match.params.staffId,ee=Object(j.b)(T.h),ae=Object(r.a)(ee,2),te=ae[0],ne=ae[1],le=ne.loading,re=(ne.error,ne.data),oe=Object(j.c)(q,{onCompleted:function(e){(e&&e.addStaffProfile||e&&e.editStaffProfile)&&(t(F.j({message:"Staff details saved successfully",variant:"success"})),ue())}}),ie=Object(r.a)(oe,2),ce=ie[0],se=ie[1],me=se.loading;se.error,Object(o.useEffect)((function(){return function(){var a,t=e.match.params.staffId;"new"===t?(a=T.a,$(Object(l.a)({},k)),L(!1)):Q&&Q.id?Q&&Q.id&&(a=T.d,$(Q),L(!0)):(te({variables:{id:t,isactive:!0}}),a=T.d,L(!0)),z(a)}(),function(){z(null),$(null)}}),[e.match.params]),Object(o.useEffect)((function(){re&&re.getStaff&&$(re.getStaff)}),[re]);var de=function(e,a){K(a,e.label)},ue=function(){p.push({pathname:"/staff/list",data:!0})};return me?i.a.createElement(C.j,{message:"Saving data..."}):le&&!re?i.a.createElement(C.j,{message:"Loading Staff details..."}):i.a.createElement(N.l,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:J&&i.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},i.a.createElement("div",{className:"flex flex-col items-start max-w-full"},i.a.createElement(N.a,{animation:"transition.slideRightIn",delay:300},i.a.createElement(c.a,{className:"normal-case flex items-center sm:mb-12",component:O.a,role:"button",to:"/staff/list",color:"inherit"},i.a.createElement(s.a,{className:"mr-4 text-20"},"arrow_back"),"Staff")),i.a.createElement("div",{className:"flex items-center max-w-full"},i.a.createElement(N.a,{animation:"transition.expandIn",delay:300},i.a.createElement("img",{className:"w-32 sm:w-48 mr-8 sm:mr-16 rounded",src:"assets/images/ecommerce/product-image-placeholder.png",alt:J.name})),i.a.createElement("div",{className:"flex flex-col min-w-0"},i.a.createElement(N.a,{animation:"transition.slideLeftIn",delay:300},i.a.createElement(c.a,{className:"text-16 sm:text-20 truncate"},J.firstname?J.firstname+" "+J.lastname:"New Staff")),i.a.createElement(N.a,{animation:"transition.slideLeftIn",delay:300},i.a.createElement(c.a,{variant:"caption"},"Staff Detail")))))),contentToolbar:i.a.createElement(m.a,{value:B,onChange:function(e,a){U(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},i.a.createElement(d.a,{className:"h-64 normal-case",label:"Basic Info"}),I&&i.a.createElement(d.a,{className:"h-64 normal-case",label:"Documents"})),content:J&&i.a.createElement("div",{className:"flex flex-col items-start max-w-full"},i.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},0===B&&i.a.createElement(o.Fragment,null,i.a.createElement(x.a,{className:"flex flex-col w-full",onValid:function(){H(!0)},onInvalid:function(){H(!1)},ref:E,onValidSubmit:function(){ce({variables:Object(l.a)({},k,{},J)})}},i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row justify-between"},i.a.createElement(N.y,(a={autoFocus:!0,label:"Aadhaar No."},Object(n.a)(a,"autoFocus",!0),Object(n.a)(a,"id","aadhaarno"),Object(n.a)(a,"name","aadhaarno"),Object(n.a)(a,"value",J.aadhaarno),Object(n.a)(a,"variant","outlined"),Object(n.a)(a,"fullWidth",!0),Object(n.a)(a,"validations",{maxLength:50}),Object(n.a)(a,"onChange",X),a)),i.a.createElement(N.y,{className:"ml-16",label:"Staff No.",id:"staffno",name:"staffno",value:J.staffno,variant:"outlined",fullWidth:!0,validations:{maxLength:50},onChange:X,disabled:!0})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row justify-between"},i.a.createElement(N.y,{required:!0,label:"First Name",id:"firstname",name:"firstname",value:J.firstname,variant:"outlined",fullWidth:!0,validations:{maxLength:50},onChange:X}),i.a.createElement(N.y,{className:"ml-16",required:!0,label:"Last Name",id:"lastname",name:"lastname",value:J.lastname,variant:"outlined",fullWidth:!0,validations:{maxLength:50},onChange:X})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement("div",{className:"w-1/2 flex justify-between"},i.a.createElement(v.a,{label:"Date of Birth",inputVariant:"outlined",value:J.dob,onChange:function(e){return K("dob",e)},className:"mt-8 mb-16",format:"DD-MMM-YYYY"}),i.a.createElement(v.a,{label:"Date of Join",inputVariant:"outlined",value:J.doj,onChange:function(e){return K("doj",e)},className:"mt-8 mb-16 ml-8 mr-8",format:"DD-MMM-YYYY"})),i.a.createElement("div",{className:"w-1/2 flex justify-between"},i.a.createElement(u.a,{className:"ml-16","aria-label":"gender",name:"gender",value:J.gender,onChange:X},i.a.createElement(f.a,{value:"Female",control:i.a.createElement(b.a,null),label:"Female"}),i.a.createElement(f.a,{value:"Male",control:i.a.createElement(b.a,null),label:"Male"})),i.a.createElement(N.y,{className:"mb-8 mt-8",type:"text",name:"designation",label:"Designation",value:J.designation,validations:{maxLength:50},validationErrors:{maxLength:"You can not type in more than 50 characters"},variant:"outlined",onChange:X}))),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(C.f,{formName:J,filterName:"MOTHER_TONGUE",fieldName:"mothertongue",label:"Mother Tongue",cssClass:"w-1/2",onDDChange:de}),i.a.createElement(C.f,{formName:J,filterName:"RELIGION",fieldName:"religion",label:"Religion",cssClass:"w-1/2 ml-16",onDDChange:de})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(C.f,{formName:J,filterName:"COMMUNITY",fieldName:"community",label:"Community",cssClass:"w-1/2",onDDChange:de}),i.a.createElement(C.b,{formName:J,onDDChange:function(e,a){K(a,e.value)},cssClass:" min-h-56 w-1/2 ml-16"})),i.a.createElement("div",{className:"px-8 sm:px-8 mt-16 flex flex-row"},i.a.createElement(C.f,{formName:J,filterName:"BLOOD_GROUP",fieldName:"bloodgroup",label:"Bloodgroup",cssClass:"w-1/2",onDDChange:de}),i.a.createElement(N.y,{className:"mb-8 ml-16 w-1/2",type:"text",name:"identification",label:"Identification",value:J.identification,multiline:!0,rows:5,validations:{maxLength:250},validationErrors:{maxLength:"You can not type in more than 250 characters"},variant:"outlined",onChange:X})))),1===B&&I&&i.a.createElement(R,{staffId:Z})),i.a.createElement(h.a,{className:"whitespace-no-wrap normal-case self-center mb-32",variant:"contained",color:"secondary",disabled:!_,onClick:function(){E.current.submit()}},"Save"))})}))}}]);