(this["webpackJsonpsivanandha-vidyashram-seithur"]=this["webpackJsonpsivanandha-vidyashram-seithur"]||[]).push([[19],{1395:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),l=a(195),i=a(890),c=a(891),s=a(10),m=a(826),d=a(757),f=a(812),u=a(192),p=a(11),_=a(134),b=a.n(_),x=a(32),g=a.n(x),h=a(70),y=a(147);var E=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.fee.dialog})),a=Object(n.useState)([]),r=Object(s.a)(a,2),l=r[0],i=r[1],c=Object(u.b)(y.c.getAllFeeInstallments,{onCompleted:function(e){b.a.isEmpty(e.getAllFeeInstallments)?i([]):i(e.getAllFeeInstallments)}}),_=Object(s.a)(c,2),x=_[0],E=_[1],v=E.loading,w=E.error;return Object(n.useEffect)((function(){x()}),[]),Object(n.useEffect)((function(){t.props.open||"close"===t.type||x()}),[t.props.open,t.type]),o.a.createElement("div",{className:"w-full flex flex-col"},v||!l?o.a.createElement(h.s,null):o.a.createElement(h.o,{cssClass:"",data:l,hasExport:!0,columns:[{id:"fee_period",Header:"Fee Period",accessor:"fee_period",style:{whiteSpace:"unset"},className:"ml-8"},{id:"term_name",Header:"Term",accessor:"term_name"},{id:"term_month_names",Header:"Term Months",accessor:function(e){return e.term_month_names?e.term_month_names.join(", "):""}},{id:"no_of_months",Header:"No of Months",accessor:"no_of_months"},{id:"from_date",Header:"From Date",accessor:function(e){return e.from_date?g()(e.from_date).format("MMM Do YYYY"):""}},{id:"to_date",Header:"To Date",accessor:function(e){return e.to_date?g()(e.to_date).format("MMM Do YYYY"):""}},{id:"updatedon",Header:"Last Updated on",accessor:function(e){return e.updatedon?e.updatedon:e.createdon},Cell:function(e){return o.a.createElement("div",{className:"pl-8 "},e.row.original.updatedon?g()(e.row.original.updatedon).format("MMM Do YYYY, h:mm a"):g()(e.row.original.createdon).format("MMM Do YYYY, h:mm a"))}},{id:"controls",Header:"",sortable:!1,className:"flex flex-no-wrap",Cell:function(t){return o.a.createElement(n.Fragment,null,o.a.createElement(m.a,{title:"Edit"},o.a.createElement(d.a,{onClick:function(a){a.stopPropagation(),e(y.b.openEditDialog(t.row.original,"edit"))}},o.a.createElement(f.a,null,"edit"))),o.a.createElement(m.a,{title:"Delete / Inactivate"},o.a.createElement(d.a,{onClick:function(a){a.stopPropagation(),e(y.b.openEditDialog(t.row.original,"delete"))}},o.a.createElement(f.a,null,"delete"))))}}]}),w?o.a.createElement(h.v,{message:"There was an error !"}):null)},v=a(8),w=a(829),j=a(823),O=a(833),N=a(174),D=a(834),C=a(902),I=a(836),S=a(835),F=a(832),M=a(874),Y=a(771),A=a(1369),T=a(101),k=a(79),P=a.n(k),W={id:"",fee_period:"",term_name:"",term_month_names:[],no_of_months:0,from_date:new Date,to_date:new Date,acad_year:"",school_id:""};var L=function(e){var t=Object(p.b)(),a=Object(p.c)((function(e){return e.fee.dialog})),l=Object(n.useState)(!1),i=Object(s.a)(l,2),c=i[0],m=i[1],d=Object(T.b)(W),_=d.form,b=d.setForm,x=d.setInForm,g=Object(n.useRef)(null),E=Object(n.useState)(""),k=Object(s.a)(E,2),L=k[0],G=k[1],H=y.c.editFeeInstallments;"new"===a.type?H=y.c.addFeeInstallments:"edit"===a.type?H=y.c.editFeeInstallments:"delete"===a.type&&(H=y.c.delFeeInstallments);var z=Object(u.c)(H,{onCompleted:function(){X()}}),R=Object(s.a)(z,2),B=R[0],J=R[1],V=J.loading,q=J.error,U=Object(n.useCallback)((function(){"edit"!==a.type&&"delete"!==a.type||!a.data||b(Object(v.a)({},a.data)),"new"===a.type&&b(Object(v.a)({},W))}),[a.data,a.type,b]);Object(n.useEffect)((function(){return a.props.open&&U(),function(){b(W)}}),[a.props.open,U,b]);var X=function(){G(""),"edit"===a.type?t(y.b.closeEditDialog()):t(y.b.closeNewDialog())},$=function(e){var t=e.term_name;"Monthly Fee"===_.fee_period?t="Monthly":"Annual Fee"===_.fee_period&&(t="Annual"),"One Time Fee"===_.fee_period&&(t="One Time"),function(){_.id;var e=_.fee_period,t=_.term_month_names,a=_.no_of_months,n=_.from_date,o=_.to_date;_.acad_year,_.school_id;return e.length?t.length||a?"Monthly Fee"===_.fee_period||n.toDateString()!==o.toDateString()||(G("Effective from date and to date cannot be same."),!1):(G("Please select all applicable months and verify the number of months are selected correctly."),!1):(G("Fee Period cannot be empty"),!1)}()&&B({variables:{fee_period:_.fee_period,term_name:t,term_month_names:_.term_month_names,no_of_months:_.no_of_months,from_date:_.from_date,to_date:_.to_date,acad_year:"acad_year",school_id:"school_id"}})};return o.a.createElement(w.a,Object.assign({},a.props,{onClose:X,fullWidth:!0,maxWidth:"sm"}),o.a.createElement(j.a,{position:"static",elevation:1},o.a.createElement(O.a,{className:"flex w-full"},o.a.createElement(N.a,{variant:"subtitle1",color:"inherit"},"new"===a.type?"New Fee Period & Installments":"edit"===a.type?"Edit Fee Period & Installments":"Delete Fee Period & Installments"))),o.a.createElement(D.a,{classes:{root:"px-16 sm:px-24"}},L&&o.a.createElement("div",{className:"text-15 text-red text-center my-16"},L),o.a.createElement(n.Fragment,null,o.a.createElement(P.a,{onValid:function(){m(!0)},onInvalid:function(){m(!1)},ref:g,onValidSubmit:function(e){"new"===a.type?$(e):"edit"===a.type?B({variables:{id:_.id,fee_period:_.fee_period,term_name:e.term_name,term_month_names:_.term_month_names,no_of_months:_.no_of_months,from_date:_.from_date,to_date:_.to_date,acad_year:"acad_year",school_id:"school_id"}}):"delete"===a.type&&B({variables:{id:_.id}})}},o.a.createElement(C.a,{container:!0,spacing:1,direction:"column",justify:"center",alignItems:"center",className:"w-full"},o.a.createElement(C.a,{item:!0,xs:12,className:"w-full flex flex-row mb-0 px-16 self-start"},o.a.createElement(C.a,{item:!0,xs:6},o.a.createElement(h.f,{formName:_,filterName:"FEE_PERIOD",fieldName:"fee_period",label:"Fee Period",cssClass:"my-8 mr-8",onDDChange:function(e,t){x(t,e.label)}})),o.a.createElement(C.a,{item:!0,xs:6},o.a.createElement(r.x,{className:"my-8 mr-8 w-full",type:"text",name:"term_name",label:"Term Name",value:_.term_name,InputProps:{endAdornment:o.a.createElement(I.a,{position:"end"},o.a.createElement(f.a,{className:"text-20",color:"action"},"book"))},variant:"outlined",disabled:"Monthly Fee"===_.fee_period||"Annual Fee"===_.fee_period||"One Time Fee"===_.fee_period}))),o.a.createElement(C.a,{item:!0,xs:12,className:"w-full flex flex-row mb-0 px-16 self-start"},o.a.createElement(h.n,{label:"Select all applicable months",cssClass:"my-8 w-full",isCheckbox:!0,fieldName:"term_month_names",showAll:!1,selectedData:_.term_month_names,onDDChange:function(e,t){x(t,e),x("no_of_months",e.length)}})),o.a.createElement(C.a,{item:!0,xs:12,className:"w-full flex flex-row mb-0 px-16 self-start"},o.a.createElement(r.x,{className:"pr-8 my-8 w-2/4 self-end",type:"number",name:"no_of_months",label:"No. of Month(s)",value:_.no_of_months,InputProps:{endAdornment:o.a.createElement(I.a,{position:"end"},o.a.createElement(f.a,{className:"text-20",color:"action"},"book"))},variant:"outlined",required:!0})),o.a.createElement(C.a,{item:!0,xs:12,className:"w-full flex flex-row mb-0 px-16 self-start"},o.a.createElement(Y.a,{utils:M.a},o.a.createElement(A.a,{className:"ml-8",variant:"outlined",format:"dd/MM/yyyy",margin:"normal",id:"from_date",label:"From Date",value:_.from_date,onChange:function(e){x("from_date",e)},animateYearScrolling:!0,disabled:"Monthly Fee"===_.fee_period}),o.a.createElement(A.a,{className:"ml-8",variant:"outlined",format:"dd/MM/yyyy",margin:"normal",id:"to_date",label:"To Date",value:_.to_date,onChange:function(e){x("to_date",e)},animateYearScrolling:!0,disabled:"Monthly Fee"===_.fee_period}))))),V&&o.a.createElement(h.s,{message:"Saving data..."}),q&&o.a.createElement(N.a,{className:"pt-32"},"Error : Please try again! ",o.a.createElement("br",null),q.message," ",o.a.createElement("br",null)))),o.a.createElement(S.a,{className:"justify-between pl-8 sm:pl-16"},o.a.createElement(F.a,{className:"normal-case",variant:"contained",color:"primary",onClick:function(){G(""),t(y.b.closeOnlyDialog())}},"Close"),"new"===a.type&&o.a.createElement(F.a,{className:"normal-case",variant:"contained",color:"primary",onClick:function(){g.current.submit()},disabled:!c},"Add Fee Installments"),"edit"===a.type&&o.a.createElement(F.a,{className:"normal-case",variant:"contained",color:"primary",onClick:function(){g.current.submit()},disabled:!c},"Save"),"delete"===a.type&&o.a.createElement(F.a,{className:"normal-case",variant:"contained",color:"primary",onClick:function(){g.current.submit()}},"Delete")))};t.default=Object(l.a)("fee",i.a)((function(){var e=Object(n.useRef)(null);return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.m,{classes:{contentWrapper:"p-0 h-full",content:"flex flex-col h-full",header:"min-h-72 h-72 sm:h-72 sm:min-h-72"},header:o.a.createElement(c.a,{pageLayout:e,headerName:"Fee Period & Installments Setup",buttonDisplay:"Add New",icon:"view_array"}),content:o.a.createElement(E,null),ref:e,innerScroll:!0}),o.a.createElement(L,null))}))},890:function(e,t,a){"use strict";var n=a(8),o=a(147),r={data:[],searchText:"",dialog:{type:"edit",props:{open:!1},data:null,mode:null}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.b.SET_SEARCH_TEXT:return Object(n.a)(Object(n.a)({},e),{},{searchText:t.searchText});case o.b.OPEN_NEW_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:"new",props:{open:!0},data:t.data,mode:t.mode}});case o.b.CLOSE_NEW_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:"new",props:{open:!1},data:null}});case o.b.OPEN_EDIT_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:t.mode,props:{open:!0},data:t.data,mode:t.mode}});case o.b.CLOSE_EDIT_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:t.mode,props:{open:!1},data:null}});case o.b.CLOSE_ONLY_DIALOG:return Object(n.a)(Object(n.a)({},e),{},{dialog:{type:"close",props:{open:!1},data:null}});default:return e}}},891:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(812),l=a(174),i=a(832),c=a(16),s=a(11),m=a(147),d=a(87);t.a=function(e){var t=Object(s.b)(),a=Object(d.g)();return o.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between px-24"},o.a.createElement("div",{className:"flex items-center"},o.a.createElement(c.a,{animation:"transition.expandIn",delay:300},o.a.createElement(r.a,{className:"text-32 mr-12"},e.icon)),o.a.createElement(c.a,{animation:"transition.slideLeftIn",delay:300},o.a.createElement(l.a,{variant:"h6",className:"hidden sm:flex"},e.headerName))),o.a.createElement(c.a,{animation:"transition.slideRightIn",delay:300},o.a.createElement(i.a,{onClick:function(){"feereports"===e.routeName||e.routeName?a.push("/fee/feereports"):t(m.b.openNewDialog())},variant:"contained"},o.a.createElement("span",{className:"hidden sm:flex normal-case"},e.buttonDisplay?e.buttonDisplay:"Add New"),o.a.createElement("span",{className:"flex sm:hidden normal-case"},"New"))))}},902:function(e,t,a){"use strict";var n=a(5),o=a(1),r=a(0),l=(a(3),a(2)),i=a(9),c=[0,1,2,3,4,5,6,7,8,9,10],s=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=parseFloat(e);return"".concat(a/t).concat(String(e).replace(String(a),"")||"px")}var d=r.forwardRef((function(e,t){var a=e.alignContent,i=void 0===a?"stretch":a,c=e.alignItems,s=void 0===c?"stretch":c,m=e.classes,d=e.className,f=e.component,u=void 0===f?"div":f,p=e.container,_=void 0!==p&&p,b=e.direction,x=void 0===b?"row":b,g=e.item,h=void 0!==g&&g,y=e.justify,E=void 0===y?"flex-start":y,v=e.lg,w=void 0!==v&&v,j=e.md,O=void 0!==j&&j,N=e.sm,D=void 0!==N&&N,C=e.spacing,I=void 0===C?0:C,S=e.wrap,F=void 0===S?"wrap":S,M=e.xl,Y=void 0!==M&&M,A=e.xs,T=void 0!==A&&A,k=e.zeroMinWidth,P=void 0!==k&&k,W=Object(n.a)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),L=Object(l.default)(m.root,d,_&&[m.container,0!==I&&m["spacing-xs-".concat(String(I))]],h&&m.item,P&&m.zeroMinWidth,"row"!==x&&m["direction-xs-".concat(String(x))],"wrap"!==F&&m["wrap-xs-".concat(String(F))],"stretch"!==s&&m["align-items-xs-".concat(String(s))],"stretch"!==i&&m["align-content-xs-".concat(String(i))],"flex-start"!==E&&m["justify-xs-".concat(String(E))],!1!==T&&m["grid-xs-".concat(String(T))],!1!==D&&m["grid-sm-".concat(String(D))],!1!==O&&m["grid-md-".concat(String(O))],!1!==w&&m["grid-lg-".concat(String(w))],!1!==Y&&m["grid-xl-".concat(String(Y))]);return r.createElement(u,Object(o.a)({className:L,ref:t},W))})),f=Object(i.a)((function(e){return Object(o.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var a={};return c.forEach((function(n){var o=e.spacing(n);0!==o&&(a["spacing-".concat(t,"-").concat(n)]={margin:"-".concat(m(o,2)),width:"calc(100% + ".concat(m(o),")"),"& > $item":{padding:m(o,2)}})})),a}(e,"xs"),e.breakpoints.keys.reduce((function(t,a){return function(e,t,a){var n={};s.forEach((function(e){var t="grid-".concat(a,"-").concat(e);if(!0!==e)if("auto"!==e){var o="".concat(Math.round(e/12*1e8)/1e6,"%");n[t]={flexBasis:o,flexGrow:0,maxWidth:o}}else n[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else n[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===a?Object(o.a)(e,n):e[t.breakpoints.up(a)]=n}(t,e,a),t}),{}))}),{name:"MuiGrid"})(d);t.a=f}}]);